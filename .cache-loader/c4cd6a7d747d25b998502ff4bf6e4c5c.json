{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Publishing/Sections/ArtworkCaption.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Sections/ArtworkCaption.tsx","mtime":1525723951000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1527877289000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ArtworkCaption = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Colors = _interopRequireDefault(require(\"../../../Assets/Colors\"));\n\nvar _Helpers = require(\"../../Helpers\");\n\nvar _TextLink = _interopRequireDefault(require(\"../../TextLink\"));\n\nvar _Fonts = require(\"../../../Assets/Fonts\");\n\nvar _Truncator = require(\"./Truncator\");\n\nvar _ErrorBoundary = require(\"../../ErrorBoundary\");\n\nvar _templateObject = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    padding: 0 10px;\\n  \"], [\"\\n    padding: 0 10px;\\n  \"]),\n    _templateObject2 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    \", \"\\n    flex-direction: column;\\n\\n    .title, .title a {\\n      \", \"\\n    }\\n  \"], [\"\\n    \", \"\\n    flex-direction: column;\\n\\n    .title, .title a {\\n      \", \"\\n    }\\n  \"]),\n    _templateObject3 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    &.artist-name {\\n      margin-bottom: 5px;\\n    }\\n  \"], [\"\\n    &.artist-name {\\n      margin-bottom: 5px;\\n    }\\n  \"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nvar ArtworkCaption =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ArtworkCaption, _React$Component);\n\n  function ArtworkCaption() {\n    var _ref;\n\n    var _temp, _this;\n\n    _classCallCheck(this, ArtworkCaption);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _possibleConstructorReturn(_this, (_temp = _this = _possibleConstructorReturn(this, (_ref = ArtworkCaption.__proto__ || Object.getPrototypeOf(ArtworkCaption)).call.apply(_ref, [this].concat(args))), Object.defineProperty(_assertThisInitialized(_this), \"renderPartnerCredit\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var children = [_this.renderPartner(), _this.renderCredit()];\n\n        var joined = _this.joinParts(children, \". \");\n\n        return joined;\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderFullscreenCaption\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        return _react.default.createElement(StyledFullscreenCaption, null, _react.default.createElement(Line, null, _react.default.createElement(ArtistNames, null, _this.renderArtists())), _react.default.createElement(\"div\", null, _react.default.createElement(Line, null, _this.renderTitleDate()), _react.default.createElement(Line, null, _this.renderPartnerCredit())));\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderClassicCaption\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        return _react.default.createElement(StyledClassicCaption, {\n          className: \"display-artwork__caption\"\n        }, _react.default.createElement(_Truncator.Truncator, null, _react.default.createElement(ArtistNames, null, _this.renderArtists()), _this.renderTitleDate(), \". \", _this.renderPartner()));\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderEditorialCaption\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var _this$props = _this.props,\n            layout = _this$props.layout,\n            sectionLayout = _this$props.sectionLayout;\n        return _react.default.createElement(StyledArtworkCaption, {\n          layout: layout,\n          sectionLayout: sectionLayout,\n          className: \"display-artwork__caption\"\n        }, _react.default.createElement(ArtistNames, null, _this.renderArtists()), _react.default.createElement(\"div\", null, _react.default.createElement(_Truncator.Truncator, null, _this.renderTitleDate()), _react.default.createElement(_Truncator.Truncator, null, _this.renderPartnerCredit())));\n      }\n    }), _temp));\n  }\n\n  _createClass(ArtworkCaption, [{\n    key: \"joinParts\",\n    value: function joinParts(children) {\n      var delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \", \";\n\n      var compacted = _lodash.default.compact(children);\n\n      var delimSpan = _react.default.createElement(\"span\", null, delimiter);\n\n      if (compacted.length) {\n        var reduced = compacted.reduce(function (prev, curr) {\n          return [prev, delimSpan, curr];\n        });\n        return reduced;\n      } else {\n        return [];\n      }\n    }\n  }, {\n    key: \"joinArtistNames\",\n    value: function joinArtistNames(names) {\n      var delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \", \";\n\n      if (names.length === 0) {\n        return [];\n      }\n\n      var delimSpan = _react.default.createElement(\"span\", null, delimiter);\n\n      return names.slice(1).reduce(function (prev, curr, i) {\n        return prev.concat([delimSpan, curr]);\n      }, [names[0]]);\n    }\n  }, {\n    key: \"renderArtists\",\n    value: function renderArtists() {\n      var _this2 = this;\n\n      var _props$artwork = this.props.artwork,\n          artist = _props$artwork.artist,\n          artists = _props$artwork.artists; // Multiple artists\n\n      if (artists && artists.length > 1) {\n        var names = artists.map(function (a, i) {\n          var artistName = _this2.renderArtistName(a, i);\n\n          return artistName;\n        });\n        var joinedNames = this.joinArtistNames(names);\n        return joinedNames; // Single artist\n      } else if (artist) {\n        var artistName = this.renderArtistName(artist, 0);\n        return artistName;\n      }\n    }\n  }, {\n    key: \"renderArtistName\",\n    value: function renderArtistName(artist, i) {\n      var linked = this.props.linked;\n      var name = artist.name,\n          slug = artist.slug;\n      var createTextLink = linked && slug;\n\n      if (createTextLink) {\n        var href = \"/artist/\".concat(slug);\n        return _react.default.createElement(ArtistName, {\n          key: \"artist-\".concat(i)\n        }, _react.default.createElement(_TextLink.default, {\n          href: href,\n          color: \"#999\"\n        }, name));\n      } else {\n        return _react.default.createElement(\"span\", {\n          className: \"name\"\n        }, name);\n      }\n    }\n  }, {\n    key: \"renderTitleDate\",\n    value: function renderTitleDate() {\n      var children = [this.renderTitle(), this.renderDate()];\n      var titleDate = this.joinParts(children);\n      return titleDate;\n    }\n  }, {\n    key: \"renderTitle\",\n    value: function renderTitle() {\n      var _props = this.props,\n          _props$artwork2 = _props.artwork,\n          slug = _props$artwork2.slug,\n          title = _props$artwork2.title,\n          linked = _props.linked;\n\n      if (title) {\n        if (linked) {\n          var href = \"/artwork/\".concat(slug);\n          return _react.default.createElement(\"span\", {\n            key: 0,\n            className: \"title\"\n          }, _react.default.createElement(_TextLink.default, {\n            href: href,\n            color: \"#999\"\n          }, title));\n        } else {\n          return _react.default.createElement(\"span\", {\n            key: 0,\n            className: \"title\"\n          }, title);\n        }\n      }\n    }\n  }, {\n    key: \"renderDate\",\n    value: function renderDate() {\n      var date = this.props.artwork.date;\n\n      if (date && date.length) {\n        return _react.default.createElement(\"span\", {\n          key: 1,\n          className: \"date\"\n        }, date);\n      }\n    }\n  }, {\n    key: \"renderPartner\",\n    value: function renderPartner() {\n      var _props2 = this.props,\n          _props2$artwork$partn = _props2.artwork.partner,\n          name = _props2$artwork$partn.name,\n          slug = _props2$artwork$partn.slug,\n          linked = _props2.linked;\n\n      if (name) {\n        var createTextLink = Boolean(linked && slug);\n\n        if (createTextLink) {\n          return _react.default.createElement(_TextLink.default, {\n            key: 2,\n            href: \"/\".concat(slug),\n            color: \"#999\"\n          }, name);\n        } else {\n          return name;\n        }\n      }\n    }\n  }, {\n    key: \"renderCredit\",\n    value: function renderCredit() {\n      var credit = this.props.artwork.credit;\n\n      if (credit && credit.length) {\n        return _react.default.createElement(\"span\", {\n          key: 3,\n          className: \"credit\"\n        }, credit);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props3 = this.props,\n          layout = _props3.layout,\n          isFullscreenCaption = _props3.isFullscreenCaption;\n      return _react.default.createElement(_ErrorBoundary.ErrorBoundary, null, _react.default.createElement(\"div\", null, isFullscreenCaption ? this.renderFullscreenCaption() : layout === \"classic\" ? this.renderClassicCaption() : this.renderEditorialCaption()));\n    }\n  }]);\n\n  return ArtworkCaption;\n}(_react.default.Component);\n\nexports.ArtworkCaption = ArtworkCaption;\n\nvar ArtistNames =\n/*#__PURE__*/\n_styledComponents.default.span.withConfig({\n  displayName: \"ArtworkCaption__ArtistNames\",\n  componentId: \"t0bcvj-0\"\n})([\"margin-right:30px;\"]);\n\nvar ArtistName =\n/*#__PURE__*/\n_styledComponents.default.span.withConfig({\n  displayName: \"ArtworkCaption__ArtistName\",\n  componentId: \"t0bcvj-1\"\n})([\"white-space:nowrap;\"]);\n\nvar StyledArtworkCaption =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArtworkCaption__StyledArtworkCaption\",\n  componentId: \"t0bcvj-2\"\n})([\"padding:\", \";margin-top:10px;display:flex;color:\", \";\", \";.title,.title a{\", \";}a{color:\", \";\", \";}\", \";\"], function (props) {\n  return props.sectionLayout === \"fillwidth\" ? \"0 10px;\" : \"0;\";\n}, _Colors.default.grayDark, (0, _Fonts.unica)(\"s14\"), (0, _Fonts.unica)(\"s14\", \"italic\"), _Colors.default.grayDark, (0, _Fonts.unica)(\"s14\"), _Helpers.pMedia.xs(_templateObject));\n\nvar StyledClassicCaption =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArtworkCaption__StyledClassicCaption\",\n  componentId: \"t0bcvj-3\"\n})([\"margin-top:10px;display:block;color:\", \";\", \";\", \"{margin-right:0;font-weight:bold;&:after{content:\\\", \\\";}}.title{font-style:italic;}\"], _Colors.default.grayDark, (0, _Fonts.garamond)(\"s15\"), ArtistNames);\n\nvar StyledFullscreenCaption =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArtworkCaption__StyledFullscreenCaption\",\n  componentId: \"t0bcvj-4\"\n})([\"\", \";display:flex;color:black;.title{\", \";}.title,.title a{\", \";}a{color:black;\", \";}\", \";\"], (0, _Fonts.unica)(\"s16\", \"medium\"), (0, _Fonts.unica)(\"s16\", \"mediumItalic\"), (0, _Fonts.unica)(\"s16\", \"mediumItalic\"), (0, _Fonts.unica)(\"s16\", \"medium\"), _Helpers.pMedia.sm(_templateObject2, (0, _Fonts.unica)(\"s14\", \"medium\"), (0, _Fonts.unica)(\"s14\", \"mediumItalic\")));\n\nvar Line =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArtworkCaption__Line\",\n  componentId: \"t0bcvj-5\"\n})([\"\", \";\"], _Helpers.pMedia.sm(_templateObject3));",{"version":3,"sources":["src/Components/Publishing/Sections/ArtworkCaption.tsx"],"names":["ArtworkCaption","children","renderPartner","renderCredit","joined","joinParts","renderArtists","renderTitleDate","renderPartnerCredit","props","layout","sectionLayout","delimiter","compacted","compact","delimSpan","length","reduced","reduce","prev","curr","names","slice","i","concat","artwork","artist","artists","map","a","artistName","renderArtistName","joinedNames","joinArtistNames","linked","name","slug","createTextLink","href","renderTitle","renderDate","titleDate","title","date","partner","Boolean","credit","isFullscreenCaption","renderFullscreenCaption","renderClassicCaption","renderEditorialCaption","Component","ArtistNames","span","ArtistName","StyledArtworkCaption","div","grayDark","xs","StyledClassicCaption","StyledFullscreenCaption","sm","Line"],"mappings":"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","file":"/Users/eve/development/reaction/src/Components/Publishing/Sections/ArtworkCaption.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import _ from \"lodash\"\nimport React from \"react\"\nimport styled from \"styled-components\"\nimport Colors from \"../../../Assets/Colors\"\nimport { pMedia } from \"../../Helpers\"\nimport TextLink from \"../../TextLink\"\nimport { garamond, unica } from \"Assets/Fonts\"\nimport { ArticleLayout, SectionLayout } from \"../Typings\"\nimport { Truncator } from \"./Truncator\"\nimport { ErrorBoundary } from \"../../ErrorBoundary\"\n\ninterface ArtworkCaptionProps extends React.HTMLProps<HTMLDivElement> {\n  artwork: any\n  layout?: ArticleLayout\n  sectionLayout?: SectionLayout\n  linked?: boolean\n  isFullscreenCaption?: boolean\n}\n\ninterface StyledArtworkCaptionProps extends React.HTMLProps<HTMLDivElement> {\n  layout?: ArticleLayout\n  sectionLayout?: SectionLayout\n}\n\nexport class ArtworkCaption extends React.Component<ArtworkCaptionProps, null> {\n  joinParts(children, delimiter = \", \") {\n    const compacted = _.compact(children)\n    const delimSpan = <span>{delimiter}</span>\n\n    if (compacted.length) {\n      const reduced = compacted.reduce((prev, curr) => {\n        return [prev, delimSpan, curr]\n      })\n      return reduced\n    } else {\n      return []\n    }\n  }\n\n  joinArtistNames(names, delimiter = \", \") {\n    if (names.length === 0) {\n      return []\n    }\n    const delimSpan = <span>{delimiter}</span>\n\n    return names.slice(1).reduce(\n      (prev, curr, i) => {\n        return prev.concat([delimSpan, curr])\n      },\n      [names[0]]\n    )\n  }\n\n  renderArtists() {\n    const {\n      artwork: { artist, artists },\n    } = this.props\n\n    // Multiple artists\n    if (artists && artists.length > 1) {\n      const names = artists.map((a, i) => {\n        const artistName = this.renderArtistName(a, i)\n        return artistName\n      })\n\n      const joinedNames = this.joinArtistNames(names)\n      return joinedNames\n\n      // Single artist\n    } else if (artist) {\n      const artistName = this.renderArtistName(artist, 0)\n      return artistName\n    }\n  }\n\n  renderArtistName(artist, i) {\n    const { linked } = this.props\n    const { name, slug } = artist\n    const createTextLink = linked && slug\n\n    if (createTextLink) {\n      const href = `/artist/${slug}`\n\n      return (\n        <ArtistName key={`artist-${i}`}>\n          <TextLink href={href} color=\"#999\">\n            {name}\n          </TextLink>\n        </ArtistName>\n      )\n    } else {\n      return <span className=\"name\">{name}</span>\n    }\n  }\n\n  renderTitleDate() {\n    const children = [this.renderTitle(), this.renderDate()]\n    const titleDate = this.joinParts(children)\n    return titleDate\n  }\n\n  renderTitle() {\n    const {\n      artwork: { slug, title },\n      linked,\n    } = this.props\n\n    if (title) {\n      if (linked) {\n        const href = `/artwork/${slug}`\n\n        return (\n          <span key={0} className=\"title\">\n            <TextLink href={href} color=\"#999\">\n              {title}\n            </TextLink>\n          </span>\n        )\n      } else {\n        return (\n          <span key={0} className=\"title\">\n            {title}\n          </span>\n        )\n      }\n    }\n  }\n\n  renderDate() {\n    const {\n      artwork: { date },\n    } = this.props\n\n    if (date && date.length) {\n      return (\n        <span key={1} className=\"date\">\n          {date}\n        </span>\n      )\n    }\n  }\n\n  renderPartner() {\n    const {\n      artwork: {\n        partner: { name, slug },\n      },\n      linked,\n    } = this.props\n\n    if (name) {\n      const createTextLink = Boolean(linked && slug)\n\n      if (createTextLink) {\n        return (\n          <TextLink key={2} href={`/${slug}`} color=\"#999\">\n            {name}\n          </TextLink>\n        )\n      } else {\n        return name\n      }\n    }\n  }\n\n  renderCredit() {\n    const {\n      artwork: { credit },\n    } = this.props\n\n    if (credit && credit.length) {\n      return (\n        <span key={3} className=\"credit\">\n          {credit}\n        </span>\n      )\n    }\n  }\n\n  renderPartnerCredit = () => {\n    const children = [this.renderPartner(), this.renderCredit()]\n\n    const joined = this.joinParts(children, \". \")\n    return joined\n  }\n\n  renderFullscreenCaption = () => {\n    return (\n      <StyledFullscreenCaption>\n        <Line>\n          <ArtistNames>{this.renderArtists()}</ArtistNames>\n        </Line>\n        <div>\n          <Line>{this.renderTitleDate()}</Line>\n          <Line>{this.renderPartnerCredit()}</Line>\n        </div>\n      </StyledFullscreenCaption>\n    )\n  }\n\n  renderClassicCaption = () => {\n    return (\n      <StyledClassicCaption className=\"display-artwork__caption\">\n        <Truncator>\n          <ArtistNames>{this.renderArtists()}</ArtistNames>\n          {this.renderTitleDate()}\n          {\". \"}\n          {this.renderPartner()}\n        </Truncator>\n      </StyledClassicCaption>\n    )\n  }\n\n  renderEditorialCaption = () => {\n    const { layout, sectionLayout } = this.props\n\n    return (\n      <StyledArtworkCaption\n        layout={layout}\n        sectionLayout={sectionLayout}\n        className=\"display-artwork__caption\"\n      >\n        <ArtistNames>{this.renderArtists()}</ArtistNames>\n        <div>\n          <Truncator>{this.renderTitleDate()}</Truncator>\n          <Truncator>{this.renderPartnerCredit()}</Truncator>\n        </div>\n      </StyledArtworkCaption>\n    )\n  }\n\n  render() {\n    const { layout, isFullscreenCaption } = this.props\n\n    return (\n      <ErrorBoundary>\n        <div>\n          {isFullscreenCaption\n            ? this.renderFullscreenCaption()\n            : layout === \"classic\"\n              ? this.renderClassicCaption()\n              : this.renderEditorialCaption()}\n        </div>\n      </ErrorBoundary>\n    )\n  }\n}\n\nconst ArtistNames = styled.span`\n  margin-right: 30px;\n`\n\nconst ArtistName = styled.span`\n  white-space: nowrap;\n`\n\nconst StyledArtworkCaption = styled.div`\n  padding: ${(props: StyledArtworkCaptionProps) =>\n    props.sectionLayout === \"fillwidth\" ? \"0 10px;\" : \"0;\"};\n  margin-top: 10px;\n  display: flex;\n  color: ${Colors.grayDark};\n  ${unica(\"s14\")};\n  .title,\n  .title a {\n    ${unica(\"s14\", \"italic\")};\n  }\n  a {\n    color: ${Colors.grayDark};\n    ${unica(\"s14\")};\n  }\n  ${pMedia.xs`\n    padding: 0 10px;\n  `};\n`\n\nconst StyledClassicCaption = styled.div`\n  margin-top: 10px;\n  display: block;\n  color: ${Colors.grayDark};\n  ${garamond(\"s15\")};\n\n  ${ArtistNames} {\n    margin-right: 0;\n    font-weight: bold;\n    &:after {\n      content: \", \";\n    }\n  }\n\n  .title {\n    font-style: italic;\n  }\n`\n\nconst StyledFullscreenCaption = styled.div`\n  ${unica(\"s16\", \"medium\")};\n  display: flex;\n  color: black;\n\n  .title {\n    ${unica(\"s16\", \"mediumItalic\")};\n  }\n\n  .title,\n  .title a {\n    ${unica(\"s16\", \"mediumItalic\")};\n  }\n  a {\n    color: black;\n    ${unica(\"s16\", \"medium\")};\n  }\n\n  ${pMedia.sm`\n    ${unica(\"s14\", \"medium\")}\n    flex-direction: column;\n\n    .title, .title a {\n      ${unica(\"s14\", \"mediumItalic\")}\n    }\n  `};\n`\n\nconst Line = styled.div`\n  ${pMedia.sm`\n    &.artist-name {\n      margin-bottom: 5px;\n    }\n  `};\n`\n"]}]}