{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Apps/Artist/Routes/CV/CVItem.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Apps/Artist/Routes/CV/CVItem.tsx","mtime":1537112679000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _groupBy from \"lodash/groupBy\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { Col, Row } from \"../../../../Styleguide/Elements/Grid\";\nimport { Responsive } from \"../../../../Utils/Responsive\";\nimport { Box, Button, Flex, Sans, Separator, Serif, space, Spacer } from \"@artsy/palette\";\nimport { createPaginationContainer, graphql } from \"react-relay\";\nimport { ShowEntry } from \"./ShowEntry\";\nexport var PAGE_SIZE = 10;\n\nvar ShowMoreButton = function ShowMoreButton(props) {\n  return React.createElement(Button, _extends({\n    variant: \"secondaryOutline\",\n    size: \"medium\"\n  }, props), \"Show more\");\n};\n\nvar CVItem =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CVItem, _Component);\n\n  function CVItem() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CVItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CVItem)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      isLoading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"renderEntries\", function (entries) {\n      var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n      return entries.map(function (_ref, key) {\n        var node = _ref.node;\n        return React.createElement(ShowEntry, {\n          node: node,\n          key: key,\n          size: size\n        });\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(CVItem, [{\n    key: \"loadMore\",\n    value: function loadMore() {\n      var _this2 = this;\n\n      var hasMore = this.props.artist.showsConnection.pageInfo.hasNextPage;\n\n      if (hasMore) {\n        this.setState({\n          isLoading: true\n        });\n        this.props.relay.loadMore(PAGE_SIZE, function (error) {\n          if (error) {\n            console.error(error);\n          }\n\n          _this2.setState({\n            isLoading: false\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (!this.props.artist.showsConnection.edges.length) {\n        return null;\n      }\n\n      var groupedByYear = _groupBy(this.props.artist.showsConnection.edges, function (_ref2) {\n        var show = _ref2.node;\n        return show.start_at;\n      });\n\n      return React.createElement(Responsive, null, function (_ref3) {\n        var xs = _ref3.xs,\n            sm = _ref3.sm,\n            md = _ref3.md;\n        // Element spacing - correction for lineheight\n        var sectionSpace = space(4) - 4;\n        return React.createElement(CVItems, {\n          className: \"cvItems\"\n        }, (xs || sm || md) && React.createElement(Row, null, React.createElement(Col, null, React.createElement(Category, {\n          size: xs ? \"2\" : \"3\",\n          weight: \"medium\"\n        }, _this3.props.category), React.createElement(Spacer, {\n          mb: xs ? 0.5 : 1\n        }))), Object.keys(groupedByYear).sort().reverse().map(function (year, index) {\n          var isFirst = index === 0;\n          var yearGroup = groupedByYear[year];\n          return xs ? React.createElement(Flex, {\n            key: index\n          }, React.createElement(Year, {\n            size: \"2\",\n            mr: 1\n          }, year), React.createElement(Box, null, _this3.renderEntries(yearGroup, \"2\"))) : React.createElement(Row, {\n            key: index\n          }, !sm && !md && React.createElement(Col, {\n            xl: 2,\n            lg: 2\n          }, isFirst && React.createElement(Category, {\n            size: \"3\",\n            weight: \"medium\"\n          }, _this3.props.category)), React.createElement(Col, {\n            lg: 1,\n            md: 2,\n            sm: 2\n          }, React.createElement(Year, {\n            mr: 2,\n            size: \"3\"\n          }, year)), React.createElement(Col, {\n            md: 8,\n            lg: 9,\n            xl: 9,\n            sm: 10\n          }, _this3.renderEntries(yearGroup)));\n        }), _this3.hasMore && React.createElement(Row, null, React.createElement(Col, {\n          xs: 0,\n          sm: 0,\n          md: 0,\n          lg: 2,\n          xl: 2\n        }), React.createElement(Col, {\n          lgOffset: 2,\n          xlOffset: 2,\n          lg: 10,\n          xl: 10\n        }, React.createElement(ShowMoreButton, {\n          onClick: function onClick() {\n            return _this3.loadMore();\n          },\n          loading: _this3.state.isLoading ? true : false,\n          width: xs ? \"100%\" : \"\",\n          mt: xs ? 1 : 2\n        }), xs && React.createElement(Spacer, {\n          mb: 1\n        }))), React.createElement(\"div\", {\n          className: \"cvSeparator\"\n        }, xs ? React.createElement(Spacer, {\n          mt: 1\n        }) : React.createElement(Separator, {\n          my: sectionSpace\n        })));\n      });\n    }\n  }, {\n    key: \"hasMore\",\n    get: function get() {\n      var hasMore = this.props.artist.showsConnection.pageInfo.hasNextPage;\n      return hasMore;\n    }\n  }]);\n\n  return CVItem;\n}(Component);\n\nexport var CVPaginationContainer = createPaginationContainer(CVItem, {\n  artist: function artist() {\n    var node = require(\"../../../../__generated__/CVItem_artist.graphql\");\n\n    if (node.hash && node.hash !== \"efd1928bb5d5bdcdca9ef11bd2849976\") {\n      console.error(\"The definition of 'CVItem_artist' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../../../__generated__/CVItem_artist.graphql\");\n  }\n}, {\n  direction: \"forward\",\n  getConnectionFromProps: function getConnectionFromProps(props) {\n    return props.artist.showsConnection;\n  },\n  getFragmentVariables: function getFragmentVariables(prevVars, totalCount) {\n    return _objectSpread({}, prevVars, {\n      count: totalCount\n    });\n  },\n  getVariables: function getVariables(props, _ref4, fragmentVariables) {\n    var count = _ref4.count,\n        cursor = _ref4.cursor;\n    return _objectSpread({}, fragmentVariables, {\n      count: count,\n      cursor: cursor,\n      artistID: props.artist.id\n    });\n  },\n  query: function query() {\n    var node = require(\"../../../../__generated__/CVItemQuery.graphql\");\n\n    if (node.hash && node.hash !== \"0b1a3246fdd41a497dffb3b7697f5422\") {\n      console.error(\"The definition of 'CVItemQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../../../__generated__/CVItemQuery.graphql\");\n  }\n});\nvar CVItems = styled(Box).withConfig({\n  displayName: \"CVItem__CVItems\",\n  componentId: \"s1ljh711-0\"\n})([\"\"]);\nvar Year = Serif;\nvar Category = Sans;",{"version":3,"sources":["/Users/eve/development/reaction/src/Apps/Artist/Routes/CV/CVItem.tsx"],"names":["React","Component","styled","Col","Row","Responsive","Box","Button","Flex","Sans","Separator","Serif","space","Spacer","createPaginationContainer","graphql","ShowEntry","PAGE_SIZE","ShowMoreButton","props","CVItem","isLoading","entries","size","undefined","map","key","node","hasMore","artist","showsConnection","pageInfo","hasNextPage","setState","relay","loadMore","error","console","edges","length","groupedByYear","show","start_at","xs","sm","md","sectionSpace","category","Object","keys","sort","reverse","year","index","isFirst","yearGroup","renderEntries","state","CVPaginationContainer","direction","getConnectionFromProps","getFragmentVariables","prevVars","totalCount","count","getVariables","fragmentVariables","cursor","artistID","id","query","CVItems","Year","Category"],"mappings":"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","sourcesContent":["import { CVItem_artist } from \"__generated__/CVItem_artist.graphql\"\nimport { groupBy } from \"lodash\"\nimport React, { Component } from \"react\"\nimport styled from \"styled-components\"\nimport { Col, Row } from \"Styleguide/Elements/Grid\"\nimport { Responsive } from \"Utils/Responsive\"\n\nimport {\n  Box,\n  Button,\n  Flex,\n  Sans,\n  Separator,\n  Serif,\n  space,\n  Spacer,\n} from \"@artsy/palette\"\n\nimport {\n  createPaginationContainer,\n  graphql,\n  RelayPaginationProp,\n} from \"react-relay\"\nimport { ShowEntry } from \"./ShowEntry\"\n\nexport const PAGE_SIZE = 10\n\nconst ShowMoreButton = props => (\n  <Button variant=\"secondaryOutline\" size=\"medium\" {...props}>\n    Show more\n  </Button>\n)\n\nexport interface CVItemProps {\n  relay: RelayPaginationProp\n  artist: CVItem_artist\n  category: string\n}\n\ninterface CVItemState {\n  isLoading: boolean\n}\n\nclass CVItem extends Component<CVItemProps, CVItemState> {\n  state = {\n    isLoading: false,\n  }\n\n  loadMore() {\n    const hasMore = this.props.artist.showsConnection.pageInfo.hasNextPage\n\n    if (hasMore) {\n      this.setState({\n        isLoading: true,\n      })\n\n      this.props.relay.loadMore(PAGE_SIZE, error => {\n        if (error) {\n          console.error(error)\n        }\n\n        this.setState({\n          isLoading: false,\n        })\n      })\n    }\n  }\n\n  get hasMore() {\n    const hasMore = this.props.artist.showsConnection.pageInfo.hasNextPage\n    return hasMore\n  }\n\n  renderEntries = (entries, size = undefined) =>\n    entries.map(({ node }, key) => (\n      <ShowEntry node={node} key={key} size={size} />\n    ))\n\n  render() {\n    if (!this.props.artist.showsConnection.edges.length) {\n      return null\n    }\n\n    const groupedByYear = groupBy(\n      this.props.artist.showsConnection.edges,\n      ({ node: show }) => {\n        return show.start_at\n      }\n    )\n\n    return (\n      <Responsive>\n        {({ xs, sm, md }) => {\n          // Element spacing - correction for lineheight\n          const sectionSpace = space(4) - 4\n\n          return (\n            <CVItems className=\"cvItems\">\n              {(xs || sm || md) && (\n                <Row>\n                  <Col>\n                    <Category size={xs ? \"2\" : \"3\"} weight=\"medium\">\n                      {this.props.category}\n                    </Category>\n                    <Spacer mb={xs ? 0.5 : 1} />\n                  </Col>\n                </Row>\n              )}\n              {Object.keys(groupedByYear)\n                .sort()\n                .reverse()\n                .map((year, index) => {\n                  const isFirst = index === 0\n                  const yearGroup = groupedByYear[year]\n                  return xs ? (\n                    <Flex key={index}>\n                      <Year size=\"2\" mr={1}>\n                        {year}\n                      </Year>\n                      <Box>{this.renderEntries(yearGroup, \"2\")}</Box>\n                    </Flex>\n                  ) : (\n                    <Row key={index}>\n                      {!sm &&\n                        !md && (\n                          <Col xl={2} lg={2}>\n                            {isFirst && (\n                              <Category size=\"3\" weight=\"medium\">\n                                {this.props.category}\n                              </Category>\n                            )}\n                          </Col>\n                        )}\n                      <Col lg={1} md={2} sm={2}>\n                        <Year mr={2} size=\"3\">\n                          {year}\n                        </Year>\n                      </Col>\n                      <Col md={8} lg={9} xl={9} sm={10}>\n                        {this.renderEntries(yearGroup)}\n                      </Col>\n                    </Row>\n                  )\n                })}\n\n              {this.hasMore && (\n                <Row>\n                  <Col xs={0} sm={0} md={0} lg={2} xl={2} />\n                  <Col lgOffset={2} xlOffset={2} lg={10} xl={10}>\n                    <ShowMoreButton\n                      onClick={() => this.loadMore()}\n                      loading={this.state.isLoading ? true : false}\n                      width={xs ? \"100%\" : \"\"}\n                      mt={xs ? 1 : 2}\n                    />\n\n                    {xs && <Spacer mb={1} />}\n                  </Col>\n                </Row>\n              )}\n\n              <div className=\"cvSeparator\">\n                {xs ? <Spacer mt={1} /> : <Separator my={sectionSpace} />}\n              </div>\n            </CVItems>\n          )\n        }}\n      </Responsive>\n    )\n  }\n}\n\nexport const CVPaginationContainer = createPaginationContainer(\n  CVItem,\n  {\n    artist: graphql`\n      fragment CVItem_artist on Artist\n        @argumentDefinitions(\n          count: { type: \"Int\", defaultValue: 10 }\n          cursor: { type: \"String\" }\n          sort: { type: \"PartnerShowSorts\", defaultValue: \"start_at_desc\" }\n          at_a_fair: { type: \"Boolean\", defaultValue: false }\n          solo_show: { type: \"Boolean\", defaultValue: false }\n          is_reference: { type: \"Boolean\", defaultValue: true }\n          visible_to_public: { type: \"Boolean\", defaultValue: false }\n        ) {\n        id\n        showsConnection(\n          first: $count\n          after: $cursor\n          sort: $sort\n          at_a_fair: $at_a_fair\n          solo_show: $solo_show\n          is_reference: $is_reference\n          visible_to_public: $visible_to_public\n        ) @connection(key: \"Artist_showsConnection\") {\n          pageInfo {\n            hasNextPage\n          }\n          edges {\n            node {\n              __id\n              partner {\n                ... on ExternalPartner {\n                  name\n                }\n                ... on Partner {\n                  name\n                  href\n                }\n              }\n              name\n              start_at(format: \"YYYY\")\n              city\n              href\n            }\n          }\n        }\n      }\n    `,\n  },\n  {\n    direction: \"forward\",\n    getConnectionFromProps(props) {\n      return props.artist.showsConnection\n    },\n    getFragmentVariables(prevVars, totalCount) {\n      return { ...prevVars, count: totalCount }\n    },\n    getVariables(props, { count, cursor }, fragmentVariables) {\n      return {\n        // in most cases, for variables other than connection filters like\n        // `first`, `after`, etc. you may want to use the previous values.\n        ...fragmentVariables,\n        count,\n        cursor,\n        artistID: props.artist.id,\n      }\n    },\n    query: graphql`\n      query CVItemQuery(\n        $count: Int\n        $cursor: String\n        $artistID: String!\n        $sort: PartnerShowSorts\n        $at_a_fair: Boolean\n        $solo_show: Boolean\n        $is_reference: Boolean\n        $visible_to_public: Boolean\n      ) {\n        artist(id: $artistID) {\n          ...CVItem_artist\n            @arguments(\n              sort: $sort\n              count: $count\n              cursor: $cursor\n              at_a_fair: $at_a_fair\n              solo_show: $solo_show\n              is_reference: $is_reference\n              visible_to_public: $visible_to_public\n            )\n        }\n      }\n    `,\n  }\n)\n\nconst CVItems = styled(Box)``\nconst Year = Serif\nconst Category = Sans\n"]}]}