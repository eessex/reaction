{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Artsy.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Artsy.tsx","mtime":1535727457000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1532461619000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = void 0;\n\nvar _createEnvironment = require(\"../Artsy/Relay/createEnvironment\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ContextTypes = {\n  _isNestedInProvider: _propTypes.default.bool,\n  user: _propTypes.default.object,\n  relayEnvironment: _propTypes.default.object\n  /**\n   * This component provides Artsy specific context props to components down the\n   * tree. Components that wish to consume these props should be wrapped with the\n   * `ContextConsumer` higher-order component.\n   *\n   * @see {@link ContextConsumer}\n   */\n\n};\n\nvar ContextProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ContextProvider, _React$Component);\n\n  function ContextProvider(props) {\n    var _this;\n\n    _classCallCheck(this, ContextProvider);\n\n    if (_react.default.Children.count(props.children) > 1) {\n      throw new Error(\"A ContextProvider expects a single child.\");\n    }\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ContextProvider).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"user\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"relayEnvironment\", void 0);\n\n    if (props.user) {\n      _this.user = props.user;\n    } else if (props.user === undefined) {\n      var id = process.env.USER_ID;\n      var accessToken = process.env.USER_ACCESS_TOKEN;\n\n      if (id && accessToken) {\n        _this.user = {\n          id: id,\n          accessToken: accessToken\n        };\n      }\n    }\n\n    _this.relayEnvironment = props.relayEnvironment || (0, _createEnvironment.createEnvironment)({\n      user: _this.user\n    });\n    return _this;\n  }\n\n  _createClass(ContextProvider, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        _isNestedInProvider: true,\n        user: this.user,\n        relayEnvironment: this.relayEnvironment\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n\n  return ContextProvider;\n}(_react.default.Component);\n/**\n * Wraps a component in a higher-order component that injects the Artsy\n * specific context props into the given component. Wrapped components are\n * expected to be rendered in a tree that contains a `ContextProvider` component.\n *\n * The injected props are described in `ContextProps`.\n *\n * @see {@link ContextProvider}\n * @see {@link ContextProps}\n *\n * @param Component The component that needs Artsy specific context props.\n */\n\n\nexports.ContextProvider = ContextProvider;\n\n_defineProperty(ContextProvider, \"childContextTypes\", ContextTypes);\n\nfunction ContextConsumer(Component) {\n  var _class, _temp;\n\n  var name = Component.displayName || Component.name;\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_React$Component2) {\n    _inherits(_class, _React$Component2);\n\n    function _class(props, context) {\n      _classCallCheck(this, _class);\n\n      if (!context._isNestedInProvider) {\n        var start = name || \"A component\";\n        throw new Error(\"\".concat(start, \", which needs Artsy props, was not wrapped inside a ContextProvider component.\"));\n      }\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(_class).call(this, props, context));\n    }\n\n    _createClass(_class, [{\n      key: \"render\",\n      value: function render() {\n        var _this$context = this.context,\n            user = _this$context.user,\n            relayEnvironment = _this$context.relayEnvironment;\n        var props = Object.assign({\n          user: user,\n          relayEnvironment: relayEnvironment\n        }, this.props);\n        return _react.default.createElement(Component, props);\n      }\n    }]);\n\n    return _class;\n  }(_react.default.Component), _defineProperty(_class, \"contextTypes\", ContextTypes), _defineProperty(_class, \"displayName\", \"Artsy(\".concat(name, \")\")), _temp;\n}",{"version":3,"sources":["src/Components/Artsy.tsx"],"names":["ContextTypes","_isNestedInProvider","PropTypes","bool","user","object","relayEnvironment","ContextProvider","props","React","Children","count","children","Error","undefined","id","process","env","USER_ID","accessToken","USER_ACCESS_TOKEN","Component","ContextConsumer","name","displayName","context","start","Object","assign"],"mappings":";;;;;;;;AAOA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,IAAMA,eAAyD;AAC7DC,uBAAqBC,mBAAUC,IAD8B;AAE7DC,QAAMF,mBAAUG,MAF6C;AAG7DC,oBAAkBJ,mBAAUG;AAG9B;;;;;;;;AAN+D,CAA/D;;IAaaE,e;;;;;AAOX,2BAAYC,KAAZ,EAAkE;AAAA;;AAAA;;AAChE,QAAIC,eAAMC,QAAN,CAAeC,KAAf,CAAqBH,MAAMI,QAA3B,IAAuC,CAA3C,EAA8C;AAC5C,YAAM,IAAIC,KAAJ,CAAU,2CAAV,CAAN;AACD;;AACD,yFAAML,KAAN;;AAJgE;;AAAA;;AAMhE,QAAIA,MAAMJ,IAAV,EAAgB;AACd,YAAKA,IAAL,GAAYI,MAAMJ,IAAlB;AACD,KAFD,MAEO,IAAII,MAAMJ,IAAN,KAAeU,SAAnB,EAA8B;AACnC,UAAMC,KAAKC,QAAQC,GAAR,CAAYC,OAAvB;AACA,UAAMC,cAAcH,QAAQC,GAAR,CAAYG,iBAAhC;;AACA,UAAIL,MAAMI,WAAV,EAAuB;AACrB,cAAKf,IAAL,GAAY;AACVW,gBADU;AAEVI;AAFU,SAAZ;AAID;AACF;;AAED,UAAKb,gBAAL,GACEE,MAAMF,gBAAN,IAA0B,0CAAkB;AAAEF,YAAM,MAAKA;AAAb,KAAlB,CAD5B;AAnBgE;AAqBjE;;;;sCAEiB;AAChB,aAAO;AACLH,6BAAqB,IADhB;AAELG,cAAM,KAAKA,IAFN;AAGLE,0BAAkB,KAAKA;AAHlB,OAAP;AAKD;;;6BAEQ;AACP,aAAO,KAAKE,KAAL,CAAWI,QAAlB;AACD;;;;EAxCkCH,eAAMY,S;AA2C3C;;;;;;;;;;;;;;;;gBA3Cad,e,uBAEgBP,Y;;AAqDtB,SAASsB,eAAT,CACLD,SADK,EAIoB;AAAA;;AACzB,MAAME,OAAOF,UAAUG,WAAV,IAAyBH,UAAUE,IAAhD;AACA;AAAA;AAAA;AAAA;;AAIE,oBAAYf,KAAZ,EAAsBiB,OAAtB,EAAoD;AAAA;;AAClD,UAAI,CAACA,QAAQxB,mBAAb,EAAkC;AAChC,YAAMyB,QAAQH,QAAQ,aAAtB;AACA,cAAM,IAAIV,KAAJ,WACDa,KADC,oFAAN;AAGD;;AANiD,iFAO5ClB,KAP4C,EAOrCiB,OAPqC;AAQnD;;AAZH;AAAA;AAAA,+BAcW;AAAA,4BAC4B,KAAKA,OADjC;AAAA,YACCrB,IADD,iBACCA,IADD;AAAA,YACOE,gBADP,iBACOA,gBADP;AAGP,YAAME,QAAQmB,OAAOC,MAAP,CAAc;AAAExB,oBAAF;AAAQE;AAAR,SAAd,EAA0C,KAAKE,KAA/C,CAAd;AAEA,eAAO,6BAAC,SAAD,EAAeA,KAAf,CAAP;AACD;AApBH;;AAAA;AAAA,IAAqBC,eAAMY,SAA3B,2CACwBrB,YADxB,0DAEgCuB,IAFhC;AAsBD","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["/**\n * NOTE: This file has been deprecated. See /Artsy/SystemContext for most\n * recent version.\n *\n * FIXME: Remove this file once things settle a bit.\n */\n\nimport { createEnvironment } from \"Artsy/Relay/createEnvironment\"\nimport PropTypes from \"prop-types\"\nimport React from \"react\"\nimport { Environment } from \"relay-runtime\"\n\n// TODO: Once this PR for `rest` https://github.com/Microsoft/TypeScript/pull/13470 lands\n// weâ€™ll be able to not make this optional and simply remove it from the props that a\n// component wrapped with the `ContextConsumer` HOC accepts.\n\n/**\n * The Artsy specific props injected by the higher-order component produced\n * by `ContextConsumer`.\n *\n * @see {@link ContextProvider}\n * @see {@link ContextConsumer}\n *\n */\nexport interface ContextProps {\n  /**\n   * The currently signed-in user.\n   *\n   * Unless explicitely set to `null`, this will default to use the `USER_ID`\n   * and `USER_ACCESS_TOKEN` environment variables if available.\n   */\n  user?: User | null\n\n  /**\n   * A configured environment object that can be used for any Relay operations\n   * that need an environment object.\n   *\n   * If none is provided to the `ContextProvider` then one is created, using\n   * the `user` if available.\n   */\n  relayEnvironment?: Environment\n}\n\ninterface PrivateContextProps extends ContextProps {\n  /**\n   * This prop solely exists to verify that a consumer is nested inside a provider.\n   */\n  _isNestedInProvider: boolean\n}\n\nconst ContextTypes: React.ValidationMap<PrivateContextProps> = {\n  _isNestedInProvider: PropTypes.bool,\n  user: PropTypes.object,\n  relayEnvironment: PropTypes.object,\n}\n\n/**\n * This component provides Artsy specific context props to components down the\n * tree. Components that wish to consume these props should be wrapped with the\n * `ContextConsumer` higher-order component.\n *\n * @see {@link ContextConsumer}\n */\nexport class ContextProvider extends React.Component<ContextProps>\n  implements React.ChildContextProvider<PrivateContextProps> {\n  static childContextTypes = ContextTypes\n\n  private user: User | null\n  private relayEnvironment: Environment\n\n  constructor(props: ContextProps & { children?: React.ReactNode }) {\n    if (React.Children.count(props.children) > 1) {\n      throw new Error(\"A ContextProvider expects a single child.\")\n    }\n    super(props)\n\n    if (props.user) {\n      this.user = props.user\n    } else if (props.user === undefined) {\n      const id = process.env.USER_ID\n      const accessToken = process.env.USER_ACCESS_TOKEN\n      if (id && accessToken) {\n        this.user = {\n          id,\n          accessToken,\n        }\n      }\n    }\n\n    this.relayEnvironment =\n      props.relayEnvironment || createEnvironment({ user: this.user })\n  }\n\n  getChildContext() {\n    return {\n      _isNestedInProvider: true,\n      user: this.user,\n      relayEnvironment: this.relayEnvironment,\n    }\n  }\n\n  render() {\n    return this.props.children\n  }\n}\n\n/**\n * Wraps a component in a higher-order component that injects the Artsy\n * specific context props into the given component. Wrapped components are\n * expected to be rendered in a tree that contains a `ContextProvider` component.\n *\n * The injected props are described in `ContextProps`.\n *\n * @see {@link ContextProvider}\n * @see {@link ContextProps}\n *\n * @param Component The component that needs Artsy specific context props.\n */\nexport function ContextConsumer<P>(\n  Component:\n    | React.ComponentClass<P & ContextProps>\n    | React.StatelessComponent<P & ContextProps>\n): React.ComponentClass<P> {\n  const name = Component.displayName || Component.name\n  return class extends React.Component<P, null> {\n    static contextTypes = ContextTypes\n    static displayName = `Artsy(${name})`\n\n    constructor(props: P, context: PrivateContextProps) {\n      if (!context._isNestedInProvider) {\n        const start = name || \"A component\"\n        throw new Error(\n          `${start}, which needs Artsy props, was not wrapped inside a ContextProvider component.`\n        )\n      }\n      super(props, context)\n    }\n\n    render() {\n      const { user, relayEnvironment } = this.context\n\n      const props = Object.assign({ user, relayEnvironment }, this.props)\n\n      return <Component {...props} />\n    }\n  }\n}\n"]}]}