{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Apps/Artwork/Components/ImageCarousel.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Apps/Artwork/Components/ImageCarousel.tsx","mtime":1530805636000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport Icon from \"../../../Components/Icon\";\nimport { Arrow } from \"../../../Styleguide/Elements/Arrow\";\nimport { Responsive } from \"../../../Utils/Responsive\";\nvar Container = styled.div.withConfig({\n  displayName: \"ImageCarousel__Container\",\n  componentId: \"s1ordqxh-0\"\n})([\"display:flex;flex-direction:column;\"]);\nvar Spacer = styled.div.withConfig({\n  displayName: \"ImageCarousel__Spacer\",\n  componentId: \"s1ordqxh-1\"\n})([\"display:flex;flex-grow:1;\"]);\nvar BaseImageArea = styled.div.attrs({}).withConfig({\n  displayName: \"ImageCarousel__BaseImageArea\",\n  componentId: \"s1ordqxh-2\"\n})([\"line-height:0;width:100%;display:flex;flex-direction:row;\"]);\nvar SmallImageArea = styled(BaseImageArea).withConfig({\n  displayName: \"ImageCarousel__SmallImageArea\",\n  componentId: \"s1ordqxh-3\"\n})([\"max-height:calc(100vh - 120px);height:calc(100vw / \", \");\"], function (_ref) {\n  var aspectRatio = _ref.aspectRatio;\n  return aspectRatio;\n});\nvar LargeImageArea = styled(BaseImageArea).withConfig({\n  displayName: \"ImageCarousel__LargeImageArea\",\n  componentId: \"s1ordqxh-4\"\n})([\"min-height:450px;height:calc(100vh - 160px);\"]);\nvar ImageContainer = styled.div.withConfig({\n  displayName: \"ImageCarousel__ImageContainer\",\n  componentId: \"s1ordqxh-5\"\n})([\"height:100%;width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;\"]);\nvar BaseImage = styled.img.withConfig({\n  displayName: \"ImageCarousel__BaseImage\",\n  componentId: \"s1ordqxh-6\"\n})([\"cursor:zoom-in;max-width:100%;\"]);\nvar SmallImage = styled(BaseImage).withConfig({\n  displayName: \"ImageCarousel__SmallImage\",\n  componentId: \"s1ordqxh-7\"\n})([\"max-height:calc(100vh - 120px);\"]);\nvar LargeImage = styled(BaseImage).withConfig({\n  displayName: \"ImageCarousel__LargeImage\",\n  componentId: \"s1ordqxh-8\"\n})([\"max-height:100%;\"]); // TODO: Should Icon have this styling by default?\n\nvar Button = styled.a.withConfig({\n  displayName: \"ImageCarousel__Button\",\n  componentId: \"s1ordqxh-9\"\n})([\"\", \"{vertical-align:middle;}\"], Icon\n/* sc-selector */\n);\nvar NavigationButtonContainer = styled.div.withConfig({\n  displayName: \"ImageCarousel__NavigationButtonContainer\",\n  componentId: \"s1ordqxh-10\"\n})([\"width:40px;display:flex;flex-direction:column;justify-content:center;\"]);\nvar PageIndicator = styled.span.withConfig({\n  displayName: \"ImageCarousel__PageIndicator\",\n  componentId: \"s1ordqxh-11\"\n})([\"&::after{content:\\\"\\u2022\\\";}color:\", \";\"], function (_ref2) {\n  var isHighlighted = _ref2.isHighlighted;\n  return isHighlighted ? \"#000\" : \"#d8d8d8\";\n});\nvar BaseControlsContainer = styled.div.withConfig({\n  displayName: \"ImageCarousel__BaseControlsContainer\",\n  componentId: \"s1ordqxh-12\"\n})([\"display:flex;justify-content:center;\"]);\nvar SmallControlsContainer = styled(BaseControlsContainer).withConfig({\n  displayName: \"ImageCarousel__SmallControlsContainer\",\n  componentId: \"s1ordqxh-13\"\n})([\"height:60px;flex-direction:row-reverse;\"]);\nvar LargeControlsContainer = styled(BaseControlsContainer).withConfig({\n  displayName: \"ImageCarousel__LargeControlsContainer\",\n  componentId: \"s1ordqxh-14\"\n})([\"height:80px;flex-direction:column;\"]);\n/**\n * Give items margin on both sides so they donâ€™t hug the side on small screens\n * when the controls are shown next to each other, but also are still centered\n * on larger screens when they are shown above each other.\n */\n\nvar ControlsContainerItem = styled.div.withConfig({\n  displayName: \"ImageCarousel__ControlsContainerItem\",\n  componentId: \"s1ordqxh-15\"\n})([\"margin-left:20px;margin-right:20px;display:flex;\"]);\nvar ActionButtons = styled(ControlsContainerItem).withConfig({\n  displayName: \"ImageCarousel__ActionButtons\",\n  componentId: \"s1ordqxh-16\"\n})([\"\"]);\nvar PageIndicatorsContainer = styled(ControlsContainerItem).withConfig({\n  displayName: \"ImageCarousel__PageIndicatorsContainer\",\n  componentId: \"s1ordqxh-17\"\n})([\"flex-direction:row;justify-content:center;align-items:center;\", \" + \", \"{margin-left:5px;}\"], PageIndicator, PageIndicator);\nvar ActionButtonsContainer = styled.div.withConfig({\n  displayName: \"ImageCarousel__ActionButtonsContainer\",\n  componentId: \"s1ordqxh-18\"\n})([\"display:flex;align-items:center;justify-content:center;\"]);\n\nvar PageIndicators = function PageIndicators(_ref3) {\n  var size = _ref3.size,\n      highlightIndex = _ref3.highlightIndex,\n      onSelect = _ref3.onSelect;\n  return React.createElement(PageIndicatorsContainer, null, _toConsumableArray(new Array(size)).map(function (_, i) {\n    return React.createElement(PageIndicator, {\n      key: i,\n      isHighlighted: i === highlightIndex,\n      onClick: function onClick() {\n        return onSelect(i);\n      }\n    });\n  }));\n};\n\nvar NavigationButton = function NavigationButton(_ref4) {\n  var direction = _ref4.direction,\n      onClick = _ref4.onClick;\n  return React.createElement(NavigationButtonContainer, null, React.createElement(Button, {\n    href: \"#\",\n    onClick: function (_onClick) {\n      function onClick(_x) {\n        return _onClick.apply(this, arguments);\n      }\n\n      onClick.toString = function () {\n        return _onClick.toString();\n      };\n\n      return onClick;\n    }(function (e) {\n      e.preventDefault();\n      onClick();\n    })\n  }, React.createElement(Arrow, {\n    direction: direction,\n    fontSize: \"24px\"\n  })));\n};\n\nexport var ImageCarousel =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ImageCarousel, _React$Component);\n\n  function ImageCarousel() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ImageCarousel);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ImageCarousel)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      currentImage: 0\n    });\n\n    return _this;\n  }\n\n  _createClass(ImageCarousel, [{\n    key: \"changeCurrentImage\",\n    value: function changeCurrentImage(by) {\n      this.setState({\n        currentImage: (this.state.currentImage + by) % this.props.images.length\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Responsive, null, function (_ref5) {\n        var xs = _ref5.xs;\n        var hasMultipleImages = _this2.props.images.length > 1;\n        var showNavigation = !xs && hasMultipleImages;\n        var image = _this2.props.images[_this2.state.currentImage];\n        var Image = xs ? SmallImage : LargeImage;\n        var ImageArea = xs ? SmallImageArea : LargeImageArea;\n        var ControlsContainer = showNavigation ? LargeControlsContainer : SmallControlsContainer;\n        return React.createElement(Container, null, React.createElement(ImageArea, {\n          aspectRatio: image.aspectRatio\n        }, showNavigation && React.createElement(NavigationButton, {\n          direction: \"left\",\n          onClick: _this2.changeCurrentImage.bind(_this2, -1)\n        }), React.createElement(ImageContainer, null, React.createElement(Image, {\n          src: image.uri // tslint:disable-next-line:no-console\n          ,\n          onClick: function onClick() {\n            return console.log(\"Zoom\");\n          }\n        })), showNavigation && React.createElement(NavigationButton, {\n          direction: \"right\",\n          onClick: _this2.changeCurrentImage.bind(_this2, +1)\n        })), React.createElement(ControlsContainer, null, hasMultipleImages && React.createElement(PageIndicators, {\n          size: _this2.props.images.length,\n          highlightIndex: _this2.state.currentImage,\n          onSelect: function onSelect(i) {\n            return _this2.setState({\n              currentImage: i\n            });\n          }\n        }), xs && React.createElement(Spacer, null), React.createElement(ActionButtonsContainer, null, React.createElement(ActionButtons, null, React.createElement(Button, {\n          href: \"#TODO\"\n        }, React.createElement(Icon, {\n          name: \"heart\",\n          color: \"black\"\n        })), React.createElement(Button, {\n          href: \"#TODO\"\n        }, React.createElement(Icon, {\n          name: \"share\",\n          color: \"black\"\n        }))))));\n      });\n    }\n  }]);\n\n  return ImageCarousel;\n}(React.Component);",{"version":3,"sources":["/Users/eve/development/reaction/src/Apps/Artwork/Components/ImageCarousel.tsx"],"names":["React","styled","Icon","Arrow","Responsive","Container","div","Spacer","BaseImageArea","attrs","SmallImageArea","aspectRatio","LargeImageArea","ImageContainer","BaseImage","img","SmallImage","LargeImage","Button","a","NavigationButtonContainer","PageIndicator","span","isHighlighted","BaseControlsContainer","SmallControlsContainer","LargeControlsContainer","ControlsContainerItem","ActionButtons","PageIndicatorsContainer","ActionButtonsContainer","PageIndicators","size","highlightIndex","onSelect","Array","map","_","i","NavigationButton","direction","onClick","e","preventDefault","ImageCarousel","currentImage","by","setState","state","props","images","length","xs","hasMultipleImages","showNavigation","image","Image","ImageArea","ControlsContainer","changeCurrentImage","bind","uri","console","log","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport styled from \"styled-components\"\n\nimport Icon from \"Components/Icon\"\nimport { Arrow } from \"Styleguide/Elements/Arrow\"\nimport { Responsive } from \"Utils/Responsive\"\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst Spacer = styled.div`\n  display: flex;\n  flex-grow: 1;\n`\n\nconst BaseImageArea = styled.div.attrs<{ aspectRatio: number }>({})`\n  line-height: 0; /* Donâ€™t introduce visual margins */\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n`\n\nconst SmallImageArea = styled(BaseImageArea)`\n  max-height: calc(100vh - 120px);\n\n  /**\n   * This will make sure the image area already exists prior to image loading\n   * and the layout wonâ€™t jump later on, but it does rely on the current design\n   * where this image is supposed to be shown from the left side of the screen\n   * to the right side of the screen, i.e. the width of the viewport.\n   */\n  height: calc(100vw / ${({ aspectRatio }) => aspectRatio});\n`\n\nconst LargeImageArea = styled(BaseImageArea)`\n  min-height: 450px;\n  height: calc(100vh - 160px);\n`\n\nconst ImageContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n`\n\nconst BaseImage = styled.img`\n  cursor: zoom-in;\n  max-width: 100%;\n`\n\nconst SmallImage = styled(BaseImage)`\n  max-height: calc(100vh - 120px);\n`\n\nconst LargeImage = styled(BaseImage)`\n  max-height: 100%;\n`\n\n// TODO: Should Icon have this styling by default?\nconst Button = styled.a`\n  ${Icon /* sc-selector */} {\n    vertical-align: middle;\n  }\n`\n\nconst NavigationButtonContainer = styled.div`\n  width: 40px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`\n\nconst PageIndicator = styled.span`\n  &::after {\n    content: \"â€¢\";\n  }\n\n  color: ${({ isHighlighted }: { isHighlighted: boolean }) =>\n    isHighlighted ? \"#000\" : \"#d8d8d8\"};\n`\n\nconst BaseControlsContainer = styled.div`\n  display: flex;\n  justify-content: center;\n`\n\nconst SmallControlsContainer = styled(BaseControlsContainer)`\n  height: 60px;\n  flex-direction: row-reverse;\n`\n\nconst LargeControlsContainer = styled(BaseControlsContainer)`\n  height: 80px;\n  flex-direction: column;\n`\n\n/**\n * Give items margin on both sides so they donâ€™t hug the side on small screens\n * when the controls are shown next to each other, but also are still centered\n * on larger screens when they are shown above each other.\n */\nconst ControlsContainerItem = styled.div`\n  margin-left: 20px;\n  margin-right: 20px;\n  display: flex;\n`\n\nconst ActionButtons = styled(ControlsContainerItem)``\n\nconst PageIndicatorsContainer = styled(ControlsContainerItem)`\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  ${PageIndicator} + ${PageIndicator} {\n    margin-left: 5px;\n  }\n`\n\nconst ActionButtonsContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\ninterface ImageCarouselProps {\n  images: Array<{ uri: string; aspectRatio: number }>\n}\n\ninterface ImageCarouselState {\n  currentImage: number\n}\n\nconst PageIndicators: React.SFC<{\n  size: number\n  highlightIndex: number\n  onSelect: (index: number) => void\n}> = ({ size, highlightIndex, onSelect }) => (\n  <PageIndicatorsContainer>\n    {[...new Array(size)].map((_, i) => (\n      <PageIndicator\n        key={i}\n        isHighlighted={i === highlightIndex}\n        onClick={() => onSelect(i)}\n      />\n    ))}\n  </PageIndicatorsContainer>\n)\n\nconst NavigationButton: React.SFC<{\n  direction: \"left\" | \"right\"\n  onClick: () => void\n}> = ({ direction, onClick }) => (\n  <NavigationButtonContainer>\n    <Button\n      href=\"#\"\n      onClick={e => {\n        e.preventDefault()\n        onClick()\n      }}\n    >\n      <Arrow direction={direction} fontSize=\"24px\" />\n    </Button>\n  </NavigationButtonContainer>\n)\n\nexport class ImageCarousel extends React.Component<\n  ImageCarouselProps,\n  ImageCarouselState\n> {\n  state = {\n    currentImage: 0,\n  }\n\n  changeCurrentImage(by: number) {\n    this.setState({\n      currentImage: (this.state.currentImage + by) % this.props.images.length,\n    })\n  }\n\n  render() {\n    return (\n      <Responsive>\n        {({ xs }) => {\n          const hasMultipleImages = this.props.images.length > 1\n          const showNavigation = !xs && hasMultipleImages\n\n          const image = this.props.images[this.state.currentImage]\n\n          const Image = xs ? SmallImage : LargeImage\n          const ImageArea = xs ? SmallImageArea : LargeImageArea\n          const ControlsContainer = showNavigation\n            ? LargeControlsContainer\n            : SmallControlsContainer\n\n          return (\n            <Container>\n              <ImageArea aspectRatio={image.aspectRatio}>\n                {showNavigation && (\n                  <NavigationButton\n                    direction=\"left\"\n                    onClick={this.changeCurrentImage.bind(this, -1)}\n                  />\n                )}\n                <ImageContainer>\n                  <Image\n                    src={image.uri}\n                    // tslint:disable-next-line:no-console\n                    onClick={() => console.log(\"Zoom\")}\n                  />\n                </ImageContainer>\n                {showNavigation && (\n                  <NavigationButton\n                    direction=\"right\"\n                    onClick={this.changeCurrentImage.bind(this, +1)}\n                  />\n                )}\n              </ImageArea>\n              <ControlsContainer>\n                {hasMultipleImages && (\n                  <PageIndicators\n                    size={this.props.images.length}\n                    highlightIndex={this.state.currentImage}\n                    onSelect={i => this.setState({ currentImage: i })}\n                  />\n                )}\n                {xs && <Spacer />}\n                <ActionButtonsContainer>\n                  <ActionButtons>\n                    <Button href=\"#TODO\">\n                      <Icon name=\"heart\" color=\"black\" />\n                    </Button>\n                    <Button href=\"#TODO\">\n                      <Icon name=\"share\" color=\"black\" />\n                    </Button>\n                  </ActionButtons>\n                </ActionButtonsContainer>\n              </ControlsContainer>\n            </Container>\n          )\n        }}\n      </Responsive>\n    )\n  }\n}\n"]}]}