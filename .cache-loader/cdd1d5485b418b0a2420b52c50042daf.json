{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Styleguide/Components/MarketInsights.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Styleguide/Components/MarketInsights.tsx","mtime":1538070271000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { BorderBox, Box, Flex, Sans } from \"@artsy/palette\";\nimport { hasSections, highestCategory } from \"../../Components/Artist/MarketInsights/MarketInsights\";\nimport React from \"react\";\nimport { createFragmentContainer, graphql } from \"react-relay\";\nimport { Responsive } from \"../../Utils/Responsive\";\n\nvar wrapper = function wrapper(xs) {\n  return function (props) {\n    return xs ? React.createElement(Flex, _extends({\n      flexDirection: \"column\",\n      mb: 1\n    }, props)) : React.createElement(Box, props);\n  };\n};\n\nvar CATEGORIES = {\n  \"blue-chip\": \"Blue chip\",\n  \"top-established\": \"Established\",\n  \"top-emerging\": \"Emerging\"\n};\nvar CATEGORY_LABEL_MAP = {\n  \"blue-chip\": \"Represented by internationally recognized galleries.\",\n  \"top-established\": \"Represented by industry leading galleries.\",\n  \"top-emerging\": \"Represented by up-and-coming galleries.\"\n};\nexport var MarketInsights =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MarketInsights, _React$Component);\n\n  function MarketInsights() {\n    _classCallCheck(this, MarketInsights);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MarketInsights).apply(this, arguments));\n  }\n\n  _createClass(MarketInsights, [{\n    key: \"renderAuctionHighlight\",\n    value: function renderAuctionHighlight(xs) {\n      var TextWrap = wrapper(xs);\n\n      if (!this.props.artist.auctionResults || this.props.artist.auctionResults.edges.length < 1) {\n        return null;\n      }\n\n      var topAuctionResult = this.props.artist.auctionResults.edges[0].node;\n      var display = \"\".concat(topAuctionResult.price_realized.display, \", \").concat(topAuctionResult.organization, \", \").concat(topAuctionResult.sale_date);\n      return React.createElement(TextWrap, null, React.createElement(Sans, {\n        size: \"2\",\n        weight: \"medium\",\n        display: \"inline\",\n        mr: 1\n      }, \"High auction record\"), React.createElement(Sans, {\n        size: \"2\",\n        display: \"inline\",\n        color: \"black60\"\n      }, display));\n    }\n  }, {\n    key: \"renderGalleryRepresentation\",\n    value: function renderGalleryRepresentation(xs) {\n      var TextWrap = wrapper(xs);\n      var highlights = this.props.artist.highlights;\n      var partners = highlights.partners;\n\n      if (partners && partners.edges && partners.edges.length > 0) {\n        var highCategory = highestCategory(partners.edges);\n        return React.createElement(TextWrap, null, React.createElement(Sans, {\n          size: \"2\",\n          weight: \"medium\",\n          display: \"inline\",\n          mr: 1\n        }, CATEGORIES[highCategory]), React.createElement(Sans, {\n          size: \"2\",\n          display: \"inline\",\n          color: \"black60\"\n        }, CATEGORY_LABEL_MAP[highCategory]));\n      }\n    }\n  }, {\n    key: \"renderPermanentCollection\",\n    value: function renderPermanentCollection(xs) {\n      var TextWrap = wrapper(xs);\n      var collections = this.props.artist.collections;\n\n      if (!collections || collections.length === 0) {\n        return null;\n      }\n\n      var label = collections.length === 1 ? \"Collected by a major museum\" : \"Collected by major museums\";\n      return React.createElement(TextWrap, null, React.createElement(Sans, {\n        size: \"2\",\n        weight: \"medium\",\n        display: \"inline\",\n        mr: 1\n      }, label), React.createElement(Sans, {\n        size: \"2\",\n        display: \"inline\",\n        color: \"black60\"\n      }, collections.join(\", \")));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      if (!hasSections(this.props.artist)) {\n        return null;\n      }\n\n      var Container = this.props.border ? BorderBox : Box;\n      return React.createElement(React.Fragment, null, React.createElement(Container, {\n        flexDirection: \"column\"\n      }, React.createElement(Responsive, null, function (_ref) {\n        var xs = _ref.xs;\n        return React.createElement(\"div\", null, _this.renderAuctionHighlight(xs), _this.renderGalleryRepresentation(xs), _this.renderPermanentCollection(xs));\n      })), this.props.children);\n    }\n  }]);\n\n  return MarketInsights;\n}(React.Component);\n\n_defineProperty(MarketInsights, \"defaultProps\", {\n  border: true\n});\n\nexport var MarketInsightsFragmentContainer = createFragmentContainer(MarketInsights, {\n  artist: function artist() {\n    var node = require(\"../../__generated__/MarketInsightsArtistPage_artist.graphql\");\n\n    if (node.hash && node.hash !== \"657224f227fe913f33f33f45e7872555\") {\n      console.error(\"The definition of 'MarketInsightsArtistPage_artist' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../__generated__/MarketInsightsArtistPage_artist.graphql\");\n  }\n});",{"version":3,"sources":["/Users/eve/development/reaction/src/Styleguide/Components/MarketInsights.tsx"],"names":["BorderBox","Box","Flex","Sans","hasSections","highestCategory","React","createFragmentContainer","graphql","Responsive","wrapper","xs","props","CATEGORIES","CATEGORY_LABEL_MAP","MarketInsights","TextWrap","artist","auctionResults","edges","length","topAuctionResult","node","display","price_realized","organization","sale_date","highlights","partners","highCategory","collections","label","join","Container","border","renderAuctionHighlight","renderGalleryRepresentation","renderPermanentCollection","children","Component","MarketInsightsFragmentContainer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+BC,IAA/B,QAA2C,gBAA3C;AAEA,SACEC,WADF,EAEEC,eAFF;AAIA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,uBAAT,EAAkCC,OAAlC,QAAiD,aAAjD;AACA,SAASC,UAAT;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAC,EAAE;AAAA,SAAI,UAAAC,KAAK;AAAA,WACzBD,EAAE,GAAG,oBAAC,IAAD;AAAM,MAAA,aAAa,EAAC,QAApB;AAA6B,MAAA,EAAE,EAAE;AAAjC,OAAwCC,KAAxC,EAAH,GAAuD,oBAAC,GAAD,EAASA,KAAT,CADhC;AAAA,GAAT;AAAA,CAAlB;;AAQA,IAAMC,UAAU,GAAG;AACjB,eAAa,WADI;AAEjB,qBAAmB,aAFF;AAGjB,kBAAgB;AAHC,CAAnB;AAKA,IAAMC,kBAAkB,GAAG;AACzB,eAAa,sDADY;AAEzB,qBAAmB,4CAFM;AAGzB,kBAAgB;AAHS,CAA3B;AAMA,WAAaC,cAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,2CAKyBJ,EALzB,EAKsC;AAClC,UAAMK,QAAQ,GAAGN,OAAO,CAACC,EAAD,CAAxB;;AACA,UACE,CAAC,KAAKC,KAAL,CAAWK,MAAX,CAAkBC,cAAnB,IACA,KAAKN,KAAL,CAAWK,MAAX,CAAkBC,cAAlB,CAAiCC,KAAjC,CAAuCC,MAAvC,GAAgD,CAFlD,EAGE;AACA,eAAO,IAAP;AACD;;AACD,UAAMC,gBAAgB,GAAG,KAAKT,KAAL,CAAWK,MAAX,CAAkBC,cAAlB,CAAiCC,KAAjC,CAAuC,CAAvC,EAA0CG,IAAnE;AACA,UAAMC,OAAO,aAAMF,gBAAgB,CAACG,cAAjB,CAAgCD,OAAtC,eACXF,gBAAgB,CAACI,YADN,eAERJ,gBAAgB,CAACK,SAFT,CAAb;AAGA,aACE,oBAAC,QAAD,QACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,GAAX;AAAe,QAAA,MAAM,EAAC,QAAtB;AAA+B,QAAA,OAAO,EAAC,QAAvC;AAAgD,QAAA,EAAE,EAAE;AAApD,+BADF,EAIE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,GAAX;AAAe,QAAA,OAAO,EAAC,QAAvB;AAAgC,QAAA,KAAK,EAAC;AAAtC,SACGH,OADH,CAJF,CADF;AAUD;AA3BH;AAAA;AAAA,gDA4B8BZ,EA5B9B,EA4B2C;AACvC,UAAMK,QAAQ,GAAGN,OAAO,CAACC,EAAD,CAAxB;AADuC,UAE/BgB,UAF+B,GAEhB,KAAKf,KAAL,CAAWK,MAFK,CAE/BU,UAF+B;AAAA,UAG/BC,QAH+B,GAGlBD,UAHkB,CAG/BC,QAH+B;;AAIvC,UAAIA,QAAQ,IAAIA,QAAQ,CAACT,KAArB,IAA8BS,QAAQ,CAACT,KAAT,CAAeC,MAAf,GAAwB,CAA1D,EAA6D;AAC3D,YAAMS,YAAY,GAAGxB,eAAe,CAACuB,QAAQ,CAACT,KAAV,CAApC;AACA,eACE,oBAAC,QAAD,QACE,oBAAC,IAAD;AAAM,UAAA,IAAI,EAAC,GAAX;AAAe,UAAA,MAAM,EAAC,QAAtB;AAA+B,UAAA,OAAO,EAAC,QAAvC;AAAgD,UAAA,EAAE,EAAE;AAApD,WACGN,UAAU,CAACgB,YAAD,CADb,CADF,EAIE,oBAAC,IAAD;AAAM,UAAA,IAAI,EAAC,GAAX;AAAe,UAAA,OAAO,EAAC,QAAvB;AAAgC,UAAA,KAAK,EAAC;AAAtC,WACGf,kBAAkB,CAACe,YAAD,CADrB,CAJF,CADF;AAUD;AACF;AA7CH;AAAA;AAAA,8CA8C4BlB,EA9C5B,EA8CyC;AACrC,UAAMK,QAAQ,GAAGN,OAAO,CAACC,EAAD,CAAxB;AADqC,UAE7BmB,WAF6B,GAEb,KAAKlB,KAAL,CAAWK,MAFE,CAE7Ba,WAF6B;;AAGrC,UAAI,CAACA,WAAD,IAAgBA,WAAW,CAACV,MAAZ,KAAuB,CAA3C,EAA8C;AAC5C,eAAO,IAAP;AACD;;AACD,UAAMW,KAAK,GACTD,WAAW,CAACV,MAAZ,KAAuB,CAAvB,GACI,6BADJ,GAEI,4BAHN;AAIA,aACE,oBAAC,QAAD,QACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,GAAX;AAAe,QAAA,MAAM,EAAC,QAAtB;AAA+B,QAAA,OAAO,EAAC,QAAvC;AAAgD,QAAA,EAAE,EAAE;AAApD,SACGW,KADH,CADF,EAIE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,GAAX;AAAe,QAAA,OAAO,EAAC,QAAvB;AAAgC,QAAA,KAAK,EAAC;AAAtC,SACGD,WAAW,CAACE,IAAZ,CAAiB,IAAjB,CADH,CAJF,CADF;AAUD;AAlEH;AAAA;AAAA,6BAoEW;AAAA;;AACP,UAAI,CAAC5B,WAAW,CAAC,KAAKQ,KAAL,CAAWK,MAAZ,CAAhB,EAAqC;AACnC,eAAO,IAAP;AACD;;AAED,UAAMgB,SAAS,GAAG,KAAKrB,KAAL,CAAWsB,MAAX,GAAoBlC,SAApB,GAAgCC,GAAlD;AAEA,aACE,0CACE,oBAAC,SAAD;AAAW,QAAA,aAAa,EAAC;AAAzB,SACE,oBAAC,UAAD,QACG,gBAAY;AAAA,YAATU,EAAS,QAATA,EAAS;AACX,eACE,iCACG,KAAI,CAACwB,sBAAL,CAA4BxB,EAA5B,CADH,EAEG,KAAI,CAACyB,2BAAL,CAAiCzB,EAAjC,CAFH,EAGG,KAAI,CAAC0B,yBAAL,CAA+B1B,EAA/B,CAHH,CADF;AAOD,OATH,CADF,CADF,EAeG,KAAKC,KAAL,CAAW0B,QAfd,CADF;AAmBD;AA9FH;;AAAA;AAAA,EAAoChC,KAAK,CAACiC,SAA1C;;gBAAaxB,c,kBACW;AACpBmB,EAAAA,MAAM,EAAE;AADY,C;;AAgGxB,OAAO,IAAMM,+BAA+B,GAAGjC,uBAAuB,CACpEQ,cADoE;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,EAA/D","sourcesContent":["import { BorderBox, Box, Flex, Sans } from \"@artsy/palette\"\nimport { MarketInsightsArtistPage_artist } from \"__generated__/MarketInsightsArtistPage_artist.graphql\"\nimport {\n  hasSections,\n  highestCategory,\n} from \"Components/Artist/MarketInsights/MarketInsights\"\nimport React from \"react\"\nimport { createFragmentContainer, graphql } from \"react-relay\"\nimport { Responsive } from \"Utils/Responsive\"\n\nconst wrapper = xs => props =>\n  xs ? <Flex flexDirection=\"column\" mb={1} {...props} /> : <Box {...props} />\n\nexport interface MarketInsightsProps {\n  artist: MarketInsightsArtistPage_artist\n  border?: boolean\n}\n\nconst CATEGORIES = {\n  \"blue-chip\": \"Blue chip\",\n  \"top-established\": \"Established\",\n  \"top-emerging\": \"Emerging\",\n}\nconst CATEGORY_LABEL_MAP = {\n  \"blue-chip\": \"Represented by internationally recognized galleries.\",\n  \"top-established\": \"Represented by industry leading galleries.\",\n  \"top-emerging\": \"Represented by up-and-coming galleries.\",\n}\n\nexport class MarketInsights extends React.Component<MarketInsightsProps> {\n  static defaultProps = {\n    border: true,\n  }\n\n  renderAuctionHighlight(xs: boolean) {\n    const TextWrap = wrapper(xs)\n    if (\n      !this.props.artist.auctionResults ||\n      this.props.artist.auctionResults.edges.length < 1\n    ) {\n      return null\n    }\n    const topAuctionResult = this.props.artist.auctionResults.edges[0].node\n    const display = `${topAuctionResult.price_realized.display}, ${\n      topAuctionResult.organization\n    }, ${topAuctionResult.sale_date}`\n    return (\n      <TextWrap>\n        <Sans size=\"2\" weight=\"medium\" display=\"inline\" mr={1}>\n          High auction record\n        </Sans>\n        <Sans size=\"2\" display=\"inline\" color=\"black60\">\n          {display}\n        </Sans>\n      </TextWrap>\n    )\n  }\n  renderGalleryRepresentation(xs: boolean) {\n    const TextWrap = wrapper(xs)\n    const { highlights } = this.props.artist\n    const { partners } = highlights\n    if (partners && partners.edges && partners.edges.length > 0) {\n      const highCategory = highestCategory(partners.edges)\n      return (\n        <TextWrap>\n          <Sans size=\"2\" weight=\"medium\" display=\"inline\" mr={1}>\n            {CATEGORIES[highCategory]}\n          </Sans>\n          <Sans size=\"2\" display=\"inline\" color=\"black60\">\n            {CATEGORY_LABEL_MAP[highCategory]}\n          </Sans>\n        </TextWrap>\n      )\n    }\n  }\n  renderPermanentCollection(xs: boolean) {\n    const TextWrap = wrapper(xs)\n    const { collections } = this.props.artist\n    if (!collections || collections.length === 0) {\n      return null\n    }\n    const label =\n      collections.length === 1\n        ? \"Collected by a major museum\"\n        : \"Collected by major museums\"\n    return (\n      <TextWrap>\n        <Sans size=\"2\" weight=\"medium\" display=\"inline\" mr={1}>\n          {label}\n        </Sans>\n        <Sans size=\"2\" display=\"inline\" color=\"black60\">\n          {collections.join(\", \")}\n        </Sans>\n      </TextWrap>\n    )\n  }\n\n  render() {\n    if (!hasSections(this.props.artist)) {\n      return null\n    }\n\n    const Container = this.props.border ? BorderBox : Box\n\n    return (\n      <>\n        <Container flexDirection=\"column\">\n          <Responsive>\n            {({ xs }) => {\n              return (\n                <div>\n                  {this.renderAuctionHighlight(xs)}\n                  {this.renderGalleryRepresentation(xs)}\n                  {this.renderPermanentCollection(xs)}\n                </div>\n              )\n            }}\n          </Responsive>\n        </Container>\n\n        {this.props.children}\n      </>\n    )\n  }\n}\n\nexport const MarketInsightsFragmentContainer = createFragmentContainer(\n  MarketInsights,\n  graphql`\n    fragment MarketInsightsArtistPage_artist on Artist\n      @argumentDefinitions(\n        partner_category: {\n          type: \"[String]\"\n          defaultValue: [\"blue-chip\", \"top-established\", \"top-emerging\"]\n        }\n      ) {\n      _id\n      collections\n      highlights {\n        partners(\n          first: 10\n          display_on_partner_profile: true\n          represented_by: true\n          partner_category: $partner_category\n        ) {\n          edges {\n            node {\n              categories {\n                id\n              }\n            }\n          }\n        }\n      }\n      auctionResults(\n        recordsTrusted: true\n        first: 1\n        sort: PRICE_AND_DATE_DESC\n      ) {\n        edges {\n          node {\n            price_realized {\n              display(format: \"0a\")\n            }\n            organization\n            sale_date(format: \"YYYY\")\n          }\n        }\n      }\n    }\n  `\n)\n"]}]}