{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Publishing/Email/EmailPanel.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Email/EmailPanel.tsx","mtime":1537112679000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var _dec, _class;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { avantgarde, unica } from \"../../../Assets/Fonts\";\nimport React from \"react\";\nimport track from \"react-tracking\";\nimport styled from \"styled-components\";\nimport request from \"superagent\";\nimport Colors from \"../../../Assets/Colors\";\nimport Events from \"../../../Utils/Events\";\nimport InvertedButton from \"../../Buttons/Inverted\";\nimport { borderedInput } from \"../../Mixins\";\nimport { EMAIL_REGEX } from \"../Constants\";\nexport var EmailPanel = (_dec = track({\n  page: \"Article\"\n}, {\n  dispatch: function dispatch(data) {\n    return Events.postEvent(data);\n  }\n}), _dec(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EmailPanel, _React$Component);\n\n  function EmailPanel() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EmailPanel);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EmailPanel)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      value: \"\",\n      error: false,\n      submitted: false,\n      disabled: false,\n      message: \"\"\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onClick\", function () {\n      _this.setState({\n        disabled: true\n      });\n\n      if (_this.state.value.match(EMAIL_REGEX)) {\n        request.post(_this.props.signupUrl).send({\n          email: _this.state.value\n        }).set(\"accept\", \"json\").end(function (err, res) {\n          if (err) {\n            _this.flashMessage(\"Error. Please try again\", true, false);\n          } else {\n            _this.flashMessage(\"Thank you!\", false, true);\n\n            _this.props.tracking.trackEvent({\n              action: \"Sign up for editorial email\",\n              context_type: \"article_fixed\"\n            });\n          }\n        });\n      } else {\n        _this.flashMessage(\"Invalid Email... Please try again\", true, false);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"flashMessage\", function (message, error, submitted) {\n      _this.setState({\n        message: message,\n        error: error\n      });\n\n      setTimeout(function () {\n        _this.setState({\n          message: \"\",\n          disabled: false,\n          error: false,\n          submitted: submitted\n        });\n      }, 2000);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onInputChange\", function (e) {\n      _this.setState({\n        value: e.target.value,\n        error: null\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(EmailPanel, [{\n    key: \"render\",\n    value: function render() {\n      if (this.state.submitted) {\n        return React.createElement(\"div\", null);\n      } else {\n        return React.createElement(EmailPanelContainer, null, React.createElement(Title, null, \"Stay up to date with Artsy Editorial\"), React.createElement(Form, null, React.createElement(Input, {\n          type: \"email\",\n          placeholder: \"Enter Your Email...\",\n          onChange: this.onInputChange,\n          value: this.state.message || this.state.value,\n          readOnly: this.state.message.length > 0,\n          isError: this.state.error,\n          isReadOnly: this.state.message.length > 0\n        }), React.createElement(StyledButton, {\n          disabled: this.state.disabled,\n          onClick: this.onClick\n        }, \"Subscribe\")));\n      }\n    }\n  }]);\n\n  return EmailPanel;\n}(React.Component)) || _class);\nvar Input = styled.input.withConfig({\n  displayName: \"EmailPanel__Input\",\n  componentId: \"eeizmd-0\"\n})([\"width:100%;border-width:1px;color:\", \";\", \";\", \";\"], function (props) {\n  return props.isError ? Colors.redMedium : \"black\";\n}, function (props) {\n  return props.isReadOnly ? unica(\"s16\") : \"\";\n}, borderedInput);\nvar EmailPanelContainer = styled.div.withConfig({\n  displayName: \"EmailPanel__EmailPanelContainer\",\n  componentId: \"eeizmd-1\"\n})([\"display:flex;flex-direction:column;max-width:350px;width:100%;\"]);\nvar Title = styled.div.withConfig({\n  displayName: \"EmailPanel__Title\",\n  componentId: \"eeizmd-2\"\n})([\"\", \";margin-bottom:10px;\"], unica(\"s16\", \"medium\"));\nvar StyledButton = styled(InvertedButton).withConfig({\n  displayName: \"EmailPanel__StyledButton\",\n  componentId: \"eeizmd-3\"\n})([\"border-radius:2px;height:30px;width:80px;margin-left:-100px;\", \";\"], avantgarde(\"s11\"));\nvar Form = styled.div.withConfig({\n  displayName: \"EmailPanel__Form\",\n  componentId: \"eeizmd-4\"\n})([\"display:flex;\"]);",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Publishing/Email/EmailPanel.tsx"],"names":["avantgarde","unica","React","track","styled","request","Colors","Events","InvertedButton","borderedInput","EMAIL_REGEX","EmailPanel","page","dispatch","data","postEvent","value","error","submitted","disabled","message","setState","state","match","post","props","signupUrl","send","email","set","end","err","res","flashMessage","tracking","trackEvent","action","context_type","setTimeout","e","target","onInputChange","length","onClick","Component","Input","input","isError","redMedium","isReadOnly","EmailPanelContainer","div","Title","StyledButton","Form"],"mappings":"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","sourcesContent":["import { avantgarde, unica } from \"Assets/Fonts\"\nimport React from \"react\"\nimport track from \"react-tracking\"\nimport styled from \"styled-components\"\nimport request from \"superagent\"\nimport Colors from \"../../../Assets/Colors\"\nimport Events from \"../../../Utils/Events\"\nimport InvertedButton from \"../../Buttons/Inverted\"\nimport { borderedInput } from \"../../Mixins\"\nimport { EMAIL_REGEX } from \"../Constants\"\n\ninterface EmailPanelProps {\n  signupUrl: string\n  tracking?: any\n}\n\ninterface EmailPanelState {\n  value: string\n  error: boolean\n  submitted: boolean\n  disabled: boolean\n  message: string\n}\n\ninterface InputProps extends React.HTMLProps<HTMLInputElement> {\n  isError: boolean\n  isReadOnly: boolean\n}\n\n@track(\n  { page: \"Article\" },\n  {\n    dispatch: data => Events.postEvent(data),\n  }\n)\nexport class EmailPanel extends React.Component<\n  EmailPanelProps,\n  EmailPanelState\n> {\n  state = {\n    value: \"\",\n    error: false,\n    submitted: false,\n    disabled: false,\n    message: \"\",\n  }\n\n  onClick = () => {\n    this.setState({ disabled: true })\n    if (this.state.value.match(EMAIL_REGEX)) {\n      request\n        .post(this.props.signupUrl)\n        .send({ email: this.state.value })\n        .set(\"accept\", \"json\")\n        .end((err, res) => {\n          if (err) {\n            this.flashMessage(\"Error. Please try again\", true, false)\n          } else {\n            this.flashMessage(\"Thank you!\", false, true)\n            this.props.tracking.trackEvent({\n              action: \"Sign up for editorial email\",\n              context_type: \"article_fixed\",\n            })\n          }\n        })\n    } else {\n      this.flashMessage(\"Invalid Email... Please try again\", true, false)\n    }\n  }\n\n  flashMessage = (message, error, submitted) => {\n    this.setState({ message, error })\n    setTimeout(() => {\n      this.setState({ message: \"\", disabled: false, error: false, submitted })\n    }, 2000)\n  }\n\n  onInputChange = e => {\n    this.setState({ value: e.target.value, error: null })\n  }\n\n  render() {\n    if (this.state.submitted) {\n      return <div />\n    } else {\n      return (\n        <EmailPanelContainer>\n          <Title>Stay up to date with Artsy Editorial</Title>\n          <Form>\n            <Input\n              type=\"email\"\n              placeholder=\"Enter Your Email...\"\n              onChange={this.onInputChange}\n              value={this.state.message || this.state.value}\n              readOnly={this.state.message.length > 0}\n              isError={this.state.error}\n              isReadOnly={this.state.message.length > 0}\n            />\n            <StyledButton disabled={this.state.disabled} onClick={this.onClick}>\n              Subscribe\n            </StyledButton>\n          </Form>\n        </EmailPanelContainer>\n      )\n    }\n  }\n}\n\nconst Input = styled.input`\n  width: 100%;\n  border-width: 1px;\n  color: ${(props: InputProps) => (props.isError ? Colors.redMedium : \"black\")};\n  ${(props: InputProps) => (props.isReadOnly ? unica(\"s16\") : \"\")};\n  ${borderedInput};\n`\nconst EmailPanelContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-width: 350px;\n  width: 100%;\n`\nconst Title = styled.div`\n  ${unica(\"s16\", \"medium\")};\n  margin-bottom: 10px;\n`\nconst StyledButton = styled(InvertedButton)`\n  border-radius: 2px;\n  height: 30px;\n  width: 80px;\n  margin-left: -100px;\n  ${avantgarde(\"s11\")};\n`\nconst Form = styled.div`\n  display: flex;\n`\n"]}]}