{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/index.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/index.tsx","mtime":1527877289000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1527877289000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DisplayCanvas = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactWaypoint = _interopRequireDefault(require(\"react-waypoint\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Colors = _interopRequireDefault(require(\"../../../../Assets/Colors\"));\n\nvar _track = require(\"../../../../Utils/track\");\n\nvar _Helpers = require(\"../../../Helpers\");\n\nvar _Fonts = require(\"../../../../Assets/Fonts\");\n\nvar _ErrorBoundary = require(\"../../../ErrorBoundary\");\n\nvar _trackOnce = require(\"../track-once\");\n\nvar _CanvasContainer = require(\"./CanvasContainer\");\n\nvar _ExternalTrackers = require(\"../ExternalTrackers\");\n\nvar _Constants = require(\"../../Constants\");\n\nvar _dec, _dec2, _dec3, _class, _class2;\n\nvar _templateObject = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  max-width: \", \"\\n  margin: 0 auto;\\n  margin-bottom: -44px; // Offset default force margin; FIXME: This kind of stuff needs to be globally addressed\\n  box-sizing: border-box;\\n  a {\\n    text-decoration: none;\\n  }\\n  \", \"\\n\"], [\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  max-width: \", \"\\n  margin: 0 auto;\\n  margin-bottom: -44px; // Offset default force margin; FIXME: This kind of stuff needs to be globally addressed\\n  box-sizing: border-box;\\n  a {\\n    text-decoration: none;\\n  }\\n  \", \"\\n\"]),\n    _templateObject2 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    margin-bottom: 0;\\n    min-height: 400px;\\n  \"], [\"\\n    margin-bottom: 0;\\n    min-height: 400px;\\n  \"]),\n    _templateObject3 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  \", \"\\n  color: \", \";\\n  margin: 15px 0 0 0;\\n  \", \"\\n  \", \"\\n\"], [\"\\n  \", \"\\n  color: \", \";\\n  margin: 15px 0 0 0;\\n  \", \"\\n  \", \"\\n\"]),\n    _templateObject4 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    margin: 35px 0 10px 0;\\n  \"], [\"\\n    margin: 35px 0 10px 0;\\n  \"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object['ke' + 'ys'](descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object['define' + 'Property'](target, property, desc); desc = null; } return desc; }\n\nvar DisplayCanvas = (_dec = (0, _track.track)(), _dec2 = (0, _trackOnce.trackImpression)(function (props) {\n  return (0, _CanvasContainer.unitLayout)(props);\n}), _dec3 = (0, _trackOnce.trackViewability)(function (props) {\n  return (0, _CanvasContainer.unitLayout)(props);\n}), _dec(_class = (_class2 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DisplayCanvas, _React$Component);\n\n  function DisplayCanvas(props) {\n    var _this;\n\n    _classCallCheck(this, DisplayCanvas);\n\n    _this = _possibleConstructorReturn(this, (DisplayCanvas.__proto__ || Object.getPrototypeOf(DisplayCanvas)).call(this, props));\n    _this.trackViewability = _this.trackViewability.bind(_assertThisInitialized(_this));\n    _this.trackImpression = _this.trackImpression.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(DisplayCanvas, [{\n    key: \"trackImpression\",\n    value: function trackImpression() {// noop\n    }\n  }, {\n    key: \"trackViewability\",\n    value: function trackViewability() {// noop\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          unit = _props.unit,\n          campaign = _props.campaign,\n          article = _props.article,\n          renderTime = _props.renderTime;\n      var url = (0, _lodash.get)(unit, \"link.url\", \"\");\n\n      var disclaimer = _react.default.createElement(Disclaimer, {\n        layout: unit.layout\n      }, unit.disclaimer);\n\n      return _react.default.createElement(_ErrorBoundary.ErrorBoundary, null, _react.default.createElement(DisplayContainer, {\n        layout: unit.layout\n      }, _react.default.createElement(_reactWaypoint.default, {\n        onEnter: this.trackImpression\n      }), _react.default.createElement(_reactWaypoint.default, {\n        bottomOffset: \"50%\",\n        onEnter: this.trackViewability\n      }), _react.default.createElement(\"a\", {\n        href: (0, _ExternalTrackers.replaceWithCacheBuster)(url, (0, _Constants.getCurrentUnixTimestamp)()),\n        target: \"_blank\"\n      }, _react.default.createElement(SponsoredBy, null, \"Sponsored by \".concat(campaign.name))), _react.default.createElement(_CanvasContainer.CanvasContainer, {\n        unit: unit,\n        campaign: campaign,\n        article: article,\n        disclaimer: disclaimer\n      }), unit.layout === \"overlay\" && disclaimer, _react.default.createElement(_ExternalTrackers.PixelTracker, {\n        unit: unit,\n        date: renderTime\n      })));\n    }\n  }]);\n\n  return DisplayCanvas;\n}(_react.default.Component), (_applyDecoratedDescriptor(_class2.prototype, \"trackImpression\", [_dec2], Object.getOwnPropertyDescriptor(_class2.prototype, \"trackImpression\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"trackViewability\", [_dec3], Object.getOwnPropertyDescriptor(_class2.prototype, \"trackViewability\"), _class2.prototype)), _class2)) || _class);\nexports.DisplayCanvas = DisplayCanvas;\nvar Div = _styledComponents.default.div;\nvar DisplayContainer = Div(_templateObject, function (props) {\n  return props.layout === \"slideshow\" ? \"100%;\" : \"1250px;\";\n}, _Helpers.pMedia.sm(_templateObject2));\n\nvar SponsoredBy =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"Canvas__SponsoredBy\",\n  componentId: \"v4wc1d-0\"\n})([\"\", \" color:\", \";margin:10px 0;text-align:center;\"], (0, _Fonts.avantgarde)(\"s11\"), _Colors.default.grayMedium);\n\nvar Disclaimer = Div(_templateObject3, (0, _Fonts.garamond)(\"s11\"), _Colors.default.grayMedium, function (props) {\n  return props.layout === \"overlay\" && \"text-align: center;\";\n}, _Helpers.pMedia.sm(_templateObject4));",{"version":3,"sources":["src/Components/Publishing/Display/Canvas/index.tsx"],"names":["DisplayCanvas","props","trackViewability","bind","trackImpression","unit","campaign","article","renderTime","url","disclaimer","layout","name","Component","Div","div","DisplayContainer","sm","SponsoredBy","grayMedium","Disclaimer"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAcaA,a,WADZ,mB,UAQE,gCAAgB;AAAA,SAAS,iCAAWC,KAAX,CAAT;AAAA,CAAhB,C,UAKA,iCAAiB;AAAA,SAAS,iCAAWA,KAAX,CAAT;AAAA,CAAjB,C;;;;;AAXD,yBAAYA,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,0HAAMA,KAAN;AACA,UAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,+BAAxB;AACA,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBD,IAArB,+BAAvB;AAHiB;AAIlB;;;;sCAGiB,CAChB;AACD;;;uCAGkB,CACjB;AACD;;;6BAEQ;AAAA,mBACyC,KAAKF,KAD9C;AAAA,UACCI,IADD,UACCA,IADD;AAAA,UACOC,QADP,UACOA,QADP;AAAA,UACiBC,OADjB,UACiBA,OADjB;AAAA,UAC0BC,UAD1B,UAC0BA,UAD1B;AAEP,UAAMC,MAAM,iBAAIJ,IAAJ,EAAU,UAAV,EAAsB,EAAtB,CAAZ;;AACA,UAAMK,aACJ,6BAAC,UAAD;AAAY,gBAAQL,KAAKM;AAAzB,SAAkCN,KAAKK,UAAvC,CADF;;AAIA,aACE,iEACE,6BAAC,gBAAD;AAAkB,gBAAQL,KAAKM;AAA/B,SACE;AAAU,iBAAS,KAAKP;AAAxB,QADF,EAEE;AAAU,sBAAa,KAAvB;AAA6B,iBAAS,KAAKF;AAA3C,QAFF,EAIE;AACE,cAAM,8CAAuBO,GAAvB,EAA4B,yCAA5B,CADR;AAEE,gBAAO;AAFT,SAIE,6BAAC,WAAD,+BAA8BH,SAASM,IAAvC,EAJF,CAJF,EAWE;AACE,cAAMP,IADR;AAEE,kBAAUC,QAFZ;AAGE,iBAASC,OAHX;AAIE,oBAAYG;AAJd,QAXF,EAkBGL,KAAKM,MAAL,KAAgB,SAAhB,IAA6BD,UAlBhC,EAmBE;AAAc,cAAML,IAApB;AAA0B,cAAMG;AAAhC,QAnBF,CADF,CADF;AAyBD;;;;EAjDgC,eAAMK,S;;AAoDzC,IAAMC,MAAgC,0BAAOC,GAA7C;AAEA,IAAMC,mBAAmBF,GAAnB,kBAIS;AAAA,SAAUb,MAAMU,MAAN,KAAiB,WAAjB,GAA+B,OAA/B,GAAyC,SAAnD;AAAA,CAJT,EAWF,gBAAOM,EAXL,mBAAN;;AAgBA,IAAMC;AAAA;AAAc,0BAAOH,GAArB;AAAA;AAAA;AAAA,yDACF,uBAAW,KAAX,CADE,EAC0B,gBAAOI,UADjC,CAAN;;AAKA,IAAMC,aAAaN,GAAb,mBACF,qBAAS,KAAT,CADE,EAEK,gBAAOK,UAFZ,EAIF;AAAA,SAASlB,MAAMU,MAAN,KAAiB,SAAjB,IAA8B,qBAAvC;AAAA,CAJE,EAKF,gBAAOM,EALL,mBAAN","file":"/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/index.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import { get } from \"lodash\"\nimport React from \"react\"\nimport Waypoint from \"react-waypoint\"\nimport styled, { StyledFunction } from \"styled-components\"\nimport Colors from \"../../../../Assets/Colors\"\nimport { track } from \"../../../../Utils/track\"\nimport { pMedia } from \"../../../Helpers\"\nimport { avantgarde, garamond } from \"Assets/Fonts\"\nimport { ErrorBoundary } from \"../../../ErrorBoundary\"\nimport { trackImpression, trackViewability } from \"../track-once\"\nimport { CanvasContainer, unitLayout } from \"./CanvasContainer\"\nimport { PixelTracker, replaceWithCacheBuster } from \"../ExternalTrackers\"\nimport { getCurrentUnixTimestamp } from \"../../Constants\"\n\ninterface DisplayCanvasProps {\n  unit: any\n  campaign: any\n  article?: any\n  renderTime?: string\n}\n\ninterface DivProps extends React.HTMLProps<HTMLDivElement> {\n  layout: string\n}\n\n@track()\nexport class DisplayCanvas extends React.Component<DisplayCanvasProps, null> {\n  constructor(props) {\n    super(props)\n    this.trackViewability = this.trackViewability.bind(this)\n    this.trackImpression = this.trackImpression.bind(this)\n  }\n\n  @trackImpression(props => unitLayout(props))\n  trackImpression() {\n    // noop\n  }\n\n  @trackViewability(props => unitLayout(props))\n  trackViewability() {\n    // noop\n  }\n\n  render() {\n    const { unit, campaign, article, renderTime } = this.props\n    const url = get(unit, \"link.url\", \"\")\n    const disclaimer = (\n      <Disclaimer layout={unit.layout}>{unit.disclaimer}</Disclaimer>\n    )\n\n    return (\n      <ErrorBoundary>\n        <DisplayContainer layout={unit.layout}>\n          <Waypoint onEnter={this.trackImpression} />\n          <Waypoint bottomOffset=\"50%\" onEnter={this.trackViewability} />\n\n          <a\n            href={replaceWithCacheBuster(url, getCurrentUnixTimestamp())}\n            target=\"_blank\"\n          >\n            <SponsoredBy>{`Sponsored by ${campaign.name}`}</SponsoredBy>\n          </a>\n\n          <CanvasContainer\n            unit={unit}\n            campaign={campaign}\n            article={article}\n            disclaimer={disclaimer}\n          />\n\n          {unit.layout === \"overlay\" && disclaimer}\n          <PixelTracker unit={unit} date={renderTime} />\n        </DisplayContainer>\n      </ErrorBoundary>\n    )\n  }\n}\n\nconst Div: StyledFunction<DivProps> = styled.div\n\nconst DisplayContainer = Div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: ${props => (props.layout === \"slideshow\" ? \"100%;\" : \"1250px;\")}\n  margin: 0 auto;\n  margin-bottom: -44px; // Offset default force margin; FIXME: This kind of stuff needs to be globally addressed\n  box-sizing: border-box;\n  a {\n    text-decoration: none;\n  }\n  ${pMedia.sm`\n    margin-bottom: 0;\n    min-height: 400px;\n  `}\n`\nconst SponsoredBy = styled.div`\n  ${avantgarde(\"s11\")} color: ${Colors.grayMedium};\n  margin: 10px 0;\n  text-align: center;\n`\nconst Disclaimer = Div`\n  ${garamond(\"s11\")}\n  color: ${Colors.grayMedium};\n  margin: 15px 0 0 0;\n  ${props => props.layout === \"overlay\" && \"text-align: center;\"}\n  ${pMedia.sm`\n    margin: 35px 0 10px 0;\n  `}\n`\n"]}]}