{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Apps/Collect/FilterState.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Apps/Collect/FilterState.tsx","mtime":1538070271000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _without from \"lodash/without\";\nimport _uniq from \"lodash/uniq\";\nimport _omitBy from \"lodash/omitBy\";\nimport _omit from \"lodash/omit\";\nimport _isNil from \"lodash/isNil\";\nimport _cloneDeep from \"lodash/cloneDeep\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Container } from \"unstated\";\nvar initialState = {\n  medium: \"*\",\n  for_sale: null,\n  page: 1,\n  major_periods: [],\n  partner_id: null,\n  sort: \"-decayed_merch\",\n  acquireable: null,\n  at_auction: null,\n  inquireable_only: null,\n  price_range: null,\n  selectedFilters: [],\n  showActionSheet: false\n};\nexport var FilterState =\n/*#__PURE__*/\nfunction (_Container) {\n  _inherits(FilterState, _Container);\n\n  function FilterState(props) {\n    var _this;\n\n    _classCallCheck(this, FilterState);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FilterState).call(this));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", _cloneDeep(initialState));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"tracking\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"showActionSheet\", function (show) {\n      if (show) {\n        // TODO: Manage this side-effect in a more react-like fashion\n        document.body.style.overflowY = \"hidden\";\n      } else {\n        document.body.style.overflowY = \"auto\";\n      }\n\n      _this.setState({\n        showActionSheet: show\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"resetFilters\", function () {\n      _this.setState(_objectSpread({}, initialState, {\n        showActionSheet: true\n      }));\n    });\n\n    _this.tracking = props.tracking;\n\n    if (props) {\n      Object.keys(_this.state).forEach(function (filter) {\n        if (props[filter]) {\n          if (filter === \"major_periods\") {\n            _this.state[filter] = [props[filter]];\n          } else if ([\"for_sale\", \"acquireable\", \"at_auction\", \"inquireable_only\"].includes(filter)) {\n            _this.state[filter] = props[filter] ? true : null;\n          } else {\n            _this.state[filter] = props[filter];\n          }\n        }\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(FilterState, [{\n    key: \"setPage\",\n    value: function setPage(page, mediator) {\n      var _this2 = this;\n\n      this.setState({\n        page: page\n      }, function () {\n        mediator.trigger(\"collect:filter:changed\", _this2.state);\n      });\n    }\n  }, {\n    key: \"unsetFilter\",\n    value: function unsetFilter(filter, mediator) {\n      var _this3 = this;\n\n      var selectedFilters = this.state.selectedFilters;\n      var newPartialState = {};\n\n      if (filter === \"major_periods\") {\n        newPartialState = {\n          major_periods: []\n        };\n      }\n\n      if ([\"for_sale\", \"acquireable\", \"at_auction\", \"partner_id\", \"inquireable_only\"].includes(filter)) {\n        newPartialState[filter] = null;\n      }\n\n      if (filter === \"medium\") {\n        newPartialState = {\n          medium: \"*\"\n        };\n      }\n\n      selectedFilters = _without(selectedFilters, \"radio\");\n      this.setState(_objectSpread({\n        page: 1,\n        selectedFilters: selectedFilters\n      }, newPartialState), function () {\n        var filterState = _omit(_this3.state, [\"selectedFilterCount\", \"showActionSheet\"]);\n\n        mediator.trigger(\"collect:filter:changed\", filterState);\n      });\n    }\n  }, {\n    key: \"setFilter\",\n    value: function setFilter(filter, value, mediator) {\n      var _this4 = this;\n\n      var selectedFilters = this.state.selectedFilters;\n      var newPartialState = {};\n\n      if (filter === \"major_periods\") {\n        newPartialState = {\n          partner_id: null,\n          major_periods: [value],\n          medium: \"*\",\n          price_range: null\n        };\n      } else if (filter === \"partner_id\") {\n        newPartialState = {\n          major_periods: [],\n          partner_id: value,\n          medium: \"*\",\n          price_range: null\n        };\n      } else if (filter === \"medium\") {\n        newPartialState = {\n          medium: value,\n          partner_id: null,\n          major_periods: [],\n          price_range: null\n        };\n      } else if (filter === \"price_range\") {\n        newPartialState = {\n          price_range: value,\n          medium: \"*\",\n          partner_id: null,\n          major_periods: []\n        };\n      } else if (filter === \"sort\") {\n        newPartialState = {\n          sort: value,\n          medium: \"*\",\n          partner_id: null,\n          major_periods: [],\n          price_range: null\n        };\n      } else if ([\"for_sale\", \"acquireable\", \"at_auction\", \"inquireable_only\"].includes(filter)) {\n        if (value) {\n          selectedFilters = selectedFilters.concat([filter]);\n          newPartialState[filter] = true;\n        } else {\n          selectedFilters = _without(selectedFilters, filter);\n          newPartialState[filter] = null;\n        }\n      }\n\n      if ([\"major_periods\", \"partner_id\", \"medium\"].includes(filter)) {\n        selectedFilters = selectedFilters.concat([\"radio\"]);\n      }\n\n      selectedFilters = _uniq(selectedFilters);\n      this.setState(_objectSpread({\n        page: 1,\n        selectedFilters: selectedFilters\n      }, newPartialState), function () {\n        var filterState = _omit(_this4.state, [\"selectedFilters\", \"showActionSheet\"]);\n\n        filterState = _omitBy(filterState, _isNil);\n        mediator.trigger(\"collect:filter:changed\", filterState);\n\n        _this4.tracking.trackEvent({\n          action: \"Commercial filter: params changed\",\n          current: _omit(_this4.state, [\"selectedFilterCount\", \"showActionSheet\"]),\n          changed: newPartialState\n        });\n      });\n    }\n  }]);\n\n  return FilterState;\n}(Container);",{"version":3,"sources":["/Users/eve/development/reaction/src/Apps/Collect/FilterState.tsx"],"names":["Container","initialState","medium","for_sale","page","major_periods","partner_id","sort","acquireable","at_auction","inquireable_only","price_range","selectedFilters","showActionSheet","FilterState","props","show","document","body","style","overflowY","setState","tracking","Object","keys","state","forEach","filter","includes","mediator","trigger","newPartialState","filterState","value","concat","trackEvent","action","current","changed"],"mappings":"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","sourcesContent":["import { cloneDeep, isNil, omit, omitBy, uniq, without } from \"lodash\"\nimport { Container } from \"unstated\"\n\nexport interface State {\n  // Search filters\n  medium?: string\n  major_periods?: string[]\n  partner_id?: string\n  for_sale?: boolean\n  page?: number\n  sort?: string\n  acquireable?: boolean\n  at_auction?: boolean\n  inquireable_only?: boolean\n  price_range?: string\n\n  // UI\n  selectedFilters?: string[]\n  showActionSheet?: boolean\n\n  tracking?: any\n}\n\nconst initialState = {\n  medium: \"*\",\n  for_sale: null,\n  page: 1,\n  major_periods: [],\n  partner_id: null,\n  sort: \"-decayed_merch\",\n  acquireable: null,\n  at_auction: null,\n  inquireable_only: null,\n  price_range: null,\n  selectedFilters: [],\n  showActionSheet: false,\n}\n\nexport class FilterState extends Container<State> {\n  state = cloneDeep(initialState)\n  tracking: any\n\n  constructor(props: State) {\n    super()\n    this.tracking = props.tracking\n\n    if (props) {\n      Object.keys(this.state).forEach(filter => {\n        if (props[filter]) {\n          if (filter === \"major_periods\") {\n            this.state[filter] = [props[filter]]\n          } else if (\n            [\n              \"for_sale\",\n              \"acquireable\",\n              \"at_auction\",\n              \"inquireable_only\",\n            ].includes(filter)\n          ) {\n            this.state[filter] = props[filter] ? true : null\n          } else {\n            this.state[filter] = props[filter]\n          }\n        }\n      })\n    }\n  }\n\n  setPage(page, mediator) {\n    this.setState({ page }, () => {\n      mediator.trigger(\"collect:filter:changed\", this.state)\n    })\n  }\n\n  showActionSheet = show => {\n    if (show) {\n      // TODO: Manage this side-effect in a more react-like fashion\n      document.body.style.overflowY = \"hidden\"\n    } else {\n      document.body.style.overflowY = \"auto\"\n    }\n\n    this.setState({ showActionSheet: show })\n  }\n\n  resetFilters = () => {\n    this.setState({\n      ...initialState,\n      showActionSheet: true,\n    })\n  }\n\n  unsetFilter(filter, mediator) {\n    let { selectedFilters } = this.state\n    let newPartialState = {}\n    if (filter === \"major_periods\") {\n      newPartialState = { major_periods: [] }\n    }\n    if (\n      [\n        \"for_sale\",\n        \"acquireable\",\n        \"at_auction\",\n        \"partner_id\",\n        \"inquireable_only\",\n      ].includes(filter)\n    ) {\n      newPartialState[filter] = null\n    }\n    if (filter === \"medium\") {\n      newPartialState = { medium: \"*\" }\n    }\n\n    selectedFilters = without(selectedFilters, \"radio\")\n\n    this.setState({ page: 1, selectedFilters, ...newPartialState }, () => {\n      const filterState = omit(this.state, [\n        \"selectedFilterCount\",\n        \"showActionSheet\",\n      ])\n      mediator.trigger(\"collect:filter:changed\", filterState)\n    })\n  }\n\n  setFilter(filter, value, mediator) {\n    let { selectedFilters } = this.state\n\n    let newPartialState = {}\n    if (filter === \"major_periods\") {\n      newPartialState = {\n        partner_id: null,\n        major_periods: [value],\n        medium: \"*\",\n        price_range: null,\n      }\n    } else if (filter === \"partner_id\") {\n      newPartialState = {\n        major_periods: [],\n        partner_id: value,\n        medium: \"*\",\n        price_range: null,\n      }\n    } else if (filter === \"medium\") {\n      newPartialState = {\n        medium: value,\n        partner_id: null,\n        major_periods: [],\n        price_range: null,\n      }\n    } else if (filter === \"price_range\") {\n      newPartialState = {\n        price_range: value,\n        medium: \"*\",\n        partner_id: null,\n        major_periods: [],\n      }\n    } else if (filter === \"sort\") {\n      newPartialState = {\n        sort: value,\n        medium: \"*\",\n        partner_id: null,\n        major_periods: [],\n        price_range: null,\n      }\n    } else if (\n      [\"for_sale\", \"acquireable\", \"at_auction\", \"inquireable_only\"].includes(\n        filter\n      )\n    ) {\n      if (value) {\n        selectedFilters = selectedFilters.concat([filter])\n        newPartialState[filter] = true\n      } else {\n        selectedFilters = without(selectedFilters, filter)\n        newPartialState[filter] = null\n      }\n    }\n\n    if ([\"major_periods\", \"partner_id\", \"medium\"].includes(filter)) {\n      selectedFilters = selectedFilters.concat([\"radio\"])\n    }\n\n    selectedFilters = uniq(selectedFilters)\n\n    this.setState({ page: 1, selectedFilters, ...newPartialState }, () => {\n      let filterState: any = omit(this.state, [\n        \"selectedFilters\",\n        \"showActionSheet\",\n      ])\n      filterState = omitBy(filterState, isNil)\n\n      mediator.trigger(\"collect:filter:changed\", filterState)\n      this.tracking.trackEvent({\n        action: \"Commercial filter: params changed\",\n        current: omit(this.state, [\"selectedFilterCount\", \"showActionSheet\"]),\n        changed: newPartialState,\n      })\n    })\n  }\n}\n"]}]}