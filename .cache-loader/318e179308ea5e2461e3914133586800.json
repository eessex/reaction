{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Publishing/Sections/ImageWrapper.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Sections/ImageWrapper.tsx","mtime":1528820562000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    \", \" {\\n      opacity: 1;\\n    }\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport styled from \"styled-components\";\nimport { pMedia } from \"../../Helpers\";\nimport { ViewFullscreen } from \"./ViewFullscreen\";\nexport var ImageWrapper =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(ImageWrapper, _React$PureComponent);\n\n  function ImageWrapper() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ImageWrapper);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ImageWrapper)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"image\", undefined);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"mounted\", false);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      isLoaded: false\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onImageLoad\", function () {\n      if (_this.mounted) {\n        _this.setState({\n          isLoaded: true\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(ImageWrapper, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var img = new Image();\n      /**\n       * TODO: Clean this up\n       * Guard against snapshot tests See: https://reactjs.org/blog/2016/11/16/react-v15.4.0.html#mocking-refs-for-snapshot-testing\n       */\n\n      try {\n        var imgTag = ReactDOM.findDOMNode(this.image);\n        var imgSrc = imgTag.getAttribute(\"src\");\n        img.src = imgSrc;\n      } catch (error) {\n        img.src = \"\";\n      } finally {\n        img.onload = this.onImageLoad;\n        this.mounted = true;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          editing = _this$props.editing,\n          layout = _this$props.layout,\n          linked = _this$props.linked,\n          index = _this$props.index,\n          imageProps = _objectWithoutProperties(_this$props, [\"editing\", \"layout\", \"linked\", \"index\"]);\n\n      var className = \"BlockImage__container\";\n\n      if (this.state.isLoaded || editing) {\n        className = className + \" image-loaded\";\n      }\n\n      return React.createElement(StyledImageWrapper, null, React.createElement(BlockImage, _extends({\n        className: className,\n        ref: function ref(_ref) {\n          return _this2.image = _ref;\n        }\n      }, imageProps)), layout !== \"classic\" && layout !== \"news\" && linked && React.createElement(Fullscreen, null, React.createElement(ViewFullscreen, {\n        index: index\n      })));\n    }\n  }]);\n\n  return ImageWrapper;\n}(React.PureComponent);\nvar Fullscreen = styled.div.withConfig({\n  displayName: \"ImageWrapper__Fullscreen\",\n  componentId: \"s87c4qo-0\"\n})([\"opacity:0;transition:opacity 0.3s;\"]);\nvar StyledImageWrapper = styled.div.withConfig({\n  displayName: \"ImageWrapper__StyledImageWrapper\",\n  componentId: \"s87c4qo-1\"\n})([\"position:relative;&:hover{\", \"{opacity:1;}}\", \" .BlockImage__container{opacity:0;transition:opacity 1s;}.image-loaded{opacity:1;}\"], Fullscreen, pMedia.sm(_templateObject(), Fullscreen));\nvar BlockImage = styled.img.withConfig({\n  displayName: \"ImageWrapper__BlockImage\",\n  componentId: \"s87c4qo-2\"\n})([\"display:block;\"]);",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Publishing/Sections/ImageWrapper.tsx"],"names":["React","ReactDOM","styled","pMedia","ViewFullscreen","ImageWrapper","undefined","isLoaded","mounted","setState","img","Image","imgTag","findDOMNode","image","imgSrc","getAttribute","src","error","onload","onImageLoad","props","editing","layout","linked","index","imageProps","className","state","ref","PureComponent","Fullscreen","div","StyledImageWrapper","sm","BlockImage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,MAAT;AAEA,SAASC,cAAT;AAaA,WAAaC,YAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,oFACUC,SADV;;AAAA,sFAEY,KAFZ;;AAAA,oFAIU;AACNC,MAAAA,QAAQ,EAAE;AADJ,KAJV;;AAAA,0FA+BgB,YAAM;AAClB,UAAI,MAAKC,OAAT,EAAkB;AAChB,cAAKC,QAAL,CAAc;AACZF,UAAAA,QAAQ,EAAE;AADE,SAAd;AAGD;AACF,KArCH;;AAAA;AAAA;;AAAA;AAAA;AAAA,wCAQsB;AAClB,UAAMG,GAAG,GAAG,IAAIC,KAAJ,EAAZ;AAEA;;;;;AAIA,UAAI;AACF,YAAMC,MAAM,GAAGX,QAAQ,CAACY,WAAT,CAAqB,KAAKC,KAA1B,CAAf;AACA,YAAMC,MAAM,GAAGH,MAAM,CAACI,YAAP,CAAoB,KAApB,CAAf;AACAN,QAAAA,GAAG,CAACO,GAAJ,GAAUF,MAAV;AACD,OAJD,CAIE,OAAOG,KAAP,EAAc;AACdR,QAAAA,GAAG,CAACO,GAAJ,GAAU,EAAV;AACD,OAND,SAMU;AACRP,QAAAA,GAAG,CAACS,MAAJ,GAAa,KAAKC,WAAlB;AACA,aAAKZ,OAAL,GAAe,IAAf;AACD;AACF;AAzBH;AAAA;AAAA,2CA2ByB;AACrB,WAAKA,OAAL,GAAe,KAAf;AACD;AA7BH;AAAA;AAAA,6BAuCW;AAAA;;AAAA,wBACwD,KAAKa,KAD7D;AAAA,UACCC,OADD,eACCA,OADD;AAAA,UACUC,MADV,eACUA,MADV;AAAA,UACkBC,MADlB,eACkBA,MADlB;AAAA,UAC0BC,KAD1B,eAC0BA,KAD1B;AAAA,UACoCC,UADpC;;AAEP,UAAIC,SAAS,GAAG,uBAAhB;;AAEA,UAAI,KAAKC,KAAL,CAAWrB,QAAX,IAAuBe,OAA3B,EAAoC;AAClCK,QAAAA,SAAS,GAAGA,SAAS,GAAG,eAAxB;AACD;;AAED,aACE,oBAAC,kBAAD,QACE,oBAAC,UAAD;AACE,QAAA,SAAS,EAAEA,SADb;AAEE,QAAA,GAAG,EAAE,aAAAE,IAAG;AAAA,iBAAK,MAAI,CAACf,KAAL,GAAae,IAAlB;AAAA;AAFV,SAGMH,UAHN,EADF,EAOGH,MAAM,KAAK,SAAX,IACCA,MAAM,KAAK,MADZ,IAECC,MAFD,IAGG,oBAAC,UAAD,QACE,oBAAC,cAAD;AAAgB,QAAA,KAAK,EAAEC;AAAvB,QADF,CAVN,CADF;AAiBD;AAhEH;;AAAA;AAAA,EAAkCzB,KAAK,CAAC8B,aAAxC;AAmEA,IAAMC,UAAU,GAAG7B,MAAM,CAAC8B,GAAV;AAAA;AAAA;AAAA,0CAAhB;AAKA,IAAMC,kBAAkB,GAAG/B,MAAM,CAAC8B,GAAV;AAAA;AAAA;AAAA,0IAIlBD,UAJkB,EASpB5B,MAAM,CAAC+B,EATa,oBAUlBH,UAVkB,EAAxB;AAuBA,IAAMI,UAAU,GAAGjC,MAAM,CAACQ,GAAV;AAAA;AAAA;AAAA,sBAAhB","sourcesContent":["import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport styled from \"styled-components\"\nimport { pMedia } from \"../../Helpers\"\nimport { ArticleLayout } from \"../Typings\"\nimport { ViewFullscreen } from \"./ViewFullscreen\"\n\ninterface Props extends React.HTMLProps<HTMLImageElement> {\n  src: string\n  layout?: ArticleLayout\n  linked?: boolean\n  width?: string | number\n  height?: string | number\n  alt?: string\n  editing?: boolean\n  index?: number\n}\n\nexport class ImageWrapper extends React.PureComponent<Props, any> {\n  image = undefined\n  mounted = false\n\n  state = {\n    isLoaded: false,\n  }\n\n  componentDidMount() {\n    const img = new Image()\n\n    /**\n     * TODO: Clean this up\n     * Guard against snapshot tests See: https://reactjs.org/blog/2016/11/16/react-v15.4.0.html#mocking-refs-for-snapshot-testing\n     */\n    try {\n      const imgTag = ReactDOM.findDOMNode(this.image) as Element\n      const imgSrc = imgTag.getAttribute(\"src\")\n      img.src = imgSrc\n    } catch (error) {\n      img.src = \"\"\n    } finally {\n      img.onload = this.onImageLoad\n      this.mounted = true\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false\n  }\n\n  onImageLoad = () => {\n    if (this.mounted) {\n      this.setState({\n        isLoaded: true,\n      })\n    }\n  }\n\n  render() {\n    const { editing, layout, linked, index, ...imageProps }: any = this.props\n    let className = \"BlockImage__container\"\n\n    if (this.state.isLoaded || editing) {\n      className = className + \" image-loaded\"\n    }\n\n    return (\n      <StyledImageWrapper>\n        <BlockImage\n          className={className}\n          ref={ref => (this.image = ref)}\n          {...imageProps}\n        />\n\n        {layout !== \"classic\" &&\n          layout !== \"news\" &&\n          linked && (\n            <Fullscreen>\n              <ViewFullscreen index={index} />\n            </Fullscreen>\n          )}\n      </StyledImageWrapper>\n    )\n  }\n}\n\nconst Fullscreen = styled.div`\n  opacity: 0;\n  transition: opacity 0.3s;\n`\n\nconst StyledImageWrapper = styled.div`\n  position: relative;\n\n  &:hover {\n    ${Fullscreen} {\n      opacity: 1;\n    }\n  }\n\n  ${pMedia.sm`\n    ${Fullscreen} {\n      opacity: 1;\n    }\n  `} .BlockImage__container {\n    opacity: 0;\n    transition: opacity 1s;\n  }\n\n  .image-loaded {\n    opacity: 1;\n  }\n`\n\nconst BlockImage = styled.img`\n  display: block;\n`\n"]}]}