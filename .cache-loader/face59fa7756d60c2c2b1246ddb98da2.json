{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Apps/Artist/Routes/RelatedArtists/RelatedArtistsList.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Apps/Artist/Routes/RelatedArtists/RelatedArtistsList.tsx","mtime":1537112679000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Box, Flex } from \"@artsy/palette\";\nimport { ContextConsumer } from \"../../../../Artsy/Router\";\nimport React, { Component } from \"react\";\nimport { createRefetchContainer, graphql } from \"react-relay\";\nimport { Col, Row } from \"../../../../Styleguide/Elements/Grid\";\nimport { Responsive } from \"../../../../Utils/Responsive\";\nimport { ArtistCardFragmentContainer as ArtistCard, PaginationFragmentContainer as Pagination } from \"../../../../Styleguide/Components\";\nimport { LoadingArea } from \"../../Components/LoadingArea\";\nexport var PAGE_SIZE = 16;\n\nvar RelatedArtistsList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RelatedArtistsList, _Component);\n\n  function RelatedArtistsList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RelatedArtistsList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RelatedArtistsList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      isLoading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"loadNext\", function () {\n      var _this$props$artist$re = _this.props.artist.related.artists.pageInfo,\n          hasNextPage = _this$props$artist$re.hasNextPage,\n          endCursor = _this$props$artist$re.endCursor;\n\n      if (hasNextPage) {\n        _this.loadAfter(endCursor);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"loadAfter\", function (cursor) {\n      _this.toggleLoading(true);\n\n      _this.props.relay.refetch({\n        first: PAGE_SIZE,\n        after: cursor,\n        artistID: _this.props.artist.id,\n        before: null,\n        last: null,\n        kind: _this.props.kind\n      }, null, function (error) {\n        _this.toggleLoading(false);\n\n        if (error) {\n          console.error(error);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"toggleLoading\", function (isLoading) {\n      _this.setState({\n        isLoading: isLoading\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(RelatedArtistsList, [{\n    key: \"renderPagination\",\n    value: function renderPagination() {\n      return React.createElement(Box, null, React.createElement(Pagination, {\n        hasNextPage: this.props.artist.related.artists.pageInfo.hasNextPage,\n        pageCursors: this.props.artist.related.artists.pageCursors,\n        onClick: this.loadAfter,\n        onNext: this.loadNext\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(ContextConsumer, null, function (_ref) {\n        var user = _ref.user,\n            mediator = _ref.mediator;\n        return React.createElement(Responsive, null, function (_ref2) {\n          var xs = _ref2.xs,\n              sm = _ref2.sm,\n              md = _ref2.md;\n          var width;\n\n          if (xs) {\n            width = \"100%\";\n          } else if (sm || md) {\n            width = \"33%\";\n          } else {\n            width = \"25%\";\n          }\n\n          return React.createElement(React.Fragment, null, React.createElement(Row, null, React.createElement(Col, null, React.createElement(LoadingArea, {\n            isLoading: _this2.state.isLoading\n          }, React.createElement(Flex, {\n            flexWrap: \"wrap\",\n            mr: -2,\n            width: \"100%\"\n          }, _this2.props.artist.related.artists.edges.map(function (_ref3, index) {\n            var node = _ref3.node;\n            return React.createElement(Box, {\n              pr: 2,\n              mb: xs ? 1 : 4,\n              width: width,\n              key: index\n            }, React.createElement(ArtistCard, {\n              artist: node,\n              mediator: mediator,\n              user: user\n            }));\n          }))))), React.createElement(Box, {\n            py: 2\n          }), React.createElement(Row, null, React.createElement(Col, null, React.createElement(Box, null, React.createElement(Pagination, {\n            hasNextPage: _this2.props.artist.related.artists.pageInfo.hasNextPage,\n            pageCursors: _this2.props.artist.related.artists.pageCursors,\n            onClick: _this2.loadAfter,\n            onNext: _this2.loadNext,\n            scrollTo: _this2.props.scrollTo\n          })))));\n        });\n      });\n    }\n  }]);\n\n  return RelatedArtistsList;\n}(Component);\n\nexport var RelatedArtistsRefetchContainer = createRefetchContainer(RelatedArtistsList, {\n  artist: function artist() {\n    var node = require(\"../../../../__generated__/RelatedArtistsList_artist.graphql\");\n\n    if (node.hash && node.hash !== \"2731d30ea18089035d7ff40f4fb22e70\") {\n      console.error(\"The definition of 'RelatedArtistsList_artist' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../../../__generated__/RelatedArtistsList_artist.graphql\");\n  }\n}, function () {\n  var node = require(\"../../../../__generated__/RelatedArtistsListQuery.graphql\");\n\n  if (node.hash && node.hash !== \"d51cdb705a7629aad9bd32c216683b41\") {\n    console.error(\"The definition of 'RelatedArtistsListQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n  }\n\n  return require(\"../../../../__generated__/RelatedArtistsListQuery.graphql\");\n});",{"version":3,"sources":["/Users/eve/development/reaction/src/Apps/Artist/Routes/RelatedArtists/RelatedArtistsList.tsx"],"names":["Box","Flex","ContextConsumer","React","Component","createRefetchContainer","graphql","Col","Row","Responsive","ArtistCardFragmentContainer","ArtistCard","PaginationFragmentContainer","Pagination","LoadingArea","PAGE_SIZE","RelatedArtistsList","isLoading","props","artist","related","artists","pageInfo","hasNextPage","endCursor","loadAfter","cursor","toggleLoading","relay","refetch","first","after","artistID","id","before","last","kind","error","console","setState","pageCursors","loadNext","user","mediator","xs","sm","md","width","state","edges","map","index","node","scrollTo","RelatedArtistsRefetchContainer"],"mappings":"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","sourcesContent":["import { Box, Flex } from \"@artsy/palette\"\nimport { RelatedArtistsList_artist } from \"__generated__/RelatedArtistsList_artist.graphql\"\nimport { ContextConsumer } from \"Artsy/Router\"\nimport React, { Component } from \"react\"\nimport { createRefetchContainer, graphql, RelayRefetchProp } from \"react-relay\"\nimport { Col, Row } from \"Styleguide/Elements/Grid\"\nimport { Responsive } from \"Utils/Responsive\"\n\nimport {\n  ArtistCardFragmentContainer as ArtistCard,\n  PaginationFragmentContainer as Pagination,\n} from \"Styleguide/Components\"\n\nimport {\n  LoadingArea,\n  LoadingAreaState,\n} from \"Apps/Artist/Components/LoadingArea\"\n\ninterface ShowProps {\n  relay: RelayRefetchProp\n  artist: RelatedArtistsList_artist\n  kind: string\n  scrollTo: string\n}\n\nexport const PAGE_SIZE = 16\n\nclass RelatedArtistsList extends Component<ShowProps, LoadingAreaState> {\n  state = {\n    isLoading: false,\n  }\n\n  loadNext = () => {\n    const {\n      artist: {\n        related: {\n          artists: {\n            pageInfo: { hasNextPage, endCursor },\n          },\n        },\n      },\n    } = this.props\n\n    if (hasNextPage) {\n      this.loadAfter(endCursor)\n    }\n  }\n\n  loadAfter = cursor => {\n    this.toggleLoading(true)\n\n    this.props.relay.refetch(\n      {\n        first: PAGE_SIZE,\n        after: cursor,\n        artistID: this.props.artist.id,\n        before: null,\n        last: null,\n        kind: this.props.kind,\n      },\n      null,\n      error => {\n        this.toggleLoading(false)\n\n        if (error) {\n          console.error(error)\n        }\n      }\n    )\n  }\n\n  toggleLoading = isLoading => {\n    this.setState({\n      isLoading,\n    })\n  }\n\n  renderPagination() {\n    return (\n      <Box>\n        <Pagination\n          hasNextPage={this.props.artist.related.artists.pageInfo.hasNextPage}\n          pageCursors={this.props.artist.related.artists.pageCursors}\n          onClick={this.loadAfter}\n          onNext={this.loadNext}\n        />\n      </Box>\n    )\n  }\n\n  render() {\n    return (\n      <ContextConsumer>\n        {({ user, mediator }) => {\n          return (\n            <Responsive>\n              {({ xs, sm, md }) => {\n                let width\n                if (xs) {\n                  width = \"100%\"\n                } else if (sm || md) {\n                  width = \"33%\"\n                } else {\n                  width = \"25%\"\n                }\n\n                return (\n                  <>\n                    <Row>\n                      <Col>\n                        <LoadingArea isLoading={this.state.isLoading}>\n                          <Flex flexWrap=\"wrap\" mr={-2} width=\"100%\">\n                            {this.props.artist.related.artists.edges.map(\n                              ({ node }, index) => {\n                                return (\n                                  <Box\n                                    pr={2}\n                                    mb={xs ? 1 : 4}\n                                    width={width}\n                                    key={index}\n                                  >\n                                    <ArtistCard\n                                      artist={node}\n                                      mediator={mediator}\n                                      user={user}\n                                    />\n                                  </Box>\n                                )\n                              }\n                            )}\n                          </Flex>\n                        </LoadingArea>\n                      </Col>\n                    </Row>\n\n                    <Box py={2} />\n\n                    <Row>\n                      <Col>\n                        <Box>\n                          <Pagination\n                            hasNextPage={\n                              this.props.artist.related.artists.pageInfo\n                                .hasNextPage\n                            }\n                            pageCursors={\n                              this.props.artist.related.artists.pageCursors\n                            }\n                            onClick={this.loadAfter}\n                            onNext={this.loadNext}\n                            scrollTo={this.props.scrollTo}\n                          />\n                        </Box>\n                      </Col>\n                    </Row>\n                  </>\n                )\n              }}\n            </Responsive>\n          )\n        }}\n      </ContextConsumer>\n    )\n  }\n}\n\nexport const RelatedArtistsRefetchContainer = createRefetchContainer(\n  RelatedArtistsList,\n  {\n    artist: graphql`\n      fragment RelatedArtistsList_artist on Artist\n        @argumentDefinitions(\n          first: { type: \"Int\", defaultValue: 16 }\n          last: { type: \"Int\" }\n          after: { type: \"String\" }\n          before: { type: \"String\" }\n          kind: { type: \"RelatedArtistsKind\" }\n        ) {\n        id\n        related {\n          artists(\n            first: $first\n            after: $after\n            before: $before\n            last: $last\n            kind: $kind\n          ) {\n            pageInfo {\n              hasNextPage\n              endCursor\n            }\n            pageCursors {\n              ...Pagination_pageCursors\n            }\n            edges {\n              node {\n                ...ArtistCard_artist\n              }\n            }\n          }\n        }\n      }\n    `,\n  },\n  graphql`\n    query RelatedArtistsListQuery(\n      $first: Int\n      $last: Int\n      $after: String\n      $before: String\n      $artistID: String!\n      $kind: RelatedArtistsKind\n    ) {\n      artist(id: $artistID) {\n        ...RelatedArtistsList_artist\n          @arguments(\n            kind: $kind\n            first: $first\n            last: $last\n            after: $after\n            before: $before\n          )\n      }\n    }\n  `\n)\n"]}]}