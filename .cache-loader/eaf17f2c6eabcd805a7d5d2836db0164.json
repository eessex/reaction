{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullscreen.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullscreen.tsx","mtime":1523548044000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1519658991000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ArticleWithFullscreen = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Events = _interopRequireDefault(require(\"../../../Utils/Events\"));\n\nvar _track = _interopRequireDefault(require(\"../../../Utils/track\"));\n\nvar _FullscreenViewer = require(\"../Sections/FullscreenViewer/FullscreenViewer\");\n\nvar _withFullScreen = require(\"../Sections/FullscreenViewer/withFullScreen\");\n\nvar _FeatureLayout = require(\"./FeatureLayout\");\n\nvar _StandardLayout = require(\"./StandardLayout\");\n\nvar _dec, _class;\n\nvar _templateObject = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  margin-top: \", \";\\n\"], [\"\\n  margin-top: \", \";\\n\"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nvar ArticleWithFullscreen = (_dec = (0, _track.default)(function (props) {\n  return {\n    page: \"Article\",\n    entity_type: \"article\",\n    entity_id: props.article.id\n  };\n}, {\n  dispatch: function dispatch(data) {\n    return _Events.default.postEvent(data);\n  }\n}), _dec(_class = (0, _withFullScreen.withFullScreen)(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ArticleWithFullscreen, _React$Component);\n\n  function ArticleWithFullscreen(props) {\n    var _this;\n\n    _classCallCheck(this, ArticleWithFullscreen);\n\n    _this = _possibleConstructorReturn(this, (ArticleWithFullscreen.__proto__ || Object.getPrototypeOf(ArticleWithFullscreen)).call(this, props));\n\n    _initialiseProps.call(_assertThisInitialized(_this));\n\n    var _this$indexAndExtract = _this.indexAndExtractImages(),\n        fullscreenImages = _this$indexAndExtract.fullscreenImages,\n        article = _this$indexAndExtract.article;\n\n    _this.state = {\n      fullscreenImages: fullscreenImages,\n      article: article\n    };\n    return _this;\n  }\n\n  _createClass(ArticleWithFullscreen, [{\n    key: \"render\",\n    value: function render() {\n      var _state = this.state,\n          article = _state.article,\n          fullscreenImages = _state.fullscreenImages;\n      var _props = this.props,\n          closeViewer = _props.closeViewer,\n          marginTop = _props.marginTop,\n          slideIndex = _props.slideIndex,\n          viewerIsOpen = _props.viewerIsOpen;\n      var articleProps = (0, _lodash.extend)((0, _lodash.cloneDeep)(this.props), {\n        article: article,\n        slideIndex: slideIndex\n      });\n      return _react.default.createElement(ArticleContainer, {\n        marginTop: marginTop\n      }, article.layout === \"feature\" ? _react.default.createElement(_FeatureLayout.FeatureLayout, articleProps) : _react.default.createElement(_StandardLayout.StandardLayout, articleProps), _react.default.createElement(_FullscreenViewer.FullscreenViewer, {\n        onClose: closeViewer,\n        show: viewerIsOpen,\n        slideIndex: slideIndex,\n        images: fullscreenImages\n      }));\n    }\n  }]);\n\n  return ArticleWithFullscreen;\n}(_react.default.Component)) || _class) || _class);\nexports.ArticleWithFullscreen = ArticleWithFullscreen;\nObject.defineProperty(ArticleWithFullscreen, \"defaultProps\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: {\n    isMobile: false,\n    isSuper: false,\n    article: {},\n    isTruncated: false\n  }\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  Object.defineProperty(this, \"indexAndExtractImages\", {\n    configurable: true,\n    enumerable: true,\n    writable: true,\n    value: function value() {\n      var article = (0, _lodash.cloneDeep)(_this2.props.article);\n      var fullscreenImages = [];\n      var sectionIndex = 0;\n      var newSections = (0, _lodash.map)(article.sections, function (section) {\n        if ((0, _lodash.includes)([\"image_collection\", \"image_set\"], section.type)) {\n          var newImages = (0, _lodash.map)(section.images, function (image) {\n            image.setTitle = section.title;\n            image.index = sectionIndex;\n            fullscreenImages.push(image);\n            sectionIndex = sectionIndex + 1;\n            return image;\n          });\n          section.images = newImages;\n        }\n\n        return section;\n      });\n      article.sections = newSections;\n      return {\n        fullscreenImages: fullscreenImages,\n        article: article\n      };\n    }\n  });\n};\n\nvar ArticleDiv = _styledComponents.default.div;\nvar ArticleContainer = ArticleDiv(_templateObject, function (props) {\n  return props.marginTop || \"50px\";\n});",{"version":3,"sources":["src/Components/Publishing/Layouts/ArticleWithFullscreen.tsx"],"names":["ArticleWithFullscreen","page","entity_type","entity_id","props","article","id","dispatch","postEvent","data","indexAndExtractImages","fullscreenImages","state","closeViewer","marginTop","slideIndex","viewerIsOpen","articleProps","layout","Component","isMobile","isSuper","isTruncated","sectionIndex","newSections","sections","section","type","newImages","images","image","setTitle","title","index","push","ArticleDiv","div","ArticleContainer"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;IA6CaA,qB,WAbZ,oBACC,iBAAS;AACP,SAAO;AACLC,UAAM,SADD;AAELC,iBAAa,SAFR;AAGLC,eAAWC,MAAMC,OAAN,CAAcC;AAHpB,GAAP;AAKD,CAPF,EAQC;AACEC,YAAU;AAAA,WAAQ,gBAAOC,SAAP,CAAiBC,IAAjB,CAAR;AAAA;AADZ,CARD,C;;;;;AAwBC,iCAAYL,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,0IAAMA,KAAN;;AADiB;;AAAA,gCAEqB,MAAKM,qBAAL,EAFrB;AAAA,QAETC,gBAFS,yBAETA,gBAFS;AAAA,QAESN,OAFT,yBAESA,OAFT;;AAGjB,UAAKO,KAAL,GAAa;AACXD,wCADW;AAEXN;AAFW,KAAb;AAHiB;AAOlB;;;;6BAwBQ;AAAA,mBAC+B,KAAKO,KADpC;AAAA,UACCP,OADD,UACCA,OADD;AAAA,UACUM,gBADV,UACUA,gBADV;AAAA,mBAEsD,KAAKP,KAF3D;AAAA,UAECS,WAFD,UAECA,WAFD;AAAA,UAEcC,SAFd,UAEcA,SAFd;AAAA,UAEyBC,UAFzB,UAEyBA,UAFzB;AAAA,UAEqCC,YAFrC,UAEqCA,YAFrC;AAIP,UAAMC,eAAe,oBAAO,uBAAU,KAAKb,KAAf,CAAP,EAA8B;AAAEC,wBAAF;AAAWU;AAAX,OAA9B,CAArB;AAEA,aACE,6BAAC,gBAAD;AAAkB,mBAAWD;AAA7B,SACGT,QAAQa,MAAR,KAAmB,SAAnB,GACC,2DAAmBD,YAAnB,CADD,GAGC,6DAAoBA,YAApB,CAJJ,EAME;AACE,iBAASJ,WADX;AAEE,cAAMG,YAFR;AAGE,oBAAYD,UAHd;AAIE,gBAAQJ;AAJV,QANF,CADF;AAeD;;;;EA/DwC,eAAMQ,S;;sBAApCnB,qB;;;;SAIW;AACpBoB,cAAU,KADU;AAEpBC,aAAS,KAFW;AAGpBhB,aAAS,EAHW;AAIpBiB,iBAAa;AAJO;;;;;;;;;;WAgBE,iBAAM;AAC5B,UAAMjB,UAAU,uBAAU,OAAKD,KAAL,CAAWC,OAArB,CAAhB;AACA,UAAMM,mBAAmB,EAAzB;AACA,UAAIY,eAAe,CAAnB;AAEA,UAAMC,cAAc,iBAAInB,QAAQoB,QAAZ,EAAsB,mBAAW;AACnD,YAAI,sBAAS,CAAC,kBAAD,EAAqB,WAArB,CAAT,EAA4CC,QAAQC,IAApD,CAAJ,EAA+D;AAC7D,cAAMC,YAAY,iBAAIF,QAAQG,MAAZ,EAAoB,iBAAS;AAC7CC,kBAAMC,QAAN,GAAiBL,QAAQM,KAAzB;AACAF,kBAAMG,KAAN,GAAcV,YAAd;AACAZ,6BAAiBuB,IAAjB,CAAsBJ,KAAtB;AACAP,2BAAeA,eAAe,CAA9B;AACA,mBAAOO,KAAP;AACD,WANiB,CAAlB;AAOAJ,kBAAQG,MAAR,GAAiBD,SAAjB;AACD;;AACD,eAAOF,OAAP;AACD,OAZmB,CAApB;AAaArB,cAAQoB,QAAR,GAAmBD,WAAnB;AACA,aAAO;AAAEb,0CAAF;AAAoBN;AAApB,OAAP;AACD;;;;AA0BH,IAAM8B,aAGJ,0BAAOC,GAHT;AAKA,IAAMC,mBAAmBF,UAAnB,kBACU;AAAA,SAAS/B,MAAMU,SAAN,IAAmB,MAA5B;AAAA,CADV,CAAN","file":"/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullscreen.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import { cloneDeep, extend, includes, map } from \"lodash\"\nimport React from \"react\"\nimport styled, { StyledFunction } from \"styled-components\"\nimport Events from \"../../../Utils/Events\"\nimport track from \"../../../Utils/track\"\nimport { FullscreenViewer } from \"../Sections/FullscreenViewer/FullscreenViewer\"\nimport { withFullScreen } from \"../Sections/FullscreenViewer/withFullScreen\"\nimport { ArticleData } from \"../Typings\"\nimport { FeatureLayout } from \"./FeatureLayout\"\nimport { StandardLayout } from \"./StandardLayout\"\n\nexport interface ArticleProps {\n  article: ArticleData\n  seriesArticle?: ArticleData\n  closeViewer?: () => void\n  display?: {\n    name: string\n    panel: object\n    canvas: any\n  }\n  emailSignupUrl?: string\n  headerHeight?: string\n  isMobile?: boolean\n  isSuper?: boolean\n  isTruncated?: boolean\n  marginTop?: string\n  relatedArticlesForCanvas?: any\n  relatedArticlesForPanel?: any\n  slideIndex?: number\n  viewerIsOpen?: boolean\n}\n\ninterface ArticleState {\n  fullscreenImages: any\n  article: ArticleData\n}\n\ninterface ArticleContainerProps {\n  marginTop?: string\n}\n\n@track(\n  props => {\n    return {\n      page: \"Article\",\n      entity_type: \"article\",\n      entity_id: props.article.id,\n    }\n  },\n  {\n    dispatch: data => Events.postEvent(data),\n  }\n)\n@withFullScreen\nexport class ArticleWithFullscreen extends React.Component<\n  ArticleProps,\n  ArticleState\n> {\n  static defaultProps = {\n    isMobile: false,\n    isSuper: false,\n    article: {},\n    isTruncated: false,\n  }\n\n  constructor(props) {\n    super(props)\n    const { fullscreenImages, article } = this.indexAndExtractImages()\n    this.state = {\n      fullscreenImages,\n      article,\n    }\n  }\n\n  indexAndExtractImages = () => {\n    const article = cloneDeep(this.props.article)\n    const fullscreenImages = []\n    let sectionIndex = 0\n\n    const newSections = map(article.sections, section => {\n      if (includes([\"image_collection\", \"image_set\"], section.type)) {\n        const newImages = map(section.images, image => {\n          image.setTitle = section.title\n          image.index = sectionIndex\n          fullscreenImages.push(image)\n          sectionIndex = sectionIndex + 1\n          return image\n        })\n        section.images = newImages\n      }\n      return section\n    })\n    article.sections = newSections\n    return { fullscreenImages, article }\n  }\n\n  render() {\n    const { article, fullscreenImages } = this.state\n    const { closeViewer, marginTop, slideIndex, viewerIsOpen } = this.props\n\n    const articleProps = extend(cloneDeep(this.props), { article, slideIndex })\n\n    return (\n      <ArticleContainer marginTop={marginTop}>\n        {article.layout === \"feature\" ? (\n          <FeatureLayout {...articleProps} />\n        ) : (\n          <StandardLayout {...articleProps} />\n        )}\n        <FullscreenViewer\n          onClose={closeViewer}\n          show={viewerIsOpen}\n          slideIndex={slideIndex}\n          images={fullscreenImages}\n        />\n      </ArticleContainer>\n    )\n  }\n}\n\nconst ArticleDiv: StyledFunction<\n  ArticleContainerProps & React.HTMLProps<HTMLDivElement>\n> =\n  styled.div\n\nconst ArticleContainer = ArticleDiv`\n  margin-top: ${props => props.marginTop || \"50px\"};\n`\n"]}]}