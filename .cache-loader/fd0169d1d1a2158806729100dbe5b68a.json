{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullScreen.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullScreen.tsx","mtime":1527880681000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1527877289000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ArticleWithFullScreen = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Events = _interopRequireDefault(require(\"../../../Utils/Events\"));\n\nvar _track = _interopRequireDefault(require(\"../../../Utils/track\"));\n\nvar _FullscreenViewer = require(\"../Sections/FullscreenViewer/FullscreenViewer\");\n\nvar _withFullScreen = require(\"../Sections/FullscreenViewer/withFullScreen\");\n\nvar _FeatureLayout = require(\"./FeatureLayout\");\n\nvar _StandardLayout = require(\"./StandardLayout\");\n\nvar _ToolTipsDataLoader = require(\"../ToolTip/ToolTipsDataLoader\");\n\nvar _dec, _class;\n\nvar _templateObject = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  margin-top: \", \";\\n\"], [\"\\n  margin-top: \", \";\\n\"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nvar ArticleWithFullScreen = (_dec = (0, _track.default)(function (props) {\n  return {\n    page: \"Article\",\n    entity_type: \"article\",\n    entity_id: props.article.id\n  };\n}, {\n  dispatch: function dispatch(data) {\n    return _Events.default.postEvent(data);\n  }\n}), _dec(_class = (0, _withFullScreen.withFullScreen)(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ArticleWithFullScreen, _React$Component);\n\n  function ArticleWithFullScreen(props) {\n    var _this;\n\n    _classCallCheck(this, ArticleWithFullScreen);\n\n    _this = _possibleConstructorReturn(this, (ArticleWithFullScreen.__proto__ || Object.getPrototypeOf(ArticleWithFullScreen)).call(this, props));\n\n    _initialiseProps.call(_assertThisInitialized(_this));\n\n    var _this$indexAndExtract = _this.indexAndExtractImages(),\n        fullscreenImages = _this$indexAndExtract.fullscreenImages,\n        article = _this$indexAndExtract.article;\n\n    _this.state = {\n      fullscreenImages: fullscreenImages,\n      article: article\n    };\n    return _this;\n  }\n\n  _createClass(ArticleWithFullScreen, [{\n    key: \"render\",\n    value: function render() {\n      var _state = this.state,\n          article = _state.article,\n          fullscreenImages = _state.fullscreenImages;\n      var _props = this.props,\n          closeViewer = _props.closeViewer,\n          marginTop = _props.marginTop,\n          showToolTips = _props.showToolTips,\n          slideIndex = _props.slideIndex,\n          viewerIsOpen = _props.viewerIsOpen,\n          onOpenAuthModal = _props.onOpenAuthModal;\n      var articleProps = (0, _lodash.extend)((0, _lodash.cloneDeep)(this.props), {\n        article: article,\n        slideIndex: slideIndex\n      });\n      return _react.default.createElement(_ToolTipsDataLoader.ToolTipsData, {\n        article: article,\n        shouldFetchData: showToolTips,\n        onOpenAuthModal: onOpenAuthModal\n      }, _react.default.createElement(ArticleContainer, {\n        marginTop: marginTop\n      }, article.layout === \"feature\" ? _react.default.createElement(_FeatureLayout.FeatureLayout, articleProps) : _react.default.createElement(_StandardLayout.StandardLayout, articleProps), _react.default.createElement(_FullscreenViewer.FullscreenViewer, {\n        onClose: closeViewer,\n        show: viewerIsOpen,\n        slideIndex: slideIndex,\n        images: fullscreenImages\n      })));\n    }\n  }]);\n\n  return ArticleWithFullScreen;\n}(_react.default.Component)) || _class) || _class);\nexports.ArticleWithFullScreen = ArticleWithFullScreen;\nObject.defineProperty(ArticleWithFullScreen, \"defaultProps\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: {\n    isMobile: false,\n    isSuper: false,\n    article: {},\n    isTruncated: false,\n    showToolTips: false,\n    showToolTipMarketData: false\n  }\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  Object.defineProperty(this, \"indexAndExtractImages\", {\n    configurable: true,\n    enumerable: true,\n    writable: true,\n    value: function value() {\n      var article = (0, _lodash.cloneDeep)(_this2.props.article);\n      var fullscreenImages = [];\n      var sectionIndex = 0;\n      var newSections = (0, _lodash.map)(article.sections, function (section) {\n        if ((0, _lodash.includes)([\"image_collection\", \"image_set\"], section.type)) {\n          var newImages = (0, _lodash.map)(section.images, function (image) {\n            image.setTitle = section.title;\n            image.index = sectionIndex;\n            fullscreenImages.push(image);\n            sectionIndex = sectionIndex + 1;\n            return image;\n          });\n          section.images = newImages;\n        }\n\n        return section;\n      });\n      article.sections = newSections;\n      return {\n        fullscreenImages: fullscreenImages,\n        article: article\n      };\n    }\n  });\n};\n\nvar ArticleDiv = _styledComponents.default.div;\nvar ArticleContainer = ArticleDiv(_templateObject, function (props) {\n  return props.marginTop || \"50px\";\n});",{"version":3,"sources":["src/Components/Publishing/Layouts/ArticleWithFullScreen.tsx"],"names":["ArticleWithFullScreen","page","entity_type","entity_id","props","article","id","dispatch","postEvent","data","indexAndExtractImages","fullscreenImages","state","closeViewer","marginTop","showToolTips","slideIndex","viewerIsOpen","onOpenAuthModal","articleProps","layout","Component","isMobile","isSuper","isTruncated","showToolTipMarketData","sectionIndex","newSections","sections","section","type","newImages","images","image","setTitle","title","index","push","ArticleDiv","div","ArticleContainer"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;IAwBaA,qB,WAbZ,oBACC,iBAAS;AACP,SAAO;AACLC,UAAM,SADD;AAELC,iBAAa,SAFR;AAGLC,eAAWC,MAAMC,OAAN,CAAcC;AAHpB,GAAP;AAKD,CAPF,EAQC;AACEC,YAAU;AAAA,WAAQ,gBAAOC,SAAP,CAAiBC,IAAjB,CAAR;AAAA;AADZ,CARD,C;;;;;AA0BC,iCAAYL,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,0IAAMA,KAAN;;AADiB;;AAAA,gCAEqB,MAAKM,qBAAL,EAFrB;AAAA,QAETC,gBAFS,yBAETA,gBAFS;AAAA,QAESN,OAFT,yBAESA,OAFT;;AAGjB,UAAKO,KAAL,GAAa;AACXD,wCADW;AAEXN;AAFW,KAAb;AAHiB;AAOlB;;;;6BAwBQ;AAAA,mBAC+B,KAAKO,KADpC;AAAA,UACCP,OADD,UACCA,OADD;AAAA,UACUM,gBADV,UACUA,gBADV;AAAA,mBASH,KAAKP,KATF;AAAA,UAGLS,WAHK,UAGLA,WAHK;AAAA,UAILC,SAJK,UAILA,SAJK;AAAA,UAKLC,YALK,UAKLA,YALK;AAAA,UAMLC,UANK,UAMLA,UANK;AAAA,UAOLC,YAPK,UAOLA,YAPK;AAAA,UAQLC,eARK,UAQLA,eARK;AAWP,UAAMC,eAAe,oBAAO,uBAAU,KAAKf,KAAf,CAAP,EAA8B;AAAEC,wBAAF;AAAWW;AAAX,OAA9B,CAArB;AAEA,aACE;AACE,iBAASX,OADX;AAEE,yBAAiBU,YAFnB;AAGE,yBAAiBG;AAHnB,SAKE,6BAAC,gBAAD;AAAkB,mBAAWJ;AAA7B,SACGT,QAAQe,MAAR,KAAmB,SAAnB,GACC,2DAAmBD,YAAnB,CADD,GAGC,6DAAoBA,YAApB,CAJJ,EAME;AACE,iBAASN,WADX;AAEE,cAAMI,YAFR;AAGE,oBAAYD,UAHd;AAIE,gBAAQL;AAJV,QANF,CALF,CADF;AAqBD;;;;EA9EwC,eAAMU,S;;sBAApCrB,qB;;;;SAIW;AACpBsB,cAAU,KADU;AAEpBC,aAAS,KAFW;AAGpBlB,aAAS,EAHW;AAIpBmB,iBAAa,KAJO;AAKpBT,kBAAc,KALM;AAMpBU,2BAAuB;AANH;;;;;;;;;;WAkBE,iBAAM;AAC5B,UAAMpB,UAAU,uBAAU,OAAKD,KAAL,CAAWC,OAArB,CAAhB;AACA,UAAMM,mBAAmB,EAAzB;AACA,UAAIe,eAAe,CAAnB;AAEA,UAAMC,cAAc,iBAAItB,QAAQuB,QAAZ,EAAsB,mBAAW;AACnD,YAAI,sBAAS,CAAC,kBAAD,EAAqB,WAArB,CAAT,EAA4CC,QAAQC,IAApD,CAAJ,EAA+D;AAC7D,cAAMC,YAAY,iBAAIF,QAAQG,MAAZ,EAAoB,iBAAS;AAC7CC,kBAAMC,QAAN,GAAiBL,QAAQM,KAAzB;AACAF,kBAAMG,KAAN,GAAcV,YAAd;AACAf,6BAAiB0B,IAAjB,CAAsBJ,KAAtB;AACAP,2BAAeA,eAAe,CAA9B;AACA,mBAAOO,KAAP;AACD,WANiB,CAAlB;AAOAJ,kBAAQG,MAAR,GAAiBD,SAAjB;AACD;;AACD,eAAOF,OAAP;AACD,OAZmB,CAApB;AAaAxB,cAAQuB,QAAR,GAAmBD,WAAnB;AACA,aAAO;AAAEhB,0CAAF;AAAoBN;AAApB,OAAP;AACD;;;;AAuCH,IAAMiC,aAGJ,0BAAOC,GAHT;AAKA,IAAMC,mBAAmBF,UAAnB,kBACU;AAAA,SAASlC,MAAMU,SAAN,IAAmB,MAA5B;AAAA,CADV,CAAN","file":"/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullScreen.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import { cloneDeep, extend, includes, map } from \"lodash\"\nimport React from \"react\"\nimport styled, { StyledFunction } from \"styled-components\"\nimport Events from \"../../../Utils/Events\"\nimport track from \"../../../Utils/track\"\nimport { FullscreenViewer } from \"../Sections/FullscreenViewer/FullscreenViewer\"\nimport { withFullScreen } from \"../Sections/FullscreenViewer/withFullScreen\"\nimport { ArticleData } from \"../Typings\"\nimport { FeatureLayout } from \"./FeatureLayout\"\nimport { StandardLayout } from \"./StandardLayout\"\nimport { ToolTipsData } from \"../ToolTip/ToolTipsDataLoader\"\nimport { ArticleProps } from \"../Article\"\ninterface ArticleState {\n  fullscreenImages: any\n  article: ArticleData\n}\n\ninterface ArticleContainerProps {\n  marginTop?: string\n}\n\n@track(\n  props => {\n    return {\n      page: \"Article\",\n      entity_type: \"article\",\n      entity_id: props.article.id,\n    }\n  },\n  {\n    dispatch: data => Events.postEvent(data),\n  }\n)\n@withFullScreen\nexport class ArticleWithFullScreen extends React.Component<\n  ArticleProps,\n  ArticleState\n> {\n  static defaultProps = {\n    isMobile: false,\n    isSuper: false,\n    article: {},\n    isTruncated: false,\n    showToolTips: false,\n    showToolTipMarketData: false,\n  }\n\n  constructor(props) {\n    super(props)\n    const { fullscreenImages, article } = this.indexAndExtractImages()\n    this.state = {\n      fullscreenImages,\n      article,\n    }\n  }\n\n  indexAndExtractImages = () => {\n    const article = cloneDeep(this.props.article)\n    const fullscreenImages = []\n    let sectionIndex = 0\n\n    const newSections = map(article.sections, section => {\n      if (includes([\"image_collection\", \"image_set\"], section.type)) {\n        const newImages = map(section.images, image => {\n          image.setTitle = section.title\n          image.index = sectionIndex\n          fullscreenImages.push(image)\n          sectionIndex = sectionIndex + 1\n          return image\n        })\n        section.images = newImages\n      }\n      return section\n    })\n    article.sections = newSections\n    return { fullscreenImages, article }\n  }\n\n  render() {\n    const { article, fullscreenImages } = this.state\n    const {\n      closeViewer,\n      marginTop,\n      showToolTips,\n      slideIndex,\n      viewerIsOpen,\n      onOpenAuthModal,\n    } = this.props\n\n    const articleProps = extend(cloneDeep(this.props), { article, slideIndex })\n\n    return (\n      <ToolTipsData\n        article={article}\n        shouldFetchData={showToolTips}\n        onOpenAuthModal={onOpenAuthModal}\n      >\n        <ArticleContainer marginTop={marginTop}>\n          {article.layout === \"feature\" ? (\n            <FeatureLayout {...articleProps} />\n          ) : (\n            <StandardLayout {...articleProps} />\n          )}\n          <FullscreenViewer\n            onClose={closeViewer}\n            show={viewerIsOpen}\n            slideIndex={slideIndex}\n            images={fullscreenImages}\n          />\n        </ArticleContainer>\n      </ToolTipsData>\n    )\n  }\n}\n\nconst ArticleDiv: StyledFunction<\n  ArticleContainerProps & React.HTMLProps<HTMLDivElement>\n> =\n  styled.div\n\nconst ArticleContainer = ArticleDiv`\n  margin-top: ${props => props.marginTop || \"50px\"};\n`\n"]}]}