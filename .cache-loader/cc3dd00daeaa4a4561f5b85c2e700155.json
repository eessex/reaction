{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Artwork/Details.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Artwork/Details.tsx","mtime":1538070271000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { color, Sans, Spacer } from \"@artsy/palette\";\nimport { ContextConsumer } from \"../../Artsy\";\nimport React from \"react\"; // @ts-ignore\n\nimport { createFragmentContainer, graphql } from \"react-relay\";\nimport styled from \"styled-components\";\nimport TextLink from \"../TextLink\";\nvar TruncatedLine = styled.div.withConfig({\n  displayName: \"Details__TruncatedLine\",\n  componentId: \"s16w5d4l-0\"\n})([\"display:block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;\"]);\nexport var Details =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Details, _React$Component);\n\n  function Details() {\n    _classCallCheck(this, Details);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Details).apply(this, arguments));\n  }\n\n  _createClass(Details, [{\n    key: \"artistLine\",\n    value: function artistLine() {\n      var _this = this;\n\n      var _this$props$artwork = this.props.artwork,\n          cultural_maker = _this$props$artwork.cultural_maker,\n          artists = _this$props$artwork.artists;\n      var includeLinks = this.props.includeLinks;\n\n      if (cultural_maker) {\n        return React.createElement(TruncatedLine, null, React.createElement(\"strong\", null, cultural_maker));\n      } else if (artists && artists.length) {\n        var artistLine = artists.reduce(function (acc, artist, index) {\n          return acc.concat([\", \", includeLinks ? _this.link(artist.name, artist.href, artist.__id + \"-\" + index) : artist.name]);\n        }, []).slice(1);\n        return React.createElement(TruncatedLine, null, React.createElement(\"strong\", null, artistLine));\n      }\n    }\n  }, {\n    key: \"titleLine\",\n    value: function titleLine() {\n      var includeLinks = this.props.includeLinks;\n      var artworkText = React.createElement(React.Fragment, null, React.createElement(\"em\", null, this.props.artwork.title), this.props.artwork.date && \", \".concat(this.props.artwork.date));\n      var artworkTextWithLink = includeLinks ? React.createElement(TextLink, {\n        href: this.props.artwork.href\n      }, artworkText) : artworkText;\n      return React.createElement(TruncatedLine, null, artworkTextWithLink);\n    }\n  }, {\n    key: \"line\",\n    value: function line(text) {\n      return React.createElement(TruncatedLine, null, text);\n    }\n  }, {\n    key: \"link\",\n    value: function link(text, href, key) {\n      return React.createElement(TextLink, {\n        href: href,\n        key: key\n      }, text);\n    }\n  }, {\n    key: \"partnerLine\",\n    value: function partnerLine() {\n      if (this.props.artwork.collecting_institution) {\n        return this.line(this.props.artwork.collecting_institution);\n      } else if (this.props.artwork.partner) {\n        if (this.props.includeLinks) {\n          return React.createElement(TruncatedLine, null, React.createElement(TextLink, {\n            href: this.props.artwork.partner.href\n          }, this.props.artwork.partner.name));\n        } else {\n          return this.line(this.props.artwork.partner.name);\n        }\n      }\n    }\n  }, {\n    key: \"saleLine\",\n    value: function saleLine() {\n      var artwork = this.props.artwork;\n      var hasSaleMessage = artwork.sale_message && artwork.sale_message !== \"Contact For Price\";\n      var notInAuction = !(artwork.sale && artwork.sale.is_auction);\n\n      if (hasSaleMessage && notInAuction) {\n        return React.createElement(\"div\", null, artwork.sale_message);\n      }\n    }\n  }, {\n    key: \"saleInfoLine\",\n    value: function saleInfoLine() {\n      var artwork = this.props.artwork;\n      var sale = artwork.sale;\n      var inClosedAuction = sale && sale.is_auction && sale.is_closed;\n      return React.createElement(React.Fragment, null, React.createElement(Sans, {\n        style: {\n          display: \"inline\"\n        },\n        color: color(\"black100\"),\n        weight: \"medium\",\n        size: \"2\"\n      }, inClosedAuction ? \"Bidding closed\" : this.saleMessageOrBidInfo(), \" \"), React.createElement(Sans, {\n        style: {\n          display: \"inline\"\n        },\n        size: \"2\",\n        color: color(\"black60\")\n      }, !inClosedAuction && this.auctionInfo()), React.createElement(Spacer, {\n        mb: 0.3\n      }));\n    }\n  }, {\n    key: \"saleMessageOrBidInfo\",\n    value: function saleMessageOrBidInfo() {\n      var artwork = this.props.artwork;\n      var sale = artwork.sale;\n      var inRunningAuction = sale && sale.is_auction && !sale.is_closed;\n\n      if (inRunningAuction) {\n        var sa = artwork.sale_artwork;\n        return sa.highest_bid.display || sa.opening_bid.display;\n      } // TODO: Extract this sentence-cased version and apply everywhere.\n\n\n      if (artwork.sale_message === \"Contact For Price\") {\n        return \"Contact for price\";\n      }\n\n      return artwork.sale_message;\n    }\n  }, {\n    key: \"auctionInfo\",\n    value: function auctionInfo() {\n      var artwork = this.props.artwork;\n      var sale = artwork.sale;\n\n      if (sale) {\n        return \"(\".concat(sale.display_timely_at, \")\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(ContextConsumer, null, function (_ref) {\n        var user = _ref.user;\n        var enableLabFeature = user && user.lab_features && user.lab_features.includes(\"New Buy Now Flow\");\n        return React.createElement(React.Fragment, null, enableLabFeature && _this2.saleInfoLine(), _this2.artistLine(), _this2.titleLine(), _this2.partnerLine(), !enableLabFeature && _this2.props.showSaleLine && _this2.saleLine());\n      });\n    }\n  }]);\n\n  return Details;\n}(React.Component);\n\n_defineProperty(Details, \"defaultProps\", {\n  showSaleLine: true,\n  includeLinks: true\n});\n\nexport default createFragmentContainer(Details, {\n  artwork: function artwork() {\n    var node = require(\"../../__generated__/Details_artwork.graphql\");\n\n    if (node.hash && node.hash !== \"e0e2014a654a44aa66ac03435b60a897\") {\n      console.error(\"The definition of 'Details_artwork' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../__generated__/Details_artwork.graphql\");\n  }\n});",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Artwork/Details.tsx"],"names":["color","Sans","Spacer","ContextConsumer","React","createFragmentContainer","graphql","styled","TextLink","TruncatedLine","div","Details","props","artwork","cultural_maker","artists","includeLinks","length","artistLine","reduce","acc","artist","index","concat","link","name","href","__id","slice","artworkText","title","date","artworkTextWithLink","text","key","collecting_institution","line","partner","hasSaleMessage","sale_message","notInAuction","sale","is_auction","inClosedAuction","is_closed","display","saleMessageOrBidInfo","auctionInfo","inRunningAuction","sa","sale_artwork","highest_bid","opening_bid","display_timely_at","user","enableLabFeature","lab_features","includes","saleInfoLine","titleLine","partnerLine","showSaleLine","saleLine","Component"],"mappings":"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","sourcesContent":["import { color, Sans, Spacer } from \"@artsy/palette\"\nimport { Details_artwork } from \"__generated__/Details_artwork.graphql\"\nimport { ContextConsumer } from \"Artsy\"\nimport React from \"react\"\n// @ts-ignore\nimport { ComponentRef, createFragmentContainer, graphql } from \"react-relay\"\nimport styled from \"styled-components\"\nimport TextLink from \"../TextLink\"\n\nconst TruncatedLine = styled.div`\n  display: block;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n`\n\nexport interface Props extends React.HTMLProps<Details> {\n  showSaleLine: boolean\n  includeLinks: boolean\n  artwork: Details_artwork\n}\n\nexport class Details extends React.Component<Props, null> {\n  static defaultProps = {\n    showSaleLine: true,\n    includeLinks: true,\n  }\n\n  artistLine() {\n    const { cultural_maker, artists } = this.props.artwork\n    const { includeLinks } = this.props\n\n    if (cultural_maker) {\n      return (\n        <TruncatedLine>\n          <strong>{cultural_maker}</strong>\n        </TruncatedLine>\n      )\n    } else if (artists && artists.length) {\n      const artistLine = artists\n        .reduce((acc, artist, index) => {\n          return acc.concat([\n            \", \",\n            includeLinks\n              ? this.link(artist.name, artist.href, artist.__id + \"-\" + index)\n              : artist.name,\n          ])\n        }, [])\n        .slice(1)\n      return (\n        <TruncatedLine>\n          <strong>{artistLine}</strong>\n        </TruncatedLine>\n      )\n    }\n  }\n\n  titleLine() {\n    const { includeLinks } = this.props\n    const artworkText = (\n      <>\n        <em>{this.props.artwork.title}</em>\n        {this.props.artwork.date && `, ${this.props.artwork.date}`}\n      </>\n    )\n    const artworkTextWithLink = includeLinks ? (\n      <TextLink href={this.props.artwork.href}>{artworkText}</TextLink>\n    ) : (\n      artworkText\n    )\n    return <TruncatedLine>{artworkTextWithLink}</TruncatedLine>\n  }\n\n  line(text) {\n    return <TruncatedLine>{text}</TruncatedLine>\n  }\n\n  link(text, href, key) {\n    return (\n      <TextLink href={href} key={key}>\n        {text}\n      </TextLink>\n    )\n  }\n\n  partnerLine() {\n    if (this.props.artwork.collecting_institution) {\n      return this.line(this.props.artwork.collecting_institution)\n    } else if (this.props.artwork.partner) {\n      if (this.props.includeLinks) {\n        return (\n          <TruncatedLine>\n            <TextLink href={this.props.artwork.partner.href}>\n              {this.props.artwork.partner.name}\n            </TextLink>\n          </TruncatedLine>\n        )\n      } else {\n        return this.line(this.props.artwork.partner.name)\n      }\n    }\n  }\n\n  saleLine() {\n    const artwork = this.props.artwork\n    const hasSaleMessage =\n      artwork.sale_message && artwork.sale_message !== \"Contact For Price\"\n    const notInAuction = !(artwork.sale && artwork.sale.is_auction)\n    if (hasSaleMessage && notInAuction) {\n      return <div>{artwork.sale_message}</div>\n    }\n  }\n\n  saleInfoLine() {\n    const { artwork } = this.props\n    const { sale } = artwork\n    const inClosedAuction = sale && sale.is_auction && sale.is_closed\n\n    return (\n      <>\n        <Sans\n          style={{ display: \"inline\" }}\n          color={color(\"black100\")}\n          weight={\"medium\"}\n          size={\"2\"}\n        >\n          {inClosedAuction ? \"Bidding closed\" : this.saleMessageOrBidInfo()}{\" \"}\n        </Sans>\n        <Sans style={{ display: \"inline\" }} size={\"2\"} color={color(\"black60\")}>\n          {!inClosedAuction && this.auctionInfo()}\n        </Sans>\n        <Spacer mb={0.3} />\n      </>\n    )\n  }\n\n  saleMessageOrBidInfo() {\n    const { artwork } = this.props\n    const { sale } = artwork\n    const inRunningAuction = sale && sale.is_auction && !sale.is_closed\n\n    if (inRunningAuction) {\n      const sa = artwork.sale_artwork\n      return sa.highest_bid.display || sa.opening_bid.display\n    }\n\n    // TODO: Extract this sentence-cased version and apply everywhere.\n    if (artwork.sale_message === \"Contact For Price\") {\n      return \"Contact for price\"\n    }\n\n    return artwork.sale_message\n  }\n\n  auctionInfo() {\n    const { artwork } = this.props\n    const { sale } = artwork\n\n    if (sale) {\n      return `(${sale.display_timely_at})`\n    }\n  }\n\n  render() {\n    return (\n      <ContextConsumer>\n        {({ user }) => {\n          const enableLabFeature =\n            user &&\n            user.lab_features &&\n            user.lab_features.includes(\"New Buy Now Flow\")\n          return (\n            <>\n              {enableLabFeature && this.saleInfoLine()}\n              {this.artistLine()}\n              {this.titleLine()}\n              {this.partnerLine()}\n              {!enableLabFeature && this.props.showSaleLine && this.saleLine()}\n            </>\n          )\n        }}\n      </ContextConsumer>\n    )\n  }\n}\n\nexport default createFragmentContainer<Props>(\n  Details,\n  graphql`\n    fragment Details_artwork on Artwork {\n      href\n      title\n      date\n      sale_message\n      cultural_maker\n      artists(shallow: true) {\n        __id\n        href\n        name\n      }\n      collecting_institution\n      partner(shallow: true) {\n        name\n        href\n      }\n      sale {\n        is_auction\n        is_live_open\n        is_open\n        is_closed\n        display_timely_at\n      }\n      sale_artwork {\n        highest_bid {\n          display\n        }\n        opening_bid {\n          display\n        }\n      }\n    }\n  `\n)\n"]}]}