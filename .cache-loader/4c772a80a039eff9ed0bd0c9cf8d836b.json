{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Artist/MarketDataSummary/MarketDataSummary.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Artist/MarketDataSummary/MarketDataSummary.tsx","mtime":1529688806000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _groupBy from \"lodash/groupBy\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport { unica } from \"../../../Assets/Fonts\";\nimport * as React from \"react\"; // @ts-ignore\n\nimport { createFragmentContainer, graphql } from \"react-relay\"; // @ts-ignore\n\nimport styled from \"styled-components\";\nexport var MarketDataSummaryContainer = styled.div.withConfig({\n  displayName: \"MarketDataSummary__MarketDataSummaryContainer\",\n  componentId: \"vkk0cf-0\"\n})([\"\", \";\"], unica(\"s14\"));\nvar Categories = {\n  \"blue-chip\": \"Blue Chip\",\n  \"top-established\": \"Top Established\",\n  \"top-emerging\": \"Top Emerging\"\n};\nvar orderedCategories = [\"blue-chip\", \"top-established\", \"top-emerging\"];\nexport var MarketDataSummary =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MarketDataSummary, _React$Component);\n\n  function MarketDataSummary() {\n    _classCallCheck(this, MarketDataSummary);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MarketDataSummary).apply(this, arguments));\n  }\n\n  _createClass(MarketDataSummary, [{\n    key: \"renderGalleryCategory\",\n    value: function renderGalleryCategory(categorySlug, partnerCount) {\n      var introSentence;\n      var category = Categories[categorySlug];\n\n      if (partnerCount > 1) {\n        introSentence = \"Represented by \" + category.toLowerCase() + \" galleries\";\n      } else {\n        introSentence = \"Represented by a \" + category.toLowerCase() + \" gallery\";\n      }\n\n      return React.createElement(\"div\", null, introSentence);\n    }\n  }, {\n    key: \"hasSections\",\n    value: function hasSections() {\n      var _this$props$artist = this.props.artist,\n          highlights = _this$props$artist.highlights,\n          auctionResults = _this$props$artist.auctionResults,\n          collections = _this$props$artist.collections;\n      var partners = highlights.partners; // Is there a gallery representation section?\n\n      if (partners && partners.edges && partners.edges.length > 0) {\n        return true;\n      } // Is there an auction highlights section?\n\n\n      if (auctionResults && auctionResults.edges && auctionResults.edges.length > 0) {\n        return true;\n      } // Is there a permanent collections section?\n\n\n      if (collections && collections.length > 0) {\n        return true;\n      }\n\n      return false;\n    } // We group all partners that represent an artist by their relevant category, from the list above.\n    // Display the highest category string for all the partners that represent the artist\n\n  }, {\n    key: \"renderGalleryRepresentation\",\n    value: function renderGalleryRepresentation() {\n      var highlights = this.props.artist.highlights;\n      var partners = highlights.partners;\n\n      if (partners && partners.edges && partners.edges.length > 0) {\n        var groupedByCategory = _groupBy(partners.edges, function (_ref) {\n          var partner = _ref.node;\n          var category;\n          Object.keys(Categories).forEach(function (key) {\n            partner.categories.forEach(function (partnerCategory) {\n              if (partnerCategory.id === key) {\n                category = key;\n              }\n            });\n          });\n          return category;\n        });\n\n        var highestCategory = orderedCategories.filter(function (category) {\n          return groupedByCategory[category] && groupedByCategory[category].length > 0;\n        })[0];\n        return React.createElement(\"div\", null, this.renderGalleryCategory(highestCategory, groupedByCategory[highestCategory].length));\n      }\n    }\n  }, {\n    key: \"renderAuctionHighlight\",\n    value: function renderAuctionHighlight() {\n      if (!this.props.artist.auctionResults || this.props.artist.auctionResults.edges.length < 1) {\n        return null;\n      }\n\n      var topAuctionResult = this.props.artist.auctionResults.edges[0].node;\n      return React.createElement(\"div\", null, topAuctionResult.price_realized.display, \" auction record\");\n    }\n  }, {\n    key: \"renderPermanentCollection\",\n    value: function renderPermanentCollection() {\n      var collections = this.props.artist.collections;\n\n      if (!collections || collections.length === 0) {\n        return null;\n      }\n\n      if (collections.length === 1) {\n        return React.createElement(\"div\", null, \"Collected by a major museum\");\n      }\n\n      return React.createElement(\"div\", null, \"Collected by major museums\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var onEmptyText = this.props.onEmptyText;\n\n      if (this.hasSections()) {\n        return React.createElement(MarketDataSummaryContainer, null, this.renderAuctionHighlight(), this.renderGalleryRepresentation(), this.renderPermanentCollection());\n      } else if (onEmptyText) {\n        return React.createElement(MarketDataSummaryContainer, null, onEmptyText);\n      }\n\n      return null;\n    }\n  }]);\n\n  return MarketDataSummary;\n}(React.Component);\nexport default createFragmentContainer(MarketDataSummary, {\n  artist: function artist() {\n    var node = require(\"../../../__generated__/MarketDataSummary_artist.graphql\");\n\n    if (node.hash && node.hash !== \"04d6d58696b4cf04d800e6706066c9f8\") {\n      console.error(\"The definition of 'MarketDataSummary_artist' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../../__generated__/MarketDataSummary_artist.graphql\");\n  }\n});",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Artist/MarketDataSummary/MarketDataSummary.tsx"],"names":["unica","React","createFragmentContainer","graphql","styled","MarketDataSummaryContainer","div","Categories","orderedCategories","MarketDataSummary","categorySlug","partnerCount","introSentence","category","toLowerCase","props","artist","highlights","auctionResults","collections","partners","edges","length","groupedByCategory","partner","node","Object","keys","forEach","key","categories","partnerCategory","id","highestCategory","filter","renderGalleryCategory","topAuctionResult","price_realized","display","onEmptyText","hasSections","renderAuctionHighlight","renderGalleryRepresentation","renderPermanentCollection","Component"],"mappings":"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","sourcesContent":["import { unica } from \"Assets/Fonts\"\nimport { groupBy } from \"lodash\"\nimport * as React from \"react\"\n// @ts-ignore\nimport { ComponentRef, createFragmentContainer, graphql } from \"react-relay\"\n// @ts-ignore\nimport styled, { StyledComponentClass } from \"styled-components\"\n\nexport const MarketDataSummaryContainer = styled.div`\n  ${unica(\"s14\")};\n`\nimport { MarketDataSummary_artist } from \"../../../__generated__/MarketDataSummary_artist.graphql\"\nexport interface Props extends React.HTMLProps<MarketDataSummary> {\n  artist: MarketDataSummary_artist\n  onEmptyText?: string\n}\n\nconst Categories = {\n  \"blue-chip\": \"Blue Chip\",\n  \"top-established\": \"Top Established\",\n  \"top-emerging\": \"Top Emerging\",\n}\nconst orderedCategories = [\"blue-chip\", \"top-established\", \"top-emerging\"]\n\nexport class MarketDataSummary extends React.Component<Props, null> {\n  renderGalleryCategory(categorySlug, partnerCount) {\n    let introSentence\n    const category = Categories[categorySlug]\n    if (partnerCount > 1) {\n      introSentence = \"Represented by \" + category.toLowerCase() + \" galleries\"\n    } else {\n      introSentence = \"Represented by a \" + category.toLowerCase() + \" gallery\"\n    }\n    return <div>{introSentence}</div>\n  }\n\n  hasSections() {\n    const { highlights, auctionResults, collections } = this.props.artist\n    const { partners } = highlights\n\n    // Is there a gallery representation section?\n    if (partners && partners.edges && partners.edges.length > 0) {\n      return true\n    }\n\n    // Is there an auction highlights section?\n    if (\n      auctionResults &&\n      auctionResults.edges &&\n      auctionResults.edges.length > 0\n    ) {\n      return true\n    }\n\n    // Is there a permanent collections section?\n    if (collections && collections.length > 0) {\n      return true\n    }\n\n    return false\n  }\n\n  // We group all partners that represent an artist by their relevant category, from the list above.\n  // Display the highest category string for all the partners that represent the artist\n  renderGalleryRepresentation() {\n    const { highlights } = this.props.artist\n    const { partners } = highlights\n    if (partners && partners.edges && partners.edges.length > 0) {\n      const groupedByCategory = groupBy(partners.edges, ({ node: partner }) => {\n        let category\n        Object.keys(Categories).forEach(key => {\n          partner.categories.forEach(partnerCategory => {\n            if (partnerCategory.id === key) {\n              category = key\n            }\n          })\n        })\n        return category\n      })\n\n      const highestCategory = orderedCategories.filter(\n        category =>\n          groupedByCategory[category] && groupedByCategory[category].length > 0\n      )[0]\n\n      return (\n        <div>\n          {this.renderGalleryCategory(\n            highestCategory,\n            groupedByCategory[highestCategory].length\n          )}\n        </div>\n      )\n    }\n  }\n\n  renderAuctionHighlight() {\n    if (\n      !this.props.artist.auctionResults ||\n      this.props.artist.auctionResults.edges.length < 1\n    ) {\n      return null\n    }\n    const topAuctionResult = this.props.artist.auctionResults.edges[0].node\n    return <div>{topAuctionResult.price_realized.display} auction record</div>\n  }\n\n  renderPermanentCollection() {\n    const { collections } = this.props.artist\n    if (!collections || collections.length === 0) {\n      return null\n    }\n    if (collections.length === 1) {\n      return <div>Collected by a major museum</div>\n    }\n    return <div>Collected by major museums</div>\n  }\n\n  render() {\n    const { onEmptyText } = this.props\n\n    if (this.hasSections()) {\n      return (\n        <MarketDataSummaryContainer>\n          {this.renderAuctionHighlight()}\n          {this.renderGalleryRepresentation()}\n          {this.renderPermanentCollection()}\n        </MarketDataSummaryContainer>\n      )\n    } else if (onEmptyText) {\n      return (\n        <MarketDataSummaryContainer>{onEmptyText}</MarketDataSummaryContainer>\n      )\n    }\n    return null\n  }\n}\n\nexport default createFragmentContainer(\n  MarketDataSummary,\n  graphql`\n    fragment MarketDataSummary_artist on Artist\n      @argumentDefinitions(\n        partner_category: {\n          type: \"[String]\"\n          defaultValue: [\"blue-chip\", \"top-established\", \"top-emerging\"]\n        }\n      ) {\n      _id\n      collections\n      highlights {\n        partners(\n          first: 10\n          display_on_partner_profile: true\n          represented_by: true\n          partner_category: $partner_category\n        ) {\n          edges {\n            node {\n              categories {\n                id\n              }\n            }\n          }\n        }\n      }\n      auctionResults(\n        recordsTrusted: true\n        first: 1\n        sort: PRICE_AND_DATE_DESC\n      ) {\n        edges {\n          node {\n            price_realized {\n              display(format: \"0a\")\n            }\n          }\n        }\n      }\n    }\n  `\n)\n"]}]}