{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/index.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/index.tsx","mtime":1532964575000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _get from \"lodash/get\";\n\nvar _dec, _dec2, _dec3, _class, _class2;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    margin: 35px 0 10px 0;\\n  \"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  \", \"\\n  color: \", \";\\n  margin: 15px 0 0 0;\\n  \", \"\\n  \", \"\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  min-height: fit-content;\\n  max-width: \", \"\\n  margin: 0 auto;\\n  box-sizing: border-box;\\n  a {\\n    text-decoration: none;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object['ke' + 'ys'](descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object['define' + 'Property'](target, property, desc); desc = null; } return desc; }\n\nimport { color } from \"@artsy/palette\";\nimport { avantgarde, garamond } from \"../../../../Assets/Fonts\";\nimport React from \"react\";\nimport track from \"react-tracking\";\nimport Waypoint from \"react-waypoint\";\nimport styled from \"styled-components\";\nimport { ErrorBoundary } from \"../../../ErrorBoundary\";\nimport { pMedia } from \"../../../Helpers\";\nimport { getCurrentUnixTimestamp } from \"../../Constants\";\nimport { PixelTracker, replaceWithCacheBuster } from \"../ExternalTrackers\";\nimport { trackImpression, trackViewability } from \"../track-once\";\nimport { CanvasContainer, unitLayout } from \"./CanvasContainer\";\nexport var DisplayCanvas = (_dec = track(), _dec2 = trackImpression(function (props) {\n  return unitLayout(props);\n}), _dec3 = trackViewability(function (props) {\n  return unitLayout(props);\n}), _dec(_class = (_class2 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DisplayCanvas, _React$Component);\n\n  function DisplayCanvas(props) {\n    var _this;\n\n    _classCallCheck(this, DisplayCanvas);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DisplayCanvas).call(this, props));\n    _this.trackViewability = _this.trackViewability.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.trackImpression = _this.trackImpression.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(DisplayCanvas, [{\n    key: \"trackImpression\",\n    value: function trackImpression() {// noop\n    }\n  }, {\n    key: \"trackViewability\",\n    value: function trackViewability() {// noop\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          unit = _this$props.unit,\n          campaign = _this$props.campaign,\n          article = _this$props.article,\n          renderTime = _this$props.renderTime;\n      var url = unit.link ? _get(unit, \"link.url\", \"\") : \"\";\n      var disclaimer = React.createElement(Disclaimer, {\n        layout: unit.layout\n      }, unit.disclaimer);\n      return React.createElement(ErrorBoundary, null, React.createElement(DisplayContainer, {\n        layout: unit.layout\n      }, React.createElement(Waypoint, {\n        onEnter: this.trackImpression\n      }), React.createElement(Waypoint, {\n        bottomOffset: \"50%\",\n        onEnter: this.trackViewability\n      }), React.createElement(\"a\", {\n        href: replaceWithCacheBuster(url, getCurrentUnixTimestamp()),\n        target: \"_blank\"\n      }, React.createElement(SponsoredBy, null, \"Sponsored by \".concat(campaign.name))), React.createElement(CanvasContainer, {\n        unit: unit,\n        campaign: campaign,\n        article: article,\n        disclaimer: disclaimer\n      }), unit.layout === \"overlay\" && disclaimer, React.createElement(PixelTracker, {\n        unit: unit,\n        date: renderTime\n      })));\n    }\n  }]);\n\n  return DisplayCanvas;\n}(React.Component), (_applyDecoratedDescriptor(_class2.prototype, \"trackImpression\", [_dec2], Object.getOwnPropertyDescriptor(_class2.prototype, \"trackImpression\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"trackViewability\", [_dec3], Object.getOwnPropertyDescriptor(_class2.prototype, \"trackViewability\"), _class2.prototype)), _class2)) || _class);\nvar Div = styled.div;\nexport var DisplayContainer = Div(_templateObject(), function (props) {\n  return props.layout === \"slideshow\" ? \"100%;\" : \"1250px;\";\n});\nvar SponsoredBy = styled.div.withConfig({\n  displayName: \"Canvas__SponsoredBy\",\n  componentId: \"v4wc1d-0\"\n})([\"\", \";color:\", \";margin:10px 0;text-align:center;\"], avantgarde(\"s11\"), color(\"black30\"));\nvar Disclaimer = Div(_templateObject2(), garamond(\"s11\"), color(\"black30\"), function (props) {\n  return props.layout === \"overlay\" && \"text-align: center;\";\n}, pMedia.sm(_templateObject3()));",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/index.tsx"],"names":["color","avantgarde","garamond","React","track","Waypoint","styled","ErrorBoundary","pMedia","getCurrentUnixTimestamp","PixelTracker","replaceWithCacheBuster","trackImpression","trackViewability","CanvasContainer","unitLayout","DisplayCanvas","props","bind","unit","campaign","article","renderTime","url","link","disclaimer","layout","name","Component","Div","div","DisplayContainer","SponsoredBy","Disclaimer","sm"],"mappings":"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","sourcesContent":["import { color } from \"@artsy/palette\"\nimport { avantgarde, garamond } from \"Assets/Fonts\"\nimport { get } from \"lodash\"\nimport React from \"react\"\nimport track from \"react-tracking\"\nimport Waypoint from \"react-waypoint\"\nimport styled, { StyledFunction } from \"styled-components\"\nimport { ErrorBoundary } from \"../../../ErrorBoundary\"\nimport { pMedia } from \"../../../Helpers\"\nimport { getCurrentUnixTimestamp } from \"../../Constants\"\nimport { PixelTracker, replaceWithCacheBuster } from \"../ExternalTrackers\"\nimport { trackImpression, trackViewability } from \"../track-once\"\nimport { CanvasContainer, unitLayout } from \"./CanvasContainer\"\n\ninterface DisplayCanvasProps {\n  unit: any\n  campaign: any\n  article?: any\n  renderTime?: number\n}\n\ninterface DivProps extends React.HTMLProps<HTMLDivElement> {\n  layout: string\n}\n\n@track()\nexport class DisplayCanvas extends React.Component<DisplayCanvasProps> {\n  constructor(props) {\n    super(props)\n    this.trackViewability = this.trackViewability.bind(this)\n    this.trackImpression = this.trackImpression.bind(this)\n  }\n\n  @trackImpression(props => unitLayout(props))\n  trackImpression() {\n    // noop\n  }\n\n  @trackViewability(props => unitLayout(props))\n  trackViewability() {\n    // noop\n  }\n\n  render() {\n    const { unit, campaign, article, renderTime } = this.props\n    const url = unit.link ? get(unit, \"link.url\", \"\") : \"\"\n    const disclaimer = (\n      <Disclaimer layout={unit.layout}>{unit.disclaimer}</Disclaimer>\n    )\n\n    return (\n      <ErrorBoundary>\n        <DisplayContainer layout={unit.layout}>\n          <Waypoint onEnter={this.trackImpression} />\n          <Waypoint bottomOffset=\"50%\" onEnter={this.trackViewability} />\n\n          <a\n            href={replaceWithCacheBuster(url, getCurrentUnixTimestamp())}\n            target=\"_blank\"\n          >\n            <SponsoredBy>{`Sponsored by ${campaign.name}`}</SponsoredBy>\n          </a>\n\n          <CanvasContainer\n            unit={unit}\n            campaign={campaign}\n            article={article}\n            disclaimer={disclaimer}\n          />\n\n          {unit.layout === \"overlay\" && disclaimer}\n          <PixelTracker unit={unit} date={renderTime} />\n        </DisplayContainer>\n      </ErrorBoundary>\n    )\n  }\n}\n\nconst Div: StyledFunction<DivProps> = styled.div\n\nexport const DisplayContainer = Div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  min-height: fit-content;\n  max-width: ${props => (props.layout === \"slideshow\" ? \"100%;\" : \"1250px;\")}\n  margin: 0 auto;\n  box-sizing: border-box;\n  a {\n    text-decoration: none;\n  }\n`\nconst SponsoredBy = styled.div`\n  ${avantgarde(\"s11\")};\n  color: ${color(\"black30\")};\n  margin: 10px 0;\n  text-align: center;\n`\nconst Disclaimer = Div`\n  ${garamond(\"s11\")}\n  color: ${color(\"black30\")};\n  margin: 15px 0 0 0;\n  ${props => props.layout === \"overlay\" && \"text-align: center;\"}\n  ${pMedia.sm`\n    margin: 35px 0 10px 0;\n  `}\n`\n"]}]}