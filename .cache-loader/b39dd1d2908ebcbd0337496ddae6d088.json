{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/ArtworkFilter/Dropdown.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/ArtworkFilter/Dropdown.tsx","mtime":1524678459000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1527877289000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Dropdown = void 0;\n\nvar _numeral = _interopRequireDefault(require(\"numeral\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactRelay = require(\"react-relay\");\n\nvar _Icon = _interopRequireDefault(require(\"../Icon\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Colors = _interopRequireDefault(require(\"../../Assets/Colors\"));\n\nvar _Fonts = require(\"../../Assets/Fonts\");\n\nvar _ParamMap = require(\"./ParamMap\");\n\nvar _lodash = require(\"lodash\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Dropdown =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Dropdown, _React$Component);\n\n  function Dropdown(props) {\n    var _this;\n\n    _classCallCheck(this, Dropdown);\n\n    _this = _possibleConstructorReturn(this, (Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).call(this, props));\n    _this.state = {\n      isHovered: false,\n      selected: props.selected || {}\n    };\n    return _this;\n  }\n\n  _createClass(Dropdown, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setState({\n        selected: nextProps.selected\n      });\n    }\n  }, {\n    key: \"toggleHover\",\n    value: function toggleHover(value) {\n      this.setState({\n        isHovered: value\n      });\n    }\n  }, {\n    key: \"onSelect\",\n    value: function onSelect(slice, value) {\n      this.setState({\n        selected: value,\n        isHovered: false\n      });\n      this.props.onSelected(slice, value);\n    }\n  }, {\n    key: \"getSelectedName\",\n    value: function getSelectedName(id) {\n      var selectedCount = (0, _lodash.find)(this.props.aggregation.counts, function (count) {\n        return count.id === id;\n      });\n      return selectedCount ? selectedCount.name : null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var slice = this.props.aggregation.slice;\n\n      var labels = _ParamMap.labelMap[this.props.aggregation.slice.toLowerCase()];\n\n      var selectedName = this.getSelectedName(this.state.selected);\n      var navItems = this.props.aggregation.counts.map(function (count) {\n        return _react.default.createElement(NavItem, {\n          key: count.id,\n          onClick: function onClick() {\n            return _this2.onSelect(slice, count.id);\n          }\n        }, _react.default.createElement(\"span\", null, count.name), _react.default.createElement(NavItemCount, null, \"\\xA0(\", (0, _numeral.default)(count.count).format(\"0,0\"), \")\"));\n      });\n      navItems.unshift(_react.default.createElement(NavItem, {\n        key: \"all\",\n        onClick: function onClick() {\n          return _this2.onSelect(slice, \"*\");\n        }\n      }, _react.default.createElement(\"span\", null, \"All \", labels.plural)));\n      var buttonColor = \"white\";\n      var buttonTextColor = \"black\";\n      var superLabelColor = \"black\";\n      var navStyle = {\n        display: \"none\"\n      };\n\n      if (selectedName) {\n        buttonTextColor = _Colors.default.purpleRegular;\n      }\n\n      if (this.state.isHovered) {\n        buttonColor = \"black\";\n        buttonTextColor = \"white\";\n        superLabelColor = \"white\";\n        navStyle = {\n          display: \"block\"\n        };\n      }\n\n      var labelText = selectedName || labels.label;\n      var superLabelText = selectedName ? labels.label : null;\n      return _react.default.createElement(\"div\", {\n        className: this.props.className,\n        onMouseEnter: function onMouseEnter() {\n          return _this2.toggleHover(true);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return _this2.toggleHover(false);\n        }\n      }, _react.default.createElement(Button, {\n        style: {\n          backgroundColor: buttonColor,\n          color: buttonTextColor\n        }\n      }, superLabelText && _react.default.createElement(SuperLabel, {\n        style: {\n          color: superLabelColor\n        }\n      }, superLabelText), labelText, _react.default.createElement(_Icon.default, {\n        name: \"arrow-down\",\n        fontSize: \"9px\",\n        color: buttonTextColor,\n        style: {\n          position: \"absolute\",\n          right: 15,\n          lineHeight: \"inherit\"\n        }\n      })), _react.default.createElement(Nav, {\n        style: navStyle\n      }, navItems));\n    }\n  }]);\n\n  return Dropdown;\n}(_react.default.Component);\n\nexports.Dropdown = Dropdown;\n\nvar Button =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"Dropdown__Button\",\n  componentId: \"s14mtti6-0\"\n})([\"\", \";background:white;color:black;border:1px solid \", \";display:inline-block;line-height:160%;padding:15px 35px 15px 18px;vertical-align:middle;max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;\"], (0, _Fonts.avantgarde)(\"s13\"), _Colors.default.grayRegular);\n\nvar Nav =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"Dropdown__Nav\",\n  componentId: \"s14mtti6-1\"\n})([\"z-index:2;background:black;position:absolute;top:45px;left:1px;width:300px;border:1px solid #333;\"]);\n\nvar SuperLabel =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"Dropdown__SuperLabel\",\n  componentId: \"s14mtti6-2\"\n})([\"position:absolute;font-size:9px;margin-top:-15px;color:black;\"]);\n\nvar NavItem =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"Dropdown__NavItem\",\n  componentId: \"s14mtti6-3\"\n})([\"\", \";text-align:left;color:white;display:block;border-bottom:1px solid #333;padding:15px 18px 10px 18px;text-transform:capitalize;&:hover{background:\", \";}\"], (0, _Fonts.garamond)(\"s11\"), _Colors.default.grayBold);\n\nvar NavItemCount =\n/*#__PURE__*/\n_styledComponents.default.span.withConfig({\n  displayName: \"Dropdown__NavItemCount\",\n  componentId: \"s14mtti6-4\"\n})([\"color:\", \";\"], _Colors.default.graySemibold);\n\nvar StyledDropdown =\n/*#__PURE__*/\n(0, _styledComponents.default)(Dropdown).withConfig({\n  displayName: \"Dropdown__StyledDropdown\",\n  componentId: \"s14mtti6-5\"\n})([\"position:relative;display:inline-block;cursor:pointer;margin-left:-1px;\"]);\n\nvar _default = (0, _reactRelay.createFragmentContainer)(StyledDropdown, {\n  aggregation: function aggregation() {\n    var node = require(\"../../__generated__/Dropdown_aggregation.graphql\");\n\n    if (node.hash && node.hash !== \"94a2813381cb263e699c9a26e40fcece\") {\n      console.error(\"The definition of 'Dropdown_aggregation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../__generated__/Dropdown_aggregation.graphql\");\n  }\n});\n\nexports.default = _default;",{"version":3,"sources":["src/Components/ArtworkFilter/Dropdown.tsx"],"names":["Dropdown","props","state","isHovered","selected","nextProps","setState","value","slice","onSelected","id","selectedCount","aggregation","counts","count","name","labels","toLowerCase","selectedName","getSelectedName","navItems","map","onSelect","format","unshift","plural","buttonColor","buttonTextColor","superLabelColor","navStyle","display","purpleRegular","labelText","label","superLabelText","className","toggleHover","backgroundColor","color","position","right","lineHeight","Component","Button","div","grayRegular","Nav","SuperLabel","NavItem","grayBold","NavItemCount","span","graySemibold","StyledDropdown"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;IAaaA,Q;;;;;AACX,oBAAYC,KAAZ,EAAkC;AAAA;;AAAA;;AAChC,gHAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,iBAAW,KADA;AAEXC,gBAAUH,MAAMG,QAAN,IAAkB;AAFjB,KAAb;AAFgC;AAMjC;;;;8CAEyBC,S,EAAW;AACnC,WAAKC,QAAL,CAAc;AAAEF,kBAAUC,UAAUD;AAAtB,OAAd;AACD;;;gCAEWG,K,EAAO;AACjB,WAAKD,QAAL,CAAc;AACZH,mBAAWI;AADC,OAAd;AAGD;;;6BAEQC,K,EAAeD,K,EAAe;AACrC,WAAKD,QAAL,CAAc;AACZF,kBAAUG,KADE;AAEZJ,mBAAW;AAFC,OAAd;AAIA,WAAKF,KAAL,CAAWQ,UAAX,CAAsBD,KAAtB,EAA6BD,KAA7B;AACD;;;oCAEeG,E,EAAI;AAClB,UAAMC,gBAAgB,kBACpB,KAAKV,KAAL,CAAWW,WAAX,CAAuBC,MADH,EAEpB;AAAA,eAASC,MAAMJ,EAAN,KAAaA,EAAtB;AAAA,OAFoB,CAAtB;AAIA,aAAOC,gBAAgBA,cAAcI,IAA9B,GAAqC,IAA5C;AACD;;;6BAEQ;AAAA;;AACP,UAAMP,QAAQ,KAAKP,KAAL,CAAWW,WAAX,CAAuBJ,KAArC;;AACA,UAAMQ,SAAS,mBAAS,KAAKf,KAAL,CAAWW,WAAX,CAAuBJ,KAAvB,CAA6BS,WAA7B,EAAT,CAAf;;AACA,UAAMC,eAAe,KAAKC,eAAL,CAAqB,KAAKjB,KAAL,CAAWE,QAAhC,CAArB;AAEA,UAAIgB,WAAW,KAAKnB,KAAL,CAAWW,WAAX,CAAuBC,MAAvB,CAA8BQ,GAA9B,CAAkC,iBAAS;AACxD,eACE,6BAAC,OAAD;AAAS,eAAKP,MAAMJ,EAApB;AAAwB,mBAAS;AAAA,mBAAM,OAAKY,QAAL,CAAcd,KAAd,EAAqBM,MAAMJ,EAA3B,CAAN;AAAA;AAAjC,WACE,2CAAOI,MAAMC,IAAb,CADF,EAEE,6BAAC,YAAD,iBACU,sBAAQD,MAAMA,KAAd,EAAqBS,MAArB,CAA4B,KAA5B,CADV,MAFF,CADF;AAQD,OATc,CAAf;AAWAH,eAASI,OAAT,CACE,6BAAC,OAAD;AAAS,aAAI,KAAb;AAAmB,iBAAS;AAAA,iBAAM,OAAKF,QAAL,CAAcd,KAAd,EAAqB,GAArB,CAAN;AAAA;AAA5B,SACE,mDAAWQ,OAAOS,MAAlB,CADF,CADF;AAMA,UAAIC,cAAc,OAAlB;AACA,UAAIC,kBAAkB,OAAtB;AACA,UAAIC,kBAAkB,OAAtB;AACA,UAAIC,WAAW;AAAEC,iBAAS;AAAX,OAAf;;AAEA,UAAIZ,YAAJ,EAAkB;AAChBS,0BAAkB,gBAAOI,aAAzB;AACD;;AAED,UAAI,KAAK7B,KAAL,CAAWC,SAAf,EAA0B;AACxBuB,sBAAc,OAAd;AACAC,0BAAkB,OAAlB;AACAC,0BAAkB,OAAlB;AACAC,mBAAW;AAAEC,mBAAS;AAAX,SAAX;AACD;;AAED,UAAME,YAAYd,gBAAgBF,OAAOiB,KAAzC;AACA,UAAMC,iBAAiBhB,eAAeF,OAAOiB,KAAtB,GAA8B,IAArD;AAEA,aACE;AACE,mBAAW,KAAKhC,KAAL,CAAWkC,SADxB;AAEE,sBAAc;AAAA,iBAAM,OAAKC,WAAL,CAAiB,IAAjB,CAAN;AAAA,SAFhB;AAGE,sBAAc;AAAA,iBAAM,OAAKA,WAAL,CAAiB,KAAjB,CAAN;AAAA;AAHhB,SAKE,6BAAC,MAAD;AACE,eAAO;AAAEC,2BAAiBX,WAAnB;AAAgCY,iBAAOX;AAAvC;AADT,SAGGO,kBACC,6BAAC,UAAD;AAAY,eAAO;AAAEI,iBAAOV;AAAT;AAAnB,SACGM,cADH,CAJJ,EAQGF,SARH,EASE;AACE,cAAK,YADP;AAEE,kBAAS,KAFX;AAGE,eAAOL,eAHT;AAIE,eAAO;AAAEY,oBAAU,UAAZ;AAAwBC,iBAAO,EAA/B;AAAmCC,sBAAY;AAA/C;AAJT,QATF,CALF,EAqBE,6BAAC,GAAD;AAAK,eAAOZ;AAAZ,SAAuBT,QAAvB,CArBF,CADF;AAyBD;;;;EArG2B,eAAMsB,S;;;;AAwGpC,IAAMC;AAAA;AAAS,0BAAOC,GAAhB;AAAA;AAAA;AAAA,mOACF,uBAAW,KAAX,CADE,EAIgB,gBAAOC,WAJvB,CAAN;;AAeA,IAAMC;AAAA;AAAM,0BAAOF,GAAb;AAAA;AAAA;AAAA,yGAAN;;AAUA,IAAMG;AAAA;AAAa,0BAAOH,GAApB;AAAA;AAAA;AAAA,qEAAN;;AAOA,IAAMI;AAAA;AAAU,0BAAOJ,GAAjB;AAAA;AAAA;AAAA,oKACF,qBAAS,KAAT,CADE,EASY,gBAAOK,QATnB,CAAN;;AAYA,IAAMC;AAAA;AAAe,0BAAOC,IAAtB;AAAA;AAAA;AAAA,oBACK,gBAAOC,YADZ,CAAN;;AAIA,IAAMC;AAAA;AAAiB,+BAAOrD,QAAP,CAAjB;AAAA;AAAA;AAAA,+EAAN;;eAOe,yCACbqD,cADa;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,E","file":"/Users/eve/development/reaction/src/Components/ArtworkFilter/Dropdown.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import numeral from \"numeral\"\nimport React from \"react\"\nimport { createFragmentContainer, graphql } from \"react-relay\"\n\nimport Icon from \"../Icon\"\n\nimport styled from \"styled-components\"\nimport colors from \"../../Assets/Colors\"\nimport { avantgarde, garamond } from \"../../Assets/Fonts\"\nimport { labelMap } from \"./ParamMap\"\n\nimport { find } from \"lodash\"\n\ninterface DropdownProps extends RelayProps, React.HTMLProps<Dropdown> {\n  aggregation: any\n  onSelected?: (slice: string, value: string) => void\n  selected?: any\n}\n\ninterface DropdownState {\n  isHovered: boolean\n  selected: any\n}\n\nexport class Dropdown extends React.Component<DropdownProps, DropdownState> {\n  constructor(props: DropdownProps) {\n    super(props)\n    this.state = {\n      isHovered: false,\n      selected: props.selected || {},\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ selected: nextProps.selected })\n  }\n\n  toggleHover(value) {\n    this.setState({\n      isHovered: value,\n    })\n  }\n\n  onSelect(slice: string, value: string) {\n    this.setState({\n      selected: value,\n      isHovered: false,\n    })\n    this.props.onSelected(slice, value)\n  }\n\n  getSelectedName(id) {\n    const selectedCount = find(\n      this.props.aggregation.counts,\n      count => count.id === id\n    )\n    return selectedCount ? selectedCount.name : null\n  }\n\n  render() {\n    const slice = this.props.aggregation.slice\n    const labels = labelMap[this.props.aggregation.slice.toLowerCase()]\n    const selectedName = this.getSelectedName(this.state.selected)\n\n    let navItems = this.props.aggregation.counts.map(count => {\n      return (\n        <NavItem key={count.id} onClick={() => this.onSelect(slice, count.id)}>\n          <span>{count.name}</span>\n          <NavItemCount>\n            &nbsp;({numeral(count.count).format(\"0,0\")})\n          </NavItemCount>\n        </NavItem>\n      )\n    })\n\n    navItems.unshift(\n      <NavItem key=\"all\" onClick={() => this.onSelect(slice, \"*\")}>\n        <span>All {labels.plural}</span>\n      </NavItem>\n    )\n\n    let buttonColor = \"white\"\n    let buttonTextColor = \"black\"\n    let superLabelColor = \"black\"\n    let navStyle = { display: \"none\" }\n\n    if (selectedName) {\n      buttonTextColor = colors.purpleRegular\n    }\n\n    if (this.state.isHovered) {\n      buttonColor = \"black\"\n      buttonTextColor = \"white\"\n      superLabelColor = \"white\"\n      navStyle = { display: \"block\" }\n    }\n\n    const labelText = selectedName || labels.label\n    const superLabelText = selectedName ? labels.label : null\n\n    return (\n      <div\n        className={this.props.className}\n        onMouseEnter={() => this.toggleHover(true)}\n        onMouseLeave={() => this.toggleHover(false)}\n      >\n        <Button\n          style={{ backgroundColor: buttonColor, color: buttonTextColor }}\n        >\n          {superLabelText && (\n            <SuperLabel style={{ color: superLabelColor }}>\n              {superLabelText}\n            </SuperLabel>\n          )}\n          {labelText}\n          <Icon\n            name=\"arrow-down\"\n            fontSize=\"9px\"\n            color={buttonTextColor}\n            style={{ position: \"absolute\", right: 15, lineHeight: \"inherit\" }}\n          />\n        </Button>\n        <Nav style={navStyle}>{navItems}</Nav>\n      </div>\n    )\n  }\n}\n\nconst Button = styled.div`\n  ${avantgarde(\"s13\")};\n  background: white;\n  color: black;\n  border: 1px solid ${colors.grayRegular};\n  display: inline-block;\n  line-height: 160%;\n  padding: 15px 35px 15px 18px;\n  vertical-align: middle;\n  max-width: 120px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`\n\nconst Nav = styled.div`\n  z-index: 2;\n  background: black;\n  position: absolute;\n  top: 45px;\n  left: 1px;\n  width: 300px;\n  border: 1px solid #333;\n`\n\nconst SuperLabel = styled.div`\n  position: absolute;\n  font-size: 9px;\n  margin-top: -15px;\n  color: black;\n`\n\nconst NavItem = styled.div`\n  ${garamond(\"s11\")};\n  text-align: left;\n  color: white;\n  display: block;\n  border-bottom: 1px solid #333;\n  padding: 15px 18px 10px 18px;\n  text-transform: capitalize;\n  &:hover {\n    background: ${colors.grayBold};\n  }\n`\nconst NavItemCount = styled.span`\n  color: ${colors.graySemibold};\n`\n\nconst StyledDropdown = styled(Dropdown)`\n  position: relative;\n  display: inline-block;\n  cursor: pointer;\n  margin-left: -1px;\n`\n\nexport default createFragmentContainer(\n  StyledDropdown,\n  graphql`\n    fragment Dropdown_aggregation on ArtworksAggregationResults {\n      slice\n      counts {\n        name\n        id\n        count\n      }\n    }\n  `\n)\n\ninterface RelayProps {\n  aggregation: {\n    slice: string | null\n    counts: {\n      name: string | null\n      id: string | null\n      count: number | null\n    }\n  } | null\n}\n"]}]}