{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullScreen.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullScreen.tsx","mtime":1535576461000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _map from \"lodash/map\";\nimport _includes from \"lodash/includes\";\nimport _extend from \"lodash/extend\";\nimport _cloneDeep from \"lodash/cloneDeep\";\n\nvar _class, _class2, _temp;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport track from \"react-tracking\";\nimport { FullscreenViewer } from \"../Sections/FullscreenViewer/FullscreenViewer\";\nimport { withFullScreen } from \"../Sections/FullscreenViewer/withFullScreen\";\nimport { TooltipsData } from \"../ToolTip/TooltipsDataLoader\";\nimport { FeatureLayout } from \"./FeatureLayout\";\nimport { StandardLayout } from \"./StandardLayout\";\nexport var ArticleWithFullScreen = withFullScreen(_class = (_temp = _class2 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ArticleWithFullScreen, _React$Component);\n\n  function ArticleWithFullScreen(props) {\n    var _this;\n\n    _classCallCheck(this, ArticleWithFullScreen);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArticleWithFullScreen).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"indexAndExtractImages\", function () {\n      var article = _cloneDeep(_this.props.article);\n\n      var fullscreenImages = [];\n      var sectionIndex = 0;\n\n      var newSections = _map(article.sections, function (section) {\n        if (_includes([\"image_collection\", \"image_set\"], section.type)) {\n          var newImages = _map(section.images, function (image) {\n            image.setTitle = section.title;\n            image.index = sectionIndex;\n            fullscreenImages.push(image);\n            sectionIndex = sectionIndex + 1;\n            return image;\n          });\n\n          section.images = newImages;\n        }\n\n        return section;\n      });\n\n      article.sections = newSections;\n      return {\n        fullscreenImages: fullscreenImages,\n        article: article\n      };\n    });\n\n    var _this$indexAndExtract = _this.indexAndExtractImages(),\n        _fullscreenImages = _this$indexAndExtract.fullscreenImages,\n        _article = _this$indexAndExtract.article;\n\n    _this.state = {\n      fullscreenImages: _fullscreenImages,\n      article: _article\n    };\n    return _this;\n  }\n\n  _createClass(ArticleWithFullScreen, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          article = _this$state.article,\n          fullscreenImages = _this$state.fullscreenImages;\n      var _this$props = this.props,\n          closeViewer = _this$props.closeViewer,\n          slideIndex = _this$props.slideIndex,\n          viewerIsOpen = _this$props.viewerIsOpen,\n          onOpenAuthModal = _this$props.onOpenAuthModal;\n\n      var articleProps = _extend(_cloneDeep(this.props), {\n        article: article,\n        slideIndex: slideIndex\n      });\n\n      return React.createElement(TooltipsData, {\n        article: article,\n        shouldFetchData: this.props.showTooltips,\n        onOpenAuthModal: onOpenAuthModal\n      }, article.layout === \"feature\" ? React.createElement(FeatureLayout, articleProps) : React.createElement(StandardLayout, articleProps), React.createElement(FullscreenViewer, {\n        onClose: closeViewer,\n        show: viewerIsOpen,\n        slideIndex: slideIndex,\n        images: fullscreenImages\n      }));\n    }\n  }]);\n\n  return ArticleWithFullScreen;\n}(React.Component), _defineProperty(_class2, \"defaultProps\", {\n  isMobile: false,\n  isSuper: false,\n  article: {},\n  isTruncated: false,\n  showTooltips: false\n}), _temp)) || _class;\nexport default track()(ArticleWithFullScreen);",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Publishing/Layouts/ArticleWithFullScreen.tsx"],"names":["React","track","FullscreenViewer","withFullScreen","TooltipsData","FeatureLayout","StandardLayout","ArticleWithFullScreen","props","article","fullscreenImages","sectionIndex","newSections","sections","section","type","newImages","images","image","setTitle","title","index","push","indexAndExtractImages","state","closeViewer","slideIndex","viewerIsOpen","onOpenAuthModal","articleProps","showTooltips","layout","Component","isMobile","isSuper","isTruncated"],"mappings":"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","sourcesContent":["import { cloneDeep, extend, includes, map } from \"lodash\"\nimport React from \"react\"\nimport track from \"react-tracking\"\nimport { ArticleProps } from \"../Article\"\nimport { FullscreenViewer } from \"../Sections/FullscreenViewer/FullscreenViewer\"\nimport { withFullScreen } from \"../Sections/FullscreenViewer/withFullScreen\"\nimport { TooltipsData } from \"../ToolTip/TooltipsDataLoader\"\nimport { ArticleData } from \"../Typings\"\nimport { FeatureLayout } from \"./FeatureLayout\"\nimport { StandardLayout } from \"./StandardLayout\"\n\ninterface ArticleState {\n  fullscreenImages: any\n  article: ArticleData\n}\n\n@withFullScreen\nexport class ArticleWithFullScreen extends React.Component<\n  ArticleProps,\n  ArticleState\n> {\n  static defaultProps = {\n    isMobile: false,\n    isSuper: false,\n    article: {},\n    isTruncated: false,\n    showTooltips: false,\n  }\n\n  constructor(props) {\n    super(props)\n    const { fullscreenImages, article } = this.indexAndExtractImages()\n    this.state = {\n      fullscreenImages,\n      article,\n    }\n  }\n\n  indexAndExtractImages = () => {\n    const article = cloneDeep(this.props.article)\n    const fullscreenImages = []\n    let sectionIndex = 0\n\n    const newSections = map(article.sections, section => {\n      if (includes([\"image_collection\", \"image_set\"], section.type)) {\n        const newImages = map(section.images, image => {\n          image.setTitle = section.title\n          image.index = sectionIndex\n          fullscreenImages.push(image)\n          sectionIndex = sectionIndex + 1\n          return image\n        })\n        section.images = newImages\n      }\n      return section\n    })\n    article.sections = newSections\n    return { fullscreenImages, article }\n  }\n\n  render() {\n    const { article, fullscreenImages } = this.state\n    const {\n      closeViewer,\n      slideIndex,\n      viewerIsOpen,\n      onOpenAuthModal,\n    } = this.props\n\n    const articleProps = extend(cloneDeep(this.props), { article, slideIndex })\n\n    return (\n      <TooltipsData\n        article={article}\n        shouldFetchData={this.props.showTooltips}\n        onOpenAuthModal={onOpenAuthModal}\n      >\n        {article.layout === \"feature\" ? (\n          <FeatureLayout {...articleProps} />\n        ) : (\n          <StandardLayout {...articleProps} />\n        )}\n        <FullscreenViewer\n          onClose={closeViewer}\n          show={viewerIsOpen}\n          slideIndex={slideIndex}\n          images={fullscreenImages}\n        />\n      </TooltipsData>\n    )\n  }\n}\n\nexport default track()(ArticleWithFullScreen)\n"]}]}