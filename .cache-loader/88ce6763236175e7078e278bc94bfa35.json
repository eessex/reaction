{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Follow.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Follow.tsx","mtime":1535727457000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var _graphql;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport * as Artsy from \"../Artsy/SystemContext\";\nimport React from \"react\";\nimport { commitMutation, createFragmentContainer, graphql } from \"react-relay\";\nimport styled from \"styled-components\";\nimport colors from \"../Assets/Colors\";\nimport Icon from \"./Icon\";\nvar SIZE = 32;\nexport var StyledFollowButton = styled.div.withConfig({\n  displayName: \"Follow__StyledFollowButton\",\n  componentId: \"dg8fq7-0\"\n})([\"display:flex;cursor:pointer;color:black;font-size:16px;align-items:center;margin-left:5px;&:after{content:\\\"Follow\\\";}&:hover{color:\", \";}&[data-followed=\\\"true\\\"]{&:after{content:\\\"Following\\\";}&:hover{color:\", \";&:after{content:\\\"Unfollow\\\";}}}\"], colors.purpleRegular, colors.redBold);\nexport var FollowButton =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FollowButton, _React$Component);\n\n  function FollowButton() {\n    _classCallCheck(this, FollowButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FollowButton).apply(this, arguments));\n  }\n\n  _createClass(FollowButton, [{\n    key: \"handleFollow\",\n    value: function handleFollow() {\n      var _this$props = this.props,\n          artist = _this$props.artist,\n          user = _this$props.user,\n          relay = _this$props.relay;\n\n      if (user && user.id) {\n        commitMutation(relay.environment, {\n          mutation: _graphql || (_graphql = function _graphql() {\n            var node = require(\"../__generated__/FollowArtistMutation.graphql\");\n\n            if (node.hash && node.hash !== \"73c44bcd83a0d8cada5bcb910fb1a71f\") {\n              console.error(\"The definition of 'FollowArtistMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n            }\n\n            return require(\"../__generated__/FollowArtistMutation.graphql\");\n          }),\n          variables: {\n            input: {\n              artist_id: artist.id,\n              unfollow: artist.is_followed\n            }\n          },\n          // TODO: Relay Modern: This is not working yet\n          optimisticResponse: {\n            followArtist: {\n              artist: {\n                __id: artist.__id,\n                is_followed: !artist.is_followed\n              }\n            }\n          }\n        });\n      } else {\n        window.location.href = \"/login\";\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props2 = this.props,\n          style = _this$props2.style,\n          artist = _this$props2.artist;\n      var iconName = artist.is_followed ? \"follow-circle.is-following\" : \"follow-circle\";\n      return React.createElement(StyledFollowButton, {\n        className: this.props.className,\n        style: style,\n        onClick: function onClick() {\n          return _this.handleFollow();\n        },\n        \"data-followed\": artist.is_followed\n      }, React.createElement(Icon, {\n        name: iconName,\n        height: SIZE,\n        style: {\n          verticalAlign: \"middle\",\n          color: \"inherit\",\n          margin: 0\n        }\n      }));\n    }\n  }]);\n\n  return FollowButton;\n}(React.Component);\nexport default createFragmentContainer(Artsy.withContext(FollowButton), {\n  artist: function artist() {\n    var node = require(\"../__generated__/Follow_artist.graphql\");\n\n    if (node.hash && node.hash !== \"e2c8c185e485a2f0cf3079ead7217a61\") {\n      console.error(\"The definition of 'Follow_artist' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../__generated__/Follow_artist.graphql\");\n  }\n});",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Follow.tsx"],"names":["Artsy","React","commitMutation","createFragmentContainer","graphql","styled","colors","Icon","SIZE","StyledFollowButton","div","purpleRegular","redBold","FollowButton","props","artist","user","relay","id","environment","mutation","variables","input","artist_id","unfollow","is_followed","optimisticResponse","followArtist","__id","window","location","href","style","iconName","className","handleFollow","verticalAlign","color","margin","Component","withContext"],"mappings":";;;;;;;;;;;;;;;;;;;;AAUA,OAAO,KAAKA,KAAZ;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,cADF,EAEEC,uBAFF,EAGEC,OAHF,QAKO,aALP;AAMA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,MAAP;AACA,OAAOC,IAAP;AAEA,IAAMC,IAAI,GAAG,EAAb;AAQA,OAAO,IAAMC,kBAAkB,GAAGJ,MAAM,CAACK,GAAV;AAAA;AAAA;AAAA,+PAWlBJ,MAAM,CAACK,aAXW,EAkBhBL,MAAM,CAACM,OAlBS,CAAxB;AA0BP,WAAaC,YAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,mCACiB;AAAA,wBACmB,KAAKC,KADxB;AAAA,UACLC,MADK,eACLA,MADK;AAAA,UACGC,IADH,eACGA,IADH;AAAA,UACSC,KADT,eACSA,KADT;;AAEb,UAAID,IAAI,IAAIA,IAAI,CAACE,EAAjB,EAAqB;AACnBhB,QAAAA,cAAc,CAAuBe,KAAK,CAACE,WAA7B,EAA0C;AACtDC,UAAAA,QAAQ;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,YAD8C;AAWtDC,UAAAA,SAAS,EAAE;AACTC,YAAAA,KAAK,EAAE;AACLC,cAAAA,SAAS,EAAER,MAAM,CAACG,EADb;AAELM,cAAAA,QAAQ,EAAET,MAAM,CAACU;AAFZ;AADE,WAX2C;AAiBtD;AACAC,UAAAA,kBAAkB,EAAE;AAClBC,YAAAA,YAAY,EAAE;AACZZ,cAAAA,MAAM,EAAE;AACNa,gBAAAA,IAAI,EAAEb,MAAM,CAACa,IADP;AAENH,gBAAAA,WAAW,EAAE,CAACV,MAAM,CAACU;AAFf;AADI;AADI;AAlBkC,SAA1C,CAAd;AA2BD,OA5BD,MA4BO;AACLI,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACD;AACF;AAlCH;AAAA;AAAA,6BAoCW;AAAA;;AAAA,yBACmB,KAAKjB,KADxB;AAAA,UACCkB,KADD,gBACCA,KADD;AAAA,UACQjB,MADR,gBACQA,MADR;AAEP,UAAMkB,QAAQ,GAAGlB,MAAM,CAACU,WAAP,GACb,4BADa,GAEb,eAFJ;AAIA,aACE,oBAAC,kBAAD;AACE,QAAA,SAAS,EAAE,KAAKX,KAAL,CAAWoB,SADxB;AAEE,QAAA,KAAK,EAAEF,KAFT;AAGE,QAAA,OAAO,EAAE;AAAA,iBAAM,KAAI,CAACG,YAAL,EAAN;AAAA,SAHX;AAIE,yBAAepB,MAAM,CAACU;AAJxB,SAME,oBAAC,IAAD;AACE,QAAA,IAAI,EAAEQ,QADR;AAEE,QAAA,MAAM,EAAEzB,IAFV;AAGE,QAAA,KAAK,EAAE;AAAE4B,UAAAA,aAAa,EAAE,QAAjB;AAA2BC,UAAAA,KAAK,EAAE,SAAlC;AAA6CC,UAAAA,MAAM,EAAE;AAArD;AAHT,QANF,CADF;AAcD;AAxDH;;AAAA;AAAA,EAAkCrC,KAAK,CAACsC,SAAxC;AA2DA,eAAepC,uBAAuB,CACpCH,KAAK,CAACwC,WAAN,CAAkB3B,YAAlB,CADoC;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,EAAtC","sourcesContent":["/**\n * FIXME: This file also used to handle ‘profile’ follows, as implemented in https://github.com/artsy/reaction/pull/175,\n * but this was reverted because the metaphysics PR never landed https://github.com/artsy/metaphysics/pull/662.\n *\n * When this is revisited, rather than having this file do both, it’s probably better to have an abstract implementation\n * and two specialised components that use composition to achieve the desired functionality.\n */\n\nimport { Follow_artist } from \"__generated__/Follow_artist.graphql\"\nimport { FollowArtistMutation } from \"__generated__/FollowArtistMutation.graphql\"\nimport * as Artsy from \"Artsy/SystemContext\"\nimport React from \"react\"\nimport {\n  commitMutation,\n  createFragmentContainer,\n  graphql,\n  RelayProp,\n} from \"react-relay\"\nimport styled from \"styled-components\"\nimport colors from \"../Assets/Colors\"\nimport Icon from \"./Icon\"\n\nconst SIZE = 32\n\ninterface Props extends React.HTMLProps<FollowButton>, Artsy.ContextProps {\n  style?: any\n  relay: RelayProp\n  artist: Follow_artist\n}\n\nexport const StyledFollowButton = styled.div`\n  display: flex;\n  cursor: pointer;\n  color: black;\n  font-size: 16px;\n  align-items: center;\n  margin-left: 5px;\n  &:after {\n    content: \"Follow\";\n  }\n  &:hover {\n    color: ${colors.purpleRegular};\n  }\n  &[data-followed=\"true\"] {\n    &:after {\n      content: \"Following\";\n    }\n    &:hover {\n      color: ${colors.redBold};\n      &:after {\n        content: \"Unfollow\";\n      }\n    }\n  }\n`\n\nexport class FollowButton extends React.Component<Props, null> {\n  handleFollow() {\n    const { artist, user, relay } = this.props\n    if (user && user.id) {\n      commitMutation<FollowArtistMutation>(relay.environment, {\n        mutation: graphql`\n          mutation FollowArtistMutation($input: FollowArtistInput!) {\n            followArtist(input: $input) {\n              artist {\n                __id\n                is_followed\n              }\n            }\n          }\n        `,\n        variables: {\n          input: {\n            artist_id: artist.id,\n            unfollow: artist.is_followed,\n          },\n        },\n        // TODO: Relay Modern: This is not working yet\n        optimisticResponse: {\n          followArtist: {\n            artist: {\n              __id: artist.__id,\n              is_followed: !artist.is_followed,\n            },\n          },\n        },\n      })\n    } else {\n      window.location.href = \"/login\"\n    }\n  }\n\n  render() {\n    const { style, artist } = this.props\n    const iconName = artist.is_followed\n      ? \"follow-circle.is-following\"\n      : \"follow-circle\"\n\n    return (\n      <StyledFollowButton\n        className={this.props.className}\n        style={style}\n        onClick={() => this.handleFollow()}\n        data-followed={artist.is_followed}\n      >\n        <Icon\n          name={iconName}\n          height={SIZE}\n          style={{ verticalAlign: \"middle\", color: \"inherit\", margin: 0 }}\n        />\n      </StyledFollowButton>\n    )\n  }\n}\n\nexport default createFragmentContainer(\n  Artsy.withContext(FollowButton),\n  graphql`\n    fragment Follow_artist on Artist {\n      __id\n      id\n      is_followed\n    }\n  `\n)\n"]}]}