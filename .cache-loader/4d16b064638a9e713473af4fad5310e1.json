{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/CanvasSlideshow.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/CanvasSlideshow.tsx","mtime":1524678459000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1527877289000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CanvasSlideshow = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactSlick = _interopRequireDefault(require(\"react-slick\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Colors = _interopRequireDefault(require(\"../../../../Assets/Colors\"));\n\nvar _resizer = require(\"../../../../Utils/resizer\");\n\nvar _track = require(\"../../../../Utils/track\");\n\nvar _Helpers = require(\"../../../Helpers\");\n\nvar _Icon = _interopRequireDefault(require(\"../../../Icon\"));\n\nvar _Fonts = require(\"../../../../Assets/Fonts\");\n\nvar _CanvasContainer = require(\"./CanvasContainer\");\n\nvar _dec, _dec2, _class, _class2;\n\nvar _templateObject = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  position: absolute;\\n  height: 100%;\\n  max-height: \", \"\\n  top: 0;\\n  box-sizing: border-box;\\n  opacity: \", \"\\n  transition: opacity .5s;\\n  \", \"\\n  \", \"\\n  \", \" {\\n    z-index: 10;\\n    cursor: pointer;\\n    padding: 10px;\\n    background: rgba(255, 255, 255, .8);\\n    box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2);\\n    border-radius: 2px;\\n  }\\n  \", \"\\n\"], [\"\\n  display: flex;\\n  align-items: center;\\n  position: absolute;\\n  height: 100%;\\n  max-height: \", \"\\n  top: 0;\\n  box-sizing: border-box;\\n  opacity: \", \"\\n  transition: opacity .5s;\\n  \", \"\\n  \", \"\\n  \", \" {\\n    z-index: 10;\\n    cursor: pointer;\\n    padding: 10px;\\n    background: rgba(255, 255, 255, .8);\\n    box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2);\\n    border-radius: 2px;\\n  }\\n  \", \"\\n\"]),\n    _templateObject2 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    display: none;\\n  \"], [\"\\n    display: none;\\n  \"]),\n    _templateObject3 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  width: 100%;\\n  overflow: hidden;\\n  .slick-list {\\n    max-height: \", \"\\n    padding: 0 !important;\\n  }\\n\\n  \", \"\\n\"], [\"\\n  width: 100%;\\n  overflow: hidden;\\n  .slick-list {\\n    max-height: \", \"\\n    padding: 0 !important;\\n  }\\n\\n  \", \"\\n\"]),\n    _templateObject4 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    max-height: \", \"\\n  \"], [\"\\n    max-height: \", \"\\n  \"]),\n    _templateObject5 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  margin-right: 20px;\\n  &.title-card {\\n    max-width: 1250px;\\n    width: \", \"\\n    display: flex;\\n    justify-content: space-between;\\n    \", \"\\n  }\\n\"], [\"\\n  margin-right: 20px;\\n  &.title-card {\\n    max-width: 1250px;\\n    width: \", \"\\n    display: flex;\\n    justify-content: space-between;\\n    \", \"\\n  }\\n\"]),\n    _templateObject6 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n      max-width: \", \"\\n    \"], [\"\\n      max-width: \", \"\\n    \"]),\n    _templateObject7 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  width: 380px;\\n  padding: 0 20px 0 0;\\n  \", \"\\n  \", \"\\n\"], [\"\\n  width: 380px;\\n  padding: 0 20px 0 0;\\n  \", \"\\n  \", \"\\n\"]),\n    _templateObject8 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    padding: 0 40px;\\n    width: \", \"\\n    a {\\n      max-height: \", \"\\n    }\\n  \"], [\"\\n    padding: 0 40px;\\n    width: \", \"\\n    a {\\n      max-height: \", \"\\n    }\\n  \"]),\n    _templateObject9 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    padding: 0 20px;\\n    width: 100%;\\n    a {\\n      height: initial;\\n      max-height: initial;\\n    }\\n  \"], [\"\\n    padding: 0 20px;\\n    width: 100%;\\n    a {\\n      height: initial;\\n      max-height: initial;\\n    }\\n  \"]),\n    _templateObject10 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    margin: 0;\\n    max-width: calc(100% - 40px);\\n  \"], [\"\\n    margin: 0;\\n    max-width: calc(100% - 40px);\\n  \"]),\n    _templateObject11 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  height: auto;\\n  max-width: \", \"\\n  object-fit: cover;\\n  object-position: center;\\n  \", \"\\n\"], [\"\\n  height: auto;\\n  max-width: \", \"\\n  object-fit: cover;\\n  object-position: center;\\n  \", \"\\n\"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object['ke' + 'ys'](descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object['define' + 'Property'](target, property, desc); desc = null; } return desc; }\n\nvar CanvasSlideshow = (_dec = (0, _track.track)(), _dec2 = (0, _track.track)(function (props) {\n  return {\n    action: \"Click\",\n    label: \"Display ad carousel arrow\",\n    entity_type: \"display_ad\",\n    campaign_name: props.campaign.name,\n    unit_layout: \"canvas_slideshow\"\n  };\n}), _dec(_class = (_class2 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CanvasSlideshow, _React$Component);\n\n  function CanvasSlideshow(props) {\n    var _this;\n\n    _classCallCheck(this, CanvasSlideshow);\n\n    _this = _possibleConstructorReturn(this, (CanvasSlideshow.__proto__ || Object.getPrototypeOf(CanvasSlideshow)).call(this, props));\n    Object.defineProperty(_assertThisInitialized(_this), \"slider\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_assertThisInitialized(_this), \"afterSlideChange\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(currentSlide) {\n        _this.setState({\n          isOnTitle: currentSlide === 0\n        });\n      }\n    });\n    Object.defineProperty(_assertThisInitialized(_this), \"renderSlides\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var _this$props = _this.props,\n            unit = _this$props.unit,\n            containerWidth = _this$props.containerWidth;\n        return unit.assets.map(function (image, i) {\n          var renderTitleCard = i === 0 && containerWidth >= 900;\n          var imageSrc = (0, _resizer.crop)(image.url, {\n            width: 780,\n            height: 460,\n            isDisplayAd: true\n          });\n          var caption = image.caption || \"\";\n          return _react.default.createElement(Slide, {\n            key: i,\n            className: i === 0 && \"title-card\",\n            containerWidth: containerWidth\n          }, renderTitleCard && _this.renderTitleCard(), _react.default.createElement(\"div\", null, _react.default.createElement(Image, {\n            src: imageSrc,\n            alt: caption,\n            containerWidth: containerWidth\n          }), caption && _react.default.createElement(Caption, null, image.caption)));\n        });\n      }\n    });\n    _this.onChangeSlide = _this.onChangeSlide.bind(_assertThisInitialized(_this));\n    _this.state = {\n      isOnTitle: true\n    };\n    return _this;\n  }\n\n  _createClass(CanvasSlideshow, [{\n    key: \"onChangeSlide\",\n    value: function onChangeSlide(slide) {\n      this.slider.slickGoTo(slide);\n    }\n  }, {\n    key: \"renderTitleCard\",\n    value: function renderTitleCard() {\n      var _props = this.props,\n          children = _props.children,\n          disclaimer = _props.disclaimer,\n          containerWidth = _props.containerWidth,\n          unit = _props.unit;\n      var renderDisclaimer = (0, _lodash.compact)((0, _lodash.map)(unit.assets, \"caption\")).length > 0;\n      return _react.default.createElement(Title, {\n        containerWidth: containerWidth\n      }, children, renderDisclaimer && _react.default.createElement(Disclaimer, null, disclaimer));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var containerWidth = this.props.containerWidth;\n      var sliderSettings = {\n        dots: false,\n        lazyLoad: false,\n        infinite: false,\n        variableWidth: true,\n        centerMode: true,\n        nextArrow: _react.default.createElement(RightArrow, {\n          containerWidth: containerWidth,\n          onChangeSlide: this.onChangeSlide\n        }),\n        prevArrow: _react.default.createElement(LeftArrow, {\n          containerWidth: containerWidth,\n          onChangeSlide: this.onChangeSlide,\n          isOnTitle: this.state.isOnTitle\n        }),\n        initialSlide: 0,\n        afterChange: function afterChange(currentSlide) {\n          _this2.afterSlideChange(currentSlide);\n        },\n        responsive: [{\n          breakpoint: 900,\n          settings: {\n            infinite: true,\n            controls: false\n          }\n        }]\n      };\n      var renderTitleCard = containerWidth < 900;\n      return _react.default.createElement(\"div\", null, _react.default.createElement(SliderContainer, {\n        containerWidth: containerWidth\n      }, _react.default.createElement(_reactSlick.default, _extends({}, sliderSettings, {\n        ref: function ref(slider) {\n          return _this2.slider = slider;\n        }\n      }), this.renderSlides())), renderTitleCard && this.renderTitleCard());\n    }\n  }]);\n\n  return CanvasSlideshow;\n}(_react.default.Component), (_applyDecoratedDescriptor(_class2.prototype, \"onChangeSlide\", [_dec2], Object.getOwnPropertyDescriptor(_class2.prototype, \"onChangeSlide\"), _class2.prototype)), _class2)) || _class);\nexports.CanvasSlideshow = CanvasSlideshow;\n\nvar LeftArrow = function LeftArrow(props) {\n  var slide = props.currentSlide - 1 >= 0 ? 0 : props.currentSlide - 1;\n  return _react.default.createElement(NavArrow, {\n    containerWidth: props.containerWidth,\n    direction: \"left\",\n    onClick: function onClick() {\n      return props.onChangeSlide(slide);\n    },\n    isVisible: !props.isOnTitle\n  }, _react.default.createElement(_Icon.default, {\n    name: \"chevron-left\",\n    color: \"black\",\n    fontSize: \"24px\"\n  }));\n};\n\nvar RightArrow = function RightArrow(props) {\n  var slide = props.currentSlide + 1 === props.slideCount ? 0 : props.currentSlide + 1;\n  return _react.default.createElement(NavArrow, {\n    containerWidth: props.containerWidth,\n    direction: \"right\",\n    onClick: function onClick() {\n      return props.onChangeSlide(slide);\n    },\n    isVisible: true\n  }, _react.default.createElement(_Icon.default, {\n    name: \"chevron-right\",\n    color: \"black\",\n    fontSize: \"24px\"\n  }));\n};\n\nvar arrowDiv = _styledComponents.default.div;\nvar responsiveDiv = _styledComponents.default.div;\nvar responsiveImage = _styledComponents.default.img;\nvar NavArrow = arrowDiv(_templateObject, function (props) {\n  return (0, _CanvasContainer.maxAssetSize)(props.containerWidth).height + \"px;\";\n}, function (props) {\n  return props.isVisible ? \"1;\" : \"0;\";\n}, function (props) {\n  return props.direction === \"left\" && \"left: 0px;\";\n}, function (props) {\n  return props.direction === \"right\" && \"right: 0px;\";\n}, _Icon.default, _Helpers.pMedia.md(_templateObject2));\nvar SliderContainer = responsiveDiv(_templateObject3, function (props) {\n  return \"calc(\" + (0, _CanvasContainer.maxAssetSize)(props.containerWidth).height + \"px + 2.5em);\";\n}, function (props) {\n  return _Helpers.pMedia.md(_templateObject4, (0, _CanvasContainer.maxAssetSize)(props.containerWidth).height + \"px;\");\n});\nvar Slide = responsiveDiv(_templateObject5, function (props) {\n  return props.containerWidth + \"px;\";\n}, function (props) {\n  return _Helpers.pMedia.md(_templateObject6, (0, _CanvasContainer.maxAssetSize)(props.containerWidth).width + \"px;\");\n});\nvar Title = responsiveDiv(_templateObject7, function (props) {\n  return _Helpers.pMedia.xl(_templateObject8, props.containerWidth * 0.35 + \"px;\", (0, _CanvasContainer.maxAssetSize)(props.containerWidth).height + \"px;\");\n}, _Helpers.pMedia.md(_templateObject9));\n\nvar Disclaimer =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"CanvasSlideshow__Disclaimer\",\n  componentId: \"s1q5kr05-0\"\n})([\"margin:-5px 0 0;\", \";\"], _Helpers.pMedia.md(_templateObject10));\n\nvar Image = responsiveImage(_templateObject11, function (props) {\n  return (0, _CanvasContainer.maxAssetSize)(props.containerWidth).width + \"px;\";\n}, function (props) {\n  return _Helpers.pMedia.lg(_templateObject4, (0, _CanvasContainer.maxAssetSize)(props.containerWidth).height + \"px;\");\n});\n\nvar Caption =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"CanvasSlideshow__Caption\",\n  componentId: \"s1q5kr05-1\"\n})([\"\", \" color:\", \";margin-top:10px;\"], (0, _Fonts.garamond)(\"s11\"), _Colors.default.grayMedium);",{"version":3,"sources":["src/Components/Publishing/Display/Canvas/CanvasSlideshow.tsx"],"names":["CanvasSlideshow","action","label","entity_type","campaign_name","props","campaign","name","unit_layout","setState","isOnTitle","currentSlide","unit","containerWidth","assets","map","image","i","renderTitleCard","imageSrc","url","width","height","isDisplayAd","caption","onChangeSlide","bind","state","slide","slider","slickGoTo","children","disclaimer","renderDisclaimer","length","sliderSettings","dots","lazyLoad","infinite","variableWidth","centerMode","nextArrow","prevArrow","initialSlide","afterChange","afterSlideChange","responsive","breakpoint","settings","controls","renderSlides","Component","LeftArrow","RightArrow","slideCount","arrowDiv","div","responsiveDiv","responsiveImage","img","NavArrow","isVisible","direction","md","SliderContainer","Slide","Title","xl","Disclaimer","Image","lg","Caption","grayMedium"],"mappings":"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","file":"/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/CanvasSlideshow.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import { compact, map } from \"lodash\"\nimport React from \"react\"\nimport Slider from \"react-slick\"\nimport styled, { StyledFunction } from \"styled-components\"\nimport Colors from \"Assets/Colors\"\nimport { crop } from \"../../../../Utils/resizer\"\nimport { track } from \"../../../../Utils/track\"\nimport { pMedia } from \"../../../Helpers\"\nimport Icon from \"../../../Icon\"\nimport { garamond } from \"Assets/Fonts\"\nimport { maxAssetSize } from \"./CanvasContainer\"\n\ninterface CanvasSlideshowProps {\n  campaign: any\n  containerWidth: number\n  disclaimer: any\n  unit: any\n}\n\ninterface NavArrowProps extends React.HTMLProps<HTMLDivElement> {\n  direction: string\n  isVisible?: boolean\n  containerWidth: number\n}\n\ninterface ResponsiveProps extends React.HTMLProps<HTMLDivElement> {\n  containerWidth: number\n}\n\n@track()\nexport class CanvasSlideshow extends React.Component<\n  CanvasSlideshowProps,\n  any\n> {\n  private slider: any\n\n  constructor(props) {\n    super(props)\n    this.onChangeSlide = this.onChangeSlide.bind(this)\n\n    this.state = {\n      isOnTitle: true,\n    }\n  }\n\n  afterSlideChange = currentSlide => {\n    this.setState({\n      isOnTitle: currentSlide === 0,\n    })\n  }\n\n  @track(props => ({\n    action: \"Click\",\n    label: \"Display ad carousel arrow\",\n    entity_type: \"display_ad\",\n    campaign_name: props.campaign.name,\n    unit_layout: \"canvas_slideshow\",\n  }))\n  onChangeSlide(slide) {\n    this.slider.slickGoTo(slide)\n  }\n\n  renderTitleCard() {\n    const { children, disclaimer, containerWidth, unit } = this.props\n    const renderDisclaimer = compact(map(unit.assets, \"caption\")).length > 0\n\n    return (\n      <Title containerWidth={containerWidth}>\n        {children}\n\n        {renderDisclaimer && <Disclaimer>{disclaimer}</Disclaimer>}\n      </Title>\n    )\n  }\n\n  renderSlides = () => {\n    const { unit, containerWidth } = this.props\n\n    return unit.assets.map((image, i) => {\n      const renderTitleCard = i === 0 && containerWidth >= 900\n      const imageSrc = crop(image.url, {\n        width: 780,\n        height: 460,\n        isDisplayAd: true,\n      })\n      const caption = image.caption || \"\"\n\n      return (\n        <Slide\n          key={i}\n          className={i === 0 && \"title-card\"}\n          containerWidth={containerWidth}\n        >\n          {renderTitleCard && this.renderTitleCard()}\n\n          <div>\n            <Image\n              src={imageSrc}\n              alt={caption}\n              containerWidth={containerWidth}\n            />\n\n            {caption && <Caption>{image.caption}</Caption>}\n          </div>\n        </Slide>\n      )\n    })\n  }\n\n  render() {\n    const { containerWidth } = this.props\n\n    const sliderSettings = {\n      dots: false,\n      lazyLoad: false,\n      infinite: false,\n      variableWidth: true,\n      centerMode: true,\n      nextArrow: (\n        <RightArrow\n          containerWidth={containerWidth}\n          onChangeSlide={this.onChangeSlide}\n        />\n      ),\n      prevArrow: (\n        <LeftArrow\n          containerWidth={containerWidth}\n          onChangeSlide={this.onChangeSlide}\n          isOnTitle={this.state.isOnTitle}\n        />\n      ),\n      initialSlide: 0,\n      afterChange: currentSlide => {\n        this.afterSlideChange(currentSlide)\n      },\n      responsive: [\n        {\n          breakpoint: 900,\n          settings: {\n            infinite: true,\n            controls: false,\n          },\n        },\n      ],\n    }\n\n    const renderTitleCard = containerWidth < 900\n\n    return (\n      <div>\n        <SliderContainer containerWidth={containerWidth}>\n          <Slider {...sliderSettings} ref={slider => (this.slider = slider)}>\n            {this.renderSlides()}\n          </Slider>\n        </SliderContainer>\n\n        {renderTitleCard && this.renderTitleCard()}\n      </div>\n    )\n  }\n}\n\nconst LeftArrow = props => {\n  const slide = props.currentSlide - 1 >= 0 ? 0 : props.currentSlide - 1\n\n  return (\n    <NavArrow\n      containerWidth={props.containerWidth}\n      direction=\"left\"\n      onClick={() => props.onChangeSlide(slide)}\n      isVisible={!props.isOnTitle}\n    >\n      <Icon name=\"chevron-left\" color=\"black\" fontSize=\"24px\" />\n    </NavArrow>\n  )\n}\n\nconst RightArrow = props => {\n  const slide =\n    props.currentSlide + 1 === props.slideCount ? 0 : props.currentSlide + 1\n\n  return (\n    <NavArrow\n      containerWidth={props.containerWidth}\n      direction=\"right\"\n      onClick={() => props.onChangeSlide(slide)}\n      isVisible\n    >\n      <Icon name=\"chevron-right\" color=\"black\" fontSize=\"24px\" />\n    </NavArrow>\n  )\n}\n\nconst arrowDiv: StyledFunction<NavArrowProps> = styled.div\nconst responsiveDiv: StyledFunction<ResponsiveProps> = styled.div\nconst responsiveImage: StyledFunction<ResponsiveProps> = styled.img\n\nconst NavArrow = arrowDiv`\n  display: flex;\n  align-items: center;\n  position: absolute;\n  height: 100%;\n  max-height: ${props => maxAssetSize(props.containerWidth).height + \"px;\"}\n  top: 0;\n  box-sizing: border-box;\n  opacity: ${props => (props.isVisible ? \"1;\" : \"0;\")}\n  transition: opacity .5s;\n  ${props => props.direction === \"left\" && \"left: 0px;\"}\n  ${props => props.direction === \"right\" && \"right: 0px;\"}\n  ${Icon} {\n    z-index: 10;\n    cursor: pointer;\n    padding: 10px;\n    background: rgba(255, 255, 255, .8);\n    box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2);\n    border-radius: 2px;\n  }\n  ${pMedia.md`\n    display: none;\n  `}\n`\nconst SliderContainer = responsiveDiv`\n  width: 100%;\n  overflow: hidden;\n  .slick-list {\n    max-height: ${props =>\n      \"calc(\" + maxAssetSize(props.containerWidth).height + \"px + 2.5em);\"}\n    padding: 0 !important;\n  }\n\n  ${props => pMedia.md`\n    max-height: ${maxAssetSize(props.containerWidth).height + \"px;\"}\n  `}\n`\nconst Slide = responsiveDiv`\n  margin-right: 20px;\n  &.title-card {\n    max-width: 1250px;\n    width: ${props => props.containerWidth + \"px;\"}\n    display: flex;\n    justify-content: space-between;\n    ${props => pMedia.md`\n      max-width: ${maxAssetSize(props.containerWidth).width + \"px;\"}\n    `}\n  }\n`\nconst Title = responsiveDiv`\n  width: 380px;\n  padding: 0 20px 0 0;\n  ${props => pMedia.xl`\n    padding: 0 40px;\n    width: ${props.containerWidth * 0.35 + \"px;\"}\n    a {\n      max-height: ${maxAssetSize(props.containerWidth).height + \"px;\"}\n    }\n  `}\n  ${pMedia.md`\n    padding: 0 20px;\n    width: 100%;\n    a {\n      height: initial;\n      max-height: initial;\n    }\n  `}\n`\nconst Disclaimer = styled.div`\n  margin: -5px 0 0;\n  ${pMedia.md`\n    margin: 0;\n    max-width: calc(100% - 40px);\n  `};\n`\nconst Image = responsiveImage`\n  height: auto;\n  max-width: ${props => maxAssetSize(props.containerWidth).width + \"px;\"}\n  object-fit: cover;\n  object-position: center;\n  ${props => pMedia.lg`\n    max-height: ${maxAssetSize(props.containerWidth).height + \"px;\"}\n  `}\n`\nconst Caption = styled.div`\n  ${garamond(\"s11\")} color: ${Colors.grayMedium};\n  margin-top: 10px;\n`\n"]}]}