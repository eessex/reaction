{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Apps/WorksForYou/index.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Apps/WorksForYou/index.tsx","mtime":1537275186000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var _graphql, _dec, _class, _class2, _temp;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { MarketingHeader } from \"./Components/MarketingHeader\";\nimport { ContextConsumer } from \"../../Artsy\";\nimport { track } from \"../../Artsy/Analytics\";\nimport Spinner from \"../../Components/Spinner\";\nimport React, { Component } from \"react\";\nimport { graphql, QueryRenderer } from \"react-relay\";\nimport styled from \"styled-components\";\nimport Events from \"../../Utils/Events\";\nimport WorksForYouArtist from \"./WorksForYouArtist\";\nimport WorksForYouContent from \"./WorksForYouContents\";\nvar SpinnerContainer = styled.div.withConfig({\n  displayName: \"WorksForYou__SpinnerContainer\",\n  componentId: \"s105axjw-0\"\n})([\"width:100%;height:100px;position:relative;\"]);\nexport var WorksForYou = (_dec = track(null, {\n  dispatch: function dispatch(data) {\n    return Events.postEvent(data);\n  }\n}), _dec(_class = (_temp = _class2 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WorksForYou, _Component);\n\n  function WorksForYou() {\n    _classCallCheck(this, WorksForYou);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WorksForYou).apply(this, arguments));\n  }\n\n  _createClass(WorksForYou, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          artistID = _this$props.artistID,\n          forSale = _this$props.forSale;\n      var includeSelectedArtist = !!artistID;\n      var filter = forSale ? [\"IS_FOR_SALE\"] : null;\n      return React.createElement(ContextConsumer, null, function (_ref) {\n        var relayEnvironment = _ref.relayEnvironment,\n            user = _ref.user;\n        var hasBuyNowLabFeature = user && user.lab_features && user.lab_features.includes(\"New Buy Now Flow\");\n        return React.createElement(React.Fragment, null, hasBuyNowLabFeature && React.createElement(MarketingHeader, null), React.createElement(QueryRenderer, {\n          environment: relayEnvironment,\n          query: _graphql || (_graphql = function _graphql() {\n            var node = require(\"../../__generated__/WorksForYouQuery.graphql\");\n\n            if (node.hash && node.hash !== \"999627e386e8d9857bbd8bda3669a40a\") {\n              console.error(\"The definition of 'WorksForYouQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n            }\n\n            return require(\"../../__generated__/WorksForYouQuery.graphql\");\n          }),\n          variables: {\n            artistID: artistID,\n            includeSelectedArtist: includeSelectedArtist,\n            forSale: forSale,\n            filter: filter\n          },\n          render: function render(_ref2) {\n            var props = _ref2.props;\n\n            if (props) {\n              return React.createElement(React.Fragment, null, includeSelectedArtist ? React.createElement(WorksForYouArtist, {\n                artistID: _this.props.artistID,\n                viewer: props.viewer,\n                forSale: forSale,\n                user: user\n              }) : React.createElement(WorksForYouContent, {\n                user: user,\n                viewer: props.viewer\n              }));\n            } else {\n              return React.createElement(SpinnerContainer, null, React.createElement(Spinner, null));\n            }\n          }\n        }));\n      });\n    }\n  }]);\n\n  return WorksForYou;\n}(Component), _defineProperty(_class2, \"defaultProps\", {\n  forSale: true,\n  artistID: \"\"\n}), _temp)) || _class);",{"version":3,"sources":["/Users/eve/development/reaction/src/Apps/WorksForYou/index.tsx"],"names":["MarketingHeader","ContextConsumer","track","Spinner","React","Component","graphql","QueryRenderer","styled","Events","WorksForYouArtist","WorksForYouContent","SpinnerContainer","div","WorksForYou","dispatch","data","postEvent","props","artistID","forSale","includeSelectedArtist","filter","relayEnvironment","user","hasBuyNowLabFeature","lab_features","includes","viewer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,eAAT;AACA,SAASC,eAAT;AACA,SAASC,KAAT;AACA,OAAOC,OAAP;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,EAAkBC,aAAlB,QAAuC,aAAvC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,MAAP;AACA,OAAOC,iBAAP;AACA,OAAOC,kBAAP;AAOA,IAAMC,gBAAgB,GAAGJ,MAAM,CAACK,GAAV;AAAA;AAAA;AAAA,kDAAtB;AASA,WAAaC,WAAb,WAHCZ,KAAK,CAAC,IAAD,EAAO;AACXa,EAAAA,QAAQ,EAAE,kBAAAC,IAAI;AAAA,WAAIP,MAAM,CAACQ,SAAP,CAAiBD,IAAjB,CAAJ;AAAA;AADH,CAAP,CAGN;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,6BAMW;AAAA;;AAAA,wBACuB,KAAKE,KAD5B;AAAA,UACCC,QADD,eACCA,QADD;AAAA,UACWC,OADX,eACWA,OADX;AAEP,UAAMC,qBAAqB,GAAG,CAAC,CAACF,QAAhC;AACA,UAAMG,MAA+B,GAAGF,OAAO,GAAG,CAAC,aAAD,CAAH,GAAqB,IAApE;AAEA,aACE,oBAAC,eAAD,QACG,gBAAgC;AAAA,YAA7BG,gBAA6B,QAA7BA,gBAA6B;AAAA,YAAXC,IAAW,QAAXA,IAAW;AAC/B,YAAMC,mBAAmB,GACvBD,IAAI,IACJA,IAAI,CAACE,YADL,IAEAF,IAAI,CAACE,YAAL,CAAkBC,QAAlB,CAA2B,kBAA3B,CAHF;AAKA,eACE,0CACGF,mBAAmB,IAAI,oBAAC,eAAD,OAD1B,EAGE,oBAAC,aAAD;AACE,UAAA,WAAW,EAAEF,gBADf;AAEE,UAAA,KAAK;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,YAFP;AAmBE,UAAA,SAAS,EAAE;AAAEJ,YAAAA,QAAQ,EAARA,QAAF;AAAYE,YAAAA,qBAAqB,EAArBA,qBAAZ;AAAmCD,YAAAA,OAAO,EAAPA,OAAnC;AAA4CE,YAAAA,MAAM,EAANA;AAA5C,WAnBb;AAoBE,UAAA,MAAM,EAAE,uBAAe;AAAA,gBAAZJ,KAAY,SAAZA,KAAY;;AACrB,gBAAIA,KAAJ,EAAW;AACT,qBACE,0CACGG,qBAAqB,GACpB,oBAAC,iBAAD;AACE,gBAAA,QAAQ,EAAE,KAAI,CAACH,KAAL,CAAWC,QADvB;AAEE,gBAAA,MAAM,EAAED,KAAK,CAACU,MAFhB;AAGE,gBAAA,OAAO,EAAER,OAHX;AAIE,gBAAA,IAAI,EAAEI;AAJR,gBADoB,GAQpB,oBAAC,kBAAD;AACE,gBAAA,IAAI,EAAEA,IADR;AAEE,gBAAA,MAAM,EAAEN,KAAK,CAACU;AAFhB,gBATJ,CADF;AAiBD,aAlBD,MAkBO;AACL,qBACE,oBAAC,gBAAD,QACE,oBAAC,OAAD,OADF,CADF;AAKD;AACF;AA9CH,UAHF,CADF;AAsDD,OA7DH,CADF;AAiED;AA5EH;;AAAA;AAAA,EAAiCvB,SAAjC,4CACwB;AACpBe,EAAAA,OAAO,EAAE,IADW;AAEpBD,EAAAA,QAAQ,EAAE;AAFU,CADxB","sourcesContent":["import { ArtistArtworksFilters } from \"__generated__/WorksForYouQuery.graphql\"\nimport { WorksForYouQuery } from \"__generated__/WorksForYouQuery.graphql\"\nimport { MarketingHeader } from \"Apps/WorksForYou/Components/MarketingHeader\"\nimport { ContextConsumer, ContextProps } from \"Artsy\"\nimport { track } from \"Artsy/Analytics\"\nimport Spinner from \"Components/Spinner\"\nimport React, { Component } from \"react\"\nimport { graphql, QueryRenderer } from \"react-relay\"\nimport styled from \"styled-components\"\nimport Events from \"Utils/Events\"\nimport WorksForYouArtist from \"./WorksForYouArtist\"\nimport WorksForYouContent from \"./WorksForYouContents\"\n\nexport interface Props extends ContextProps {\n  artistID?: string\n  forSale?: boolean\n}\n\nconst SpinnerContainer = styled.div`\n  width: 100%;\n  height: 100px;\n  position: relative;\n`\n\n@track(null, {\n  dispatch: data => Events.postEvent(data),\n})\nexport class WorksForYou extends Component<Props> {\n  static defaultProps = {\n    forSale: true,\n    artistID: \"\",\n  }\n\n  render() {\n    const { artistID, forSale } = this.props\n    const includeSelectedArtist = !!artistID\n    const filter: ArtistArtworksFilters[] = forSale ? [\"IS_FOR_SALE\"] : null\n\n    return (\n      <ContextConsumer>\n        {({ relayEnvironment, user }) => {\n          const hasBuyNowLabFeature =\n            user &&\n            user.lab_features &&\n            user.lab_features.includes(\"New Buy Now Flow\")\n\n          return (\n            <>\n              {hasBuyNowLabFeature && <MarketingHeader />}\n\n              <QueryRenderer<WorksForYouQuery>\n                environment={relayEnvironment}\n                query={graphql`\n                  query WorksForYouQuery(\n                    $includeSelectedArtist: Boolean!\n                    $artistID: String!\n                    $forSale: Boolean\n                    $filter: [ArtistArtworksFilters]\n                  ) {\n                    viewer {\n                      ...WorksForYouContents_viewer\n                        @skip(if: $includeSelectedArtist)\n                        @arguments(for_sale: $forSale)\n                      ...WorksForYouArtist_viewer\n                        @include(if: $includeSelectedArtist)\n                        @arguments(artistID: $artistID, filter: $filter)\n                    }\n                  }\n                `}\n                variables={{ artistID, includeSelectedArtist, forSale, filter }}\n                render={({ props }) => {\n                  if (props) {\n                    return (\n                      <>\n                        {includeSelectedArtist ? (\n                          <WorksForYouArtist\n                            artistID={this.props.artistID}\n                            viewer={props.viewer}\n                            forSale={forSale}\n                            user={user}\n                          />\n                        ) : (\n                          <WorksForYouContent\n                            user={user}\n                            viewer={props.viewer}\n                          />\n                        )}\n                      </>\n                    )\n                  } else {\n                    return (\n                      <SpinnerContainer>\n                        <Spinner />\n                      </SpinnerContainer>\n                    )\n                  }\n                }}\n              />\n            </>\n          )\n        }}\n      </ContextConsumer>\n    )\n  }\n}\n"]}]}