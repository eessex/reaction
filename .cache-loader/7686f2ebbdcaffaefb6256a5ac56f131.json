{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/ArtistFilter/Artworks.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/ArtistFilter/Artworks.tsx","mtime":1529688806000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1529423546000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactRelay = require(\"react-relay\");\n\nvar _unstated = require(\"unstated\");\n\nvar _ArtworkGrid = _interopRequireDefault(require(\"../ArtworkGrid\"));\n\nvar _state = require(\"./state\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PAGE_SIZE = 10;\n\nvar Artworks =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Artworks, _React$Component);\n\n  function Artworks() {\n    _classCallCheck(this, Artworks);\n\n    return _possibleConstructorReturn(this, (Artworks.__proto__ || Object.getPrototypeOf(Artworks)).apply(this, arguments));\n  }\n\n  _createClass(Artworks, [{\n    key: \"loadArtworks\",\n    value: function loadArtworks(filters, cursor, page) {\n      this.props.relay.refetch({\n        first: PAGE_SIZE,\n        after: cursor,\n        filteredArtworksNodeID: this.props.filtered_artworks.__id\n      }, null, function (error) {\n        if (error) {\n          console.error(error);\n        }\n\n        filters.setPage(page);\n      });\n    }\n  }, {\n    key: \"renderPages\",\n    value: function renderPages(filters, pageCursors) {\n      var _this = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        prefix: \"\",\n        suffix: null\n      };\n      return pageCursors.map(function (pageCursor) {\n        var cursor = pageCursor.cursor,\n            isCurrent = pageCursor.isCurrent,\n            page = pageCursor.page;\n        var prefix = options.prefix,\n            suffix = options.suffix;\n        return React.createElement(\"span\", {\n          onClick: function onClick() {\n            _this.loadArtworks(filters, cursor, page);\n          },\n          style: {\n            padding: \"\".concat(isCurrent ? \"0 10px 0 10px\" : \"0 3px 0 0\")\n          }\n        }, prefix ? prefix + page : page, suffix);\n      });\n    }\n  }, {\n    key: \"renderPagination\",\n    value: function renderPagination(filters) {\n      var _props$filtered_artwo = this.props.filtered_artworks.artworks.pageCursors,\n          first = _props$filtered_artwo.first,\n          last = _props$filtered_artwo.last,\n          around = _props$filtered_artwo.around;\n      return React.createElement(\"div\", null, React.createElement(\"div\", null, first ? this.renderPages(filters, [first], {\n        prefix: \"\",\n        suffix: \"...\"\n      }) : null, this.renderPages(filters, around), last ? this.renderPages(filters, [last], {\n        prefix: \"...\",\n        suffix: \"\"\n      }) : null));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(_unstated.Subscribe, {\n        to: [_state.FilterState]\n      }, function (filters) {\n        return React.createElement(\"div\", null, _this2.renderPagination(filters), React.createElement(_ArtworkGrid.default, {\n          artworks: _this2.props.filtered_artworks.artworks,\n          columnCount: 4,\n          itemMargin: 40\n        }));\n      });\n    }\n  }]);\n\n  return Artworks;\n}(React.Component);\n\nvar _default = (0, _reactRelay.createRefetchContainer)(Artworks, {\n  filtered_artworks: function filtered_artworks() {\n    var node = require(\"../../__generated__/Artworks_filtered_artworks.graphql\");\n\n    if (node.hash && node.hash !== \"94cfa97000cde16ce76ce1cb64ad74fa\") {\n      console.error(\"The definition of 'Artworks_filtered_artworks' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../__generated__/Artworks_filtered_artworks.graphql\");\n  }\n}, function () {\n  var node = require(\"../../__generated__/ArtworksQuery.graphql\");\n\n  if (node.hash && node.hash !== \"dfa77e823c08f9f065d2e6f66c506127\") {\n    console.error(\"The definition of 'ArtworksQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n  }\n\n  return require(\"../../__generated__/ArtworksQuery.graphql\");\n});\n\nexports.default = _default;",{"version":3,"sources":["src/Components/ArtistFilter/Artworks.tsx"],"names":["PAGE_SIZE","Artworks","filters","cursor","page","props","relay","refetch","first","after","filteredArtworksNodeID","filtered_artworks","__id","error","console","setPage","pageCursors","options","prefix","suffix","map","pageCursor","isCurrent","loadArtworks","padding","artworks","last","around","renderPages","renderPagination","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;;;;;;;;;;;AAUA,IAAMA,YAAY,EAAlB;;IAEMC,Q;;;;;;;;;;;;;iCACSC,O,EAASC,M,EAAQC,I,EAAM;AAClC,WAAKC,KAAL,CAAWC,KAAX,CAAiBC,OAAjB,CACE;AACEC,eAAOR,SADT;AAEES,eAAON,MAFT;AAGEO,gCAAwB,KAAKL,KAAL,CAAWM,iBAAX,CAA6BC;AAHvD,OADF,EAME,IANF,EAOE,iBAAS;AACP,YAAIC,KAAJ,EAAW;AACTC,kBAAQD,KAAR,CAAcA,KAAd;AACD;;AACDX,gBAAQa,OAAR,CAAgBX,IAAhB;AACD,OAZH;AAcD;;;gCACWF,O,EAASc,W,EAAqD;AAAA;;AAAA,UAAxCC,OAAwC,uEAA9B;AAAEC,gBAAQ,EAAV;AAAcC,gBAAQ;AAAtB,OAA8B;AACxE,aAAOH,YAAYI,GAAZ,CAAgB,sBAAc;AAAA,YAC3BjB,MAD2B,GACCkB,UADD,CAC3BlB,MAD2B;AAAA,YACnBmB,SADmB,GACCD,UADD,CACnBC,SADmB;AAAA,YACRlB,IADQ,GACCiB,UADD,CACRjB,IADQ;AAAA,YAE3Bc,MAF2B,GAERD,OAFQ,CAE3BC,MAF2B;AAAA,YAEnBC,MAFmB,GAERF,OAFQ,CAEnBE,MAFmB;AAGnC,eACE;AACE,mBAAS,mBAAM;AACb,kBAAKI,YAAL,CAAkBrB,OAAlB,EAA2BC,MAA3B,EAAmCC,IAAnC;AACD,WAHH;AAIE,iBAAO;AACLoB,+BAAYF,YAAY,eAAZ,GAA8B,WAA1C;AADK;AAJT,WAQGJ,SAASA,SAASd,IAAlB,GAAyBA,IAR5B,EASGe,MATH,CADF;AAaD,OAhBM,CAAP;AAiBD;;;qCACgBjB,O,EAAS;AAAA,kCAKpB,KAAKG,KAAL,CAAWM,iBAAX,CAA6Bc,QAA7B,CAAsCT,WALlB;AAAA,UAEtBR,KAFsB,yBAEtBA,KAFsB;AAAA,UAGtBkB,IAHsB,yBAGtBA,IAHsB;AAAA,UAItBC,MAJsB,yBAItBA,MAJsB;AAMxB,aACE,iCACE,iCACGnB,QACG,KAAKoB,WAAL,CAAiB1B,OAAjB,EAA0B,CAACM,KAAD,CAA1B,EAAmC;AACjCU,gBAAQ,EADyB;AAEjCC,gBAAQ;AAFyB,OAAnC,CADH,GAKG,IANN,EAOG,KAAKS,WAAL,CAAiB1B,OAAjB,EAA0ByB,MAA1B,CAPH,EAQGD,OACG,KAAKE,WAAL,CAAiB1B,OAAjB,EAA0B,CAACwB,IAAD,CAA1B,EAAkC;AAChCR,gBAAQ,KADwB;AAEhCC,gBAAQ;AAFwB,OAAlC,CADH,GAKG,IAbN,CADF,CADF;AAmBD;;;6BAEQ;AAAA;;AACP,aACE;AAAW,YAAI;AAAf,SACG,mBAAW;AACV,eACE,iCACG,OAAKU,gBAAL,CAAsB3B,OAAtB,CADH,EAEE;AACE,oBAAU,OAAKG,KAAL,CAAWM,iBAAX,CAA6Bc,QADzC;AAEE,uBAAa,CAFf;AAGE,sBAAY;AAHd,UAFF,CADF;AAUD,OAZH,CADF;AAgBD;;;;EAhFoBK,MAAMC,S;;eAmFd,wCACb9B,QADa,EAEb;AACEU;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AADF,CAFa;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,E","file":"/Users/eve/development/reaction/src/Components/ArtistFilter/Artworks.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import * as React from \"react\"\nimport { createRefetchContainer, graphql, RelayRefetchProp } from \"react-relay\"\nimport { Subscribe } from \"unstated\"\n\nimport ArtworkGrid from \"../ArtworkGrid\"\nimport { FilterState } from \"./state\"\n\nimport { Artworks_filtered_artworks } from \"../../__generated__/Artworks_filtered_artworks.graphql\"\n\ninterface Props {\n  filtered_artworks: Artworks_filtered_artworks\n  relay: RelayRefetchProp\n  artistID: string\n}\n\nconst PAGE_SIZE = 10\n\nclass Artworks extends React.Component<Props> {\n  loadArtworks(filters, cursor, page) {\n    this.props.relay.refetch(\n      {\n        first: PAGE_SIZE,\n        after: cursor,\n        filteredArtworksNodeID: this.props.filtered_artworks.__id,\n      },\n      null,\n      error => {\n        if (error) {\n          console.error(error)\n        }\n        filters.setPage(page)\n      }\n    )\n  }\n  renderPages(filters, pageCursors, options = { prefix: \"\", suffix: null }) {\n    return pageCursors.map(pageCursor => {\n      const { cursor, isCurrent, page } = pageCursor\n      const { prefix, suffix } = options\n      return (\n        <span\n          onClick={() => {\n            this.loadArtworks(filters, cursor, page)\n          }}\n          style={{\n            padding: `${isCurrent ? \"0 10px 0 10px\" : \"0 3px 0 0\"}`,\n          }}\n        >\n          {prefix ? prefix + page : page}\n          {suffix}\n        </span>\n      )\n    })\n  }\n  renderPagination(filters) {\n    const {\n      first,\n      last,\n      around,\n    } = this.props.filtered_artworks.artworks.pageCursors\n    return (\n      <div>\n        <div>\n          {first\n            ? this.renderPages(filters, [first], {\n                prefix: \"\",\n                suffix: \"...\",\n              })\n            : null}\n          {this.renderPages(filters, around)}\n          {last\n            ? this.renderPages(filters, [last], {\n                prefix: \"...\",\n                suffix: \"\",\n              })\n            : null}\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <Subscribe to={[FilterState]}>\n        {filters => {\n          return (\n            <div>\n              {this.renderPagination(filters)}\n              <ArtworkGrid\n                artworks={this.props.filtered_artworks.artworks as any}\n                columnCount={4}\n                itemMargin={40}\n              />\n            </div>\n          )\n        }}\n      </Subscribe>\n    )\n  }\n}\n\nexport default createRefetchContainer(\n  Artworks,\n  {\n    filtered_artworks: graphql`\n      fragment Artworks_filtered_artworks on FilterArtworks\n        @argumentDefinitions(\n          first: { type: \"Int\", defaultValue: 10 }\n          after: { type: \"String\", defaultValue: \"\" }\n        ) {\n        __id\n        artworks: artworks_connection(first: $first, after: $after) {\n          pageInfo {\n            hasNextPage\n            endCursor\n          }\n          pageCursors {\n            around {\n              cursor\n              page\n              isCurrent\n            }\n            first {\n              cursor\n              page\n              isCurrent\n            }\n            last {\n              cursor\n              page\n              isCurrent\n            }\n          }\n          ...ArtworkGrid_artworks\n          edges {\n            node {\n              __id\n            }\n          }\n        }\n      }\n    `,\n  },\n  graphql`\n    query ArtworksQuery(\n      $filteredArtworksNodeID: ID!\n      $first: Int!\n      $after: String\n    ) {\n      node(__id: $filteredArtworksNodeID) {\n        ...Artworks_filtered_artworks @arguments(first: $first, after: $after)\n      }\n    }\n  `\n)\n"]}]}