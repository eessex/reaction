{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Publishing/Sections/ArtworkCaption.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Sections/ArtworkCaption.tsx","mtime":1532964575000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _compact from \"lodash/compact\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    &.artist-name {\\n      margin-bottom: 5px;\\n    }\\n  \"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    \", \"\\n    flex-direction: column;\\n\\n    .title, .title a {\\n      \", \"\\n    }\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    padding: 0 10px;\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { garamond, unica } from \"../../../Assets/Fonts\";\nimport { Truncator } from \"../../Truncator\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport Colors from \"../../../Assets/Colors\";\nimport { ErrorBoundary } from \"../../ErrorBoundary\";\nimport { pMedia } from \"../../Helpers\";\nimport TextLink from \"../../TextLink\";\nexport var ArtworkCaption =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ArtworkCaption, _React$Component);\n\n  function ArtworkCaption() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ArtworkCaption);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ArtworkCaption)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"renderPartnerCredit\", function () {\n      var children = [_this.renderPartner(), _this.renderCredit()];\n\n      var joined = _this.joinParts(children, \"renderPartnerCredit\", \". \");\n\n      return joined;\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"renderFullscreenCaption\", function () {\n      return React.createElement(StyledFullscreenCaption, null, React.createElement(Line, null, React.createElement(ArtistNames, null, _this.renderArtists())), React.createElement(\"div\", null, React.createElement(Line, null, _this.renderTitleDate()), React.createElement(Line, null, _this.renderPartnerCredit())));\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"renderClassicCaption\", function () {\n      return React.createElement(StyledClassicCaption, {\n        className: \"display-artwork__caption\"\n      }, React.createElement(Truncator, null, React.createElement(ArtistNames, null, _this.renderArtists()), _this.renderTitleDate(), \". \", _this.renderPartner()));\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"renderEditorialCaption\", function () {\n      var _this$props = _this.props,\n          layout = _this$props.layout,\n          sectionLayout = _this$props.sectionLayout;\n      return React.createElement(StyledArtworkCaption, {\n        layout: layout,\n        sectionLayout: sectionLayout,\n        className: \"display-artwork__caption\"\n      }, React.createElement(ArtistNames, null, _this.renderArtists()), React.createElement(\"div\", null, React.createElement(Truncator, null, _this.renderTitleDate()), React.createElement(Truncator, null, _this.renderPartnerCredit())));\n    });\n\n    return _this;\n  }\n\n  _createClass(ArtworkCaption, [{\n    key: \"joinParts\",\n    value: function joinParts(children, key) {\n      var delimiter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \", \";\n\n      var compacted = _compact(children);\n\n      if (compacted.length) {\n        var reduced = compacted.reduce(function (prev, curr, i) {\n          return [prev, React.createElement(\"span\", {\n            key: \"joinParts-\".concat(key, \"-\").concat(i)\n          }, delimiter), curr];\n        });\n        return reduced;\n      } else {\n        return [];\n      }\n    }\n  }, {\n    key: \"joinArtistNames\",\n    value: function joinArtistNames(names) {\n      var delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \", \";\n\n      if (names.length === 0) {\n        return [];\n      }\n\n      return names.slice(1).reduce(function (prev, curr, i) {\n        return prev.concat([React.createElement(\"span\", {\n          key: \"joinArtistNames-\".concat(i)\n        }, delimiter), curr]);\n      }, [names[0]]);\n    }\n  }, {\n    key: \"renderArtists\",\n    value: function renderArtists() {\n      var _this2 = this;\n\n      var _this$props$artwork = this.props.artwork,\n          artist = _this$props$artwork.artist,\n          artists = _this$props$artwork.artists; // Multiple artists\n\n      if (artists && artists.length > 1) {\n        var names = artists.map(function (a, i) {\n          var artistName = _this2.renderArtistName(a, \"renderArtists-\".concat(i));\n\n          return artistName;\n        });\n        var joinedNames = this.joinArtistNames(names);\n        return joinedNames; // Single artist\n      } else if (artist) {\n        var artistName = this.renderArtistName(artist, \"renderArtists-single\");\n        return artistName;\n      }\n    }\n  }, {\n    key: \"renderArtistName\",\n    value: function renderArtistName(artist, key) {\n      var linked = this.props.linked;\n      var name = artist.name,\n          slug = artist.slug;\n      var createTextLink = linked && slug;\n\n      if (createTextLink) {\n        var href = \"/artist/\".concat(slug);\n        return React.createElement(ArtistName, {\n          key: \"renderArtistName-\".concat(key)\n        }, React.createElement(TextLink, {\n          href: href,\n          color: \"#999\"\n        }, name));\n      } else {\n        return React.createElement(\"span\", {\n          key: \"renderArtistName-\".concat(key),\n          className: \"name\"\n        }, name);\n      }\n    }\n  }, {\n    key: \"renderTitleDate\",\n    value: function renderTitleDate() {\n      var children = [this.renderTitle(), this.renderDate()];\n      var titleDate = this.joinParts(children, \"renderTitleDate\");\n      return titleDate;\n    }\n  }, {\n    key: \"renderTitle\",\n    value: function renderTitle() {\n      var _this$props2 = this.props,\n          _this$props2$artwork = _this$props2.artwork,\n          slug = _this$props2$artwork.slug,\n          title = _this$props2$artwork.title,\n          linked = _this$props2.linked;\n\n      if (title) {\n        if (linked) {\n          var href = \"/artwork/\".concat(slug);\n          return React.createElement(\"span\", {\n            key: \"renderTitle\",\n            className: \"title\"\n          }, React.createElement(TextLink, {\n            href: href,\n            color: \"#999\"\n          }, title));\n        } else {\n          return React.createElement(\"span\", {\n            key: \"renderTitle\",\n            className: \"title\"\n          }, title);\n        }\n      }\n    }\n  }, {\n    key: \"renderDate\",\n    value: function renderDate() {\n      var date = this.props.artwork.date;\n\n      if (date && date.length) {\n        return React.createElement(\"span\", {\n          key: \"renderDate\",\n          className: \"date\"\n        }, date);\n      }\n    }\n  }, {\n    key: \"renderPartner\",\n    value: function renderPartner() {\n      var _this$props3 = this.props,\n          _this$props3$artwork$ = _this$props3.artwork.partner,\n          name = _this$props3$artwork$.name,\n          slug = _this$props3$artwork$.slug,\n          linked = _this$props3.linked;\n\n      if (name) {\n        var createTextLink = Boolean(linked && slug);\n\n        if (createTextLink) {\n          return React.createElement(TextLink, {\n            key: \"renderPartner\",\n            href: \"/\".concat(slug),\n            color: \"#999\"\n          }, name);\n        } else {\n          return name;\n        }\n      }\n    }\n  }, {\n    key: \"renderCredit\",\n    value: function renderCredit() {\n      var credit = this.props.artwork.credit;\n\n      if (credit && credit.length) {\n        return React.createElement(\"span\", {\n          key: \"renderCredit\",\n          className: \"credit\"\n        }, credit);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          layout = _this$props4.layout,\n          isFullscreenCaption = _this$props4.isFullscreenCaption;\n      return React.createElement(ErrorBoundary, null, React.createElement(\"div\", null, isFullscreenCaption ? this.renderFullscreenCaption() : layout === \"classic\" ? this.renderClassicCaption() : this.renderEditorialCaption()));\n    }\n  }]);\n\n  return ArtworkCaption;\n}(React.Component);\nvar ArtistNames = styled.span.withConfig({\n  displayName: \"ArtworkCaption__ArtistNames\",\n  componentId: \"t0bcvj-0\"\n})([\"margin-right:30px;\"]);\nvar ArtistName = styled.span.withConfig({\n  displayName: \"ArtworkCaption__ArtistName\",\n  componentId: \"t0bcvj-1\"\n})([\"white-space:nowrap;\"]);\nvar StyledArtworkCaption = styled.div.withConfig({\n  displayName: \"ArtworkCaption__StyledArtworkCaption\",\n  componentId: \"t0bcvj-2\"\n})([\"padding:\", \";margin-top:10px;display:flex;color:\", \";\", \";.title,.title a{\", \";}a{color:\", \";\", \";}\", \";\"], function (props) {\n  return props.sectionLayout === \"fillwidth\" ? \"0 10px;\" : \"0;\";\n}, Colors.grayDark, unica(\"s14\"), unica(\"s14\", \"italic\"), Colors.grayDark, unica(\"s14\"), pMedia.xs(_templateObject()));\nvar StyledClassicCaption = styled.div.withConfig({\n  displayName: \"ArtworkCaption__StyledClassicCaption\",\n  componentId: \"t0bcvj-3\"\n})([\"margin-top:10px;display:block;color:\", \";\", \";\", \"{margin-right:0;font-weight:bold;&:after{content:\\\", \\\";}}.title{font-style:italic;}\"], Colors.grayDark, garamond(\"s15\"), ArtistNames);\nvar StyledFullscreenCaption = styled.div.withConfig({\n  displayName: \"ArtworkCaption__StyledFullscreenCaption\",\n  componentId: \"t0bcvj-4\"\n})([\"\", \";display:flex;color:black;.title{\", \";}.title,.title a{\", \";}a{color:black;\", \";}\", \";\"], unica(\"s16\", \"medium\"), unica(\"s16\", \"mediumItalic\"), unica(\"s16\", \"mediumItalic\"), unica(\"s16\", \"medium\"), pMedia.sm(_templateObject2(), unica(\"s14\", \"medium\"), unica(\"s14\", \"mediumItalic\")));\nvar Line = styled.div.withConfig({\n  displayName: \"ArtworkCaption__Line\",\n  componentId: \"t0bcvj-5\"\n})([\"\", \";\"], pMedia.sm(_templateObject3()));",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Publishing/Sections/ArtworkCaption.tsx"],"names":["garamond","unica","Truncator","React","styled","Colors","ErrorBoundary","pMedia","TextLink","ArtworkCaption","children","renderPartner","renderCredit","joined","joinParts","renderArtists","renderTitleDate","renderPartnerCredit","props","layout","sectionLayout","key","delimiter","compacted","length","reduced","reduce","prev","curr","i","names","slice","concat","artwork","artist","artists","map","a","artistName","renderArtistName","joinedNames","joinArtistNames","linked","name","slug","createTextLink","href","renderTitle","renderDate","titleDate","title","date","partner","Boolean","credit","isFullscreenCaption","renderFullscreenCaption","renderClassicCaption","renderEditorialCaption","Component","ArtistNames","span","ArtistName","StyledArtworkCaption","div","grayDark","xs","StyledClassicCaption","StyledFullscreenCaption","sm","Line"],"mappings":"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","sourcesContent":["import { garamond, unica } from \"Assets/Fonts\"\nimport { Truncator } from \"Components/Truncator\"\nimport _ from \"lodash\"\nimport React from \"react\"\nimport styled from \"styled-components\"\nimport Colors from \"../../../Assets/Colors\"\nimport { ErrorBoundary } from \"../../ErrorBoundary\"\nimport { pMedia } from \"../../Helpers\"\nimport TextLink from \"../../TextLink\"\nimport { ArticleLayout, SectionLayout } from \"../Typings\"\n\ninterface ArtworkCaptionProps extends React.HTMLProps<HTMLDivElement> {\n  artwork: any\n  layout?: ArticleLayout\n  sectionLayout?: SectionLayout\n  linked?: boolean\n  isFullscreenCaption?: boolean\n}\n\ninterface StyledArtworkCaptionProps extends React.HTMLProps<HTMLDivElement> {\n  layout?: ArticleLayout\n  sectionLayout?: SectionLayout\n}\n\nexport class ArtworkCaption extends React.Component<ArtworkCaptionProps, null> {\n  joinParts(children, key, delimiter = \", \") {\n    const compacted = _.compact(children)\n\n    if (compacted.length) {\n      const reduced = compacted.reduce((prev, curr, i) => {\n        return [\n          prev,\n          <span key={`joinParts-${key}-${i}`}>{delimiter}</span>,\n          curr,\n        ]\n      })\n      return reduced\n    } else {\n      return []\n    }\n  }\n\n  joinArtistNames(names, delimiter = \", \") {\n    if (names.length === 0) {\n      return []\n    }\n\n    return names.slice(1).reduce(\n      (prev, curr, i) => {\n        return prev.concat([\n          <span key={`joinArtistNames-${i}`}>{delimiter}</span>,\n          curr,\n        ])\n      },\n      [names[0]]\n    )\n  }\n\n  renderArtists() {\n    const {\n      artwork: { artist, artists },\n    } = this.props\n\n    // Multiple artists\n    if (artists && artists.length > 1) {\n      const names = artists.map((a, i) => {\n        const artistName = this.renderArtistName(a, `renderArtists-${i}`)\n        return artistName\n      })\n\n      const joinedNames = this.joinArtistNames(names)\n      return joinedNames\n\n      // Single artist\n    } else if (artist) {\n      const artistName = this.renderArtistName(artist, \"renderArtists-single\")\n      return artistName\n    }\n  }\n\n  renderArtistName(artist, key: string) {\n    const { linked } = this.props\n    const { name, slug } = artist\n    const createTextLink = linked && slug\n\n    if (createTextLink) {\n      const href = `/artist/${slug}`\n\n      return (\n        <ArtistName key={`renderArtistName-${key}`}>\n          <TextLink href={href} color=\"#999\">\n            {name}\n          </TextLink>\n        </ArtistName>\n      )\n    } else {\n      return (\n        <span key={`renderArtistName-${key}`} className=\"name\">\n          {name}\n        </span>\n      )\n    }\n  }\n\n  renderTitleDate() {\n    const children = [this.renderTitle(), this.renderDate()]\n    const titleDate = this.joinParts(children, \"renderTitleDate\")\n    return titleDate\n  }\n\n  renderTitle() {\n    const {\n      artwork: { slug, title },\n      linked,\n    } = this.props\n\n    if (title) {\n      if (linked) {\n        const href = `/artwork/${slug}`\n\n        return (\n          <span key=\"renderTitle\" className=\"title\">\n            <TextLink href={href} color=\"#999\">\n              {title}\n            </TextLink>\n          </span>\n        )\n      } else {\n        return (\n          <span key=\"renderTitle\" className=\"title\">\n            {title}\n          </span>\n        )\n      }\n    }\n  }\n\n  renderDate() {\n    const {\n      artwork: { date },\n    } = this.props\n\n    if (date && date.length) {\n      return (\n        <span key=\"renderDate\" className=\"date\">\n          {date}\n        </span>\n      )\n    }\n  }\n\n  renderPartner() {\n    const {\n      artwork: {\n        partner: { name, slug },\n      },\n      linked,\n    } = this.props\n\n    if (name) {\n      const createTextLink = Boolean(linked && slug)\n\n      if (createTextLink) {\n        return (\n          <TextLink key=\"renderPartner\" href={`/${slug}`} color=\"#999\">\n            {name}\n          </TextLink>\n        )\n      } else {\n        return name\n      }\n    }\n  }\n\n  renderCredit() {\n    const {\n      artwork: { credit },\n    } = this.props\n\n    if (credit && credit.length) {\n      return (\n        <span key=\"renderCredit\" className=\"credit\">\n          {credit}\n        </span>\n      )\n    }\n  }\n\n  renderPartnerCredit = () => {\n    const children = [this.renderPartner(), this.renderCredit()]\n\n    const joined = this.joinParts(children, \"renderPartnerCredit\", \". \")\n    return joined\n  }\n\n  renderFullscreenCaption = () => {\n    return (\n      <StyledFullscreenCaption>\n        <Line>\n          <ArtistNames>{this.renderArtists()}</ArtistNames>\n        </Line>\n        <div>\n          <Line>{this.renderTitleDate()}</Line>\n          <Line>{this.renderPartnerCredit()}</Line>\n        </div>\n      </StyledFullscreenCaption>\n    )\n  }\n\n  renderClassicCaption = () => {\n    return (\n      <StyledClassicCaption className=\"display-artwork__caption\">\n        <Truncator>\n          <ArtistNames>{this.renderArtists()}</ArtistNames>\n          {this.renderTitleDate()}\n          {\". \"}\n          {this.renderPartner()}\n        </Truncator>\n      </StyledClassicCaption>\n    )\n  }\n\n  renderEditorialCaption = () => {\n    const { layout, sectionLayout } = this.props\n\n    return (\n      <StyledArtworkCaption\n        layout={layout}\n        sectionLayout={sectionLayout}\n        className=\"display-artwork__caption\"\n      >\n        <ArtistNames>{this.renderArtists()}</ArtistNames>\n        <div>\n          <Truncator>{this.renderTitleDate()}</Truncator>\n          <Truncator>{this.renderPartnerCredit()}</Truncator>\n        </div>\n      </StyledArtworkCaption>\n    )\n  }\n\n  render() {\n    const { layout, isFullscreenCaption } = this.props\n\n    return (\n      <ErrorBoundary>\n        <div>\n          {isFullscreenCaption\n            ? this.renderFullscreenCaption()\n            : layout === \"classic\"\n              ? this.renderClassicCaption()\n              : this.renderEditorialCaption()}\n        </div>\n      </ErrorBoundary>\n    )\n  }\n}\n\nconst ArtistNames = styled.span`\n  margin-right: 30px;\n`\n\nconst ArtistName = styled.span`\n  white-space: nowrap;\n`\n\nconst StyledArtworkCaption = styled.div`\n  padding: ${(props: StyledArtworkCaptionProps) =>\n    props.sectionLayout === \"fillwidth\" ? \"0 10px;\" : \"0;\"};\n  margin-top: 10px;\n  display: flex;\n  color: ${Colors.grayDark};\n  ${unica(\"s14\")};\n  .title,\n  .title a {\n    ${unica(\"s14\", \"italic\")};\n  }\n  a {\n    color: ${Colors.grayDark};\n    ${unica(\"s14\")};\n  }\n  ${pMedia.xs`\n    padding: 0 10px;\n  `};\n`\n\nconst StyledClassicCaption = styled.div`\n  margin-top: 10px;\n  display: block;\n  color: ${Colors.grayDark};\n  ${garamond(\"s15\")};\n\n  ${ArtistNames} {\n    margin-right: 0;\n    font-weight: bold;\n    &:after {\n      content: \", \";\n    }\n  }\n\n  .title {\n    font-style: italic;\n  }\n`\n\nconst StyledFullscreenCaption = styled.div`\n  ${unica(\"s16\", \"medium\")};\n  display: flex;\n  color: black;\n\n  .title {\n    ${unica(\"s16\", \"mediumItalic\")};\n  }\n\n  .title,\n  .title a {\n    ${unica(\"s16\", \"mediumItalic\")};\n  }\n  a {\n    color: black;\n    ${unica(\"s16\", \"medium\")};\n  }\n\n  ${pMedia.sm`\n    ${unica(\"s14\", \"medium\")}\n    flex-direction: column;\n\n    .title, .title a {\n      ${unica(\"s14\", \"mediumItalic\")}\n    }\n  `};\n`\n\nconst Line = styled.div`\n  ${pMedia.sm`\n    &.artist-name {\n      margin-bottom: 5px;\n    }\n  `};\n`\n"]}]}