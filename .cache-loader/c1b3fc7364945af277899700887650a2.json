{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Publishing/ToolTip/Components/ArtistMarketData.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/ToolTip/Components/ArtistMarketData.tsx","mtime":1527104249000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1526592628000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ArtistMarketData = void 0;\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _Fonts = require(\"../../../../Assets/Fonts\");\n\nvar _Truncator = require(\"../../Sections/Truncator\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nvar ALLOWED_CATEGORIES = [\"blue-chip\", \"top-established\", \"top-emerging\"];\n\nvar ArtistMarketData =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ArtistMarketData, _React$Component);\n\n  function ArtistMarketData() {\n    var _ref;\n\n    var _temp, _this;\n\n    _classCallCheck(this, ArtistMarketData);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _possibleConstructorReturn(_this, (_temp = _this = _possibleConstructorReturn(this, (_ref = ArtistMarketData.__proto__ || Object.getPrototypeOf(ArtistMarketData)).call.apply(_ref, [this].concat(args))), Object.defineProperty(_assertThisInitialized(_this), \"hasGalleryData\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        return (0, _lodash.intersection)(_this.galleryCategories(), ALLOWED_CATEGORIES).length > 0;\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"hasCollections\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var collections = _this.props.artist.collections;\n        return collections && collections.length > 0;\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"hasAuctionRecord\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var auctionResults = _this.props.artist.auctionResults;\n        return auctionResults && auctionResults.edges.length > 0;\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"galleryCategories\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var highlights = _this.props.artist.highlights;\n        var partners = highlights.partners ? highlights.partners.edges : [];\n        return (0, _lodash.map)((0, _lodash.flatten)((0, _lodash.map)(partners, \"node.categories\")), \"id\");\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderGalleryCategories\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        if (_this.hasGalleryData()) {\n          return ALLOWED_CATEGORIES.map(function (category, i) {\n            return _this.renderGalleryCategory(category, i);\n          });\n        }\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderGalleryCategory\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(category, i) {\n        var records = (0, _lodash.countBy)(_this.galleryCategories(), function (x) {\n          return x === category;\n        }).true;\n\n        if (records) {\n          var formattedCategory;\n          var formattedCategoryName = category.replace(\"-\", \" \");\n\n          if (records > 1) {\n            formattedCategory = \"\".concat(formattedCategoryName, \" galleries\");\n          } else {\n            formattedCategory = \"a \".concat(formattedCategoryName, \" gallery\");\n          }\n\n          return _react.default.createElement(\"div\", {\n            key: i\n          }, \"Represented by \", formattedCategory);\n        } else {\n          return null;\n        }\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderCollections\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        if (_this.hasCollections()) {\n          var collections = _this.props.artist.collections;\n          var text;\n\n          if (collections.length > 1) {\n            text = \"In the collections of \".concat(collections.join(\", \"));\n          } else {\n            text = \"In the collection of \".concat(collections[0]);\n          }\n\n          return _react.default.createElement(\"div\", null, text);\n        }\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderAuctionRecord\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        if (_this.hasAuctionRecord()) {\n          var auctionRecord = _this.props.artist.auctionResults.edges[0].node.price_realized.display;\n          return _react.default.createElement(\"div\", null, auctionRecord, \" auction record\");\n        }\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderArtistGenes\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var genes = _this.props.artist.genes;\n\n        if (genes.length) {\n          var formattedGenes = (0, _lodash.map)(genes, \"name\").join(\", \");\n          return _react.default.createElement(\"div\", null, formattedGenes);\n        }\n      }\n    }), _temp));\n  }\n\n  _createClass(ArtistMarketData, [{\n    key: \"render\",\n    value: function render() {\n      var hasMarketData = this.hasCollections() || this.hasGalleryData() || this.hasAuctionRecord();\n      return _react.default.createElement(Wrapper, null, hasMarketData ? _react.default.createElement(_Truncator.Truncator, {\n        maxLineCount: 3\n      }, this.renderGalleryCategories(), this.renderCollections(), this.renderAuctionRecord()) : this.renderArtistGenes());\n    }\n  }]);\n\n  return ArtistMarketData;\n}(_react.default.Component);\n\nexports.ArtistMarketData = ArtistMarketData;\n\nvar Wrapper =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArtistMarketData__Wrapper\",\n  componentId: \"s1gkc00-0\"\n})([\"\", \";padding:10px 0;\"], (0, _Fonts.unica)(\"s12\"));",{"version":3,"sources":["src/Components/Publishing/ToolTip/Components/ArtistMarketData.tsx"],"names":["ALLOWED_CATEGORIES","ArtistMarketData","galleryCategories","length","collections","props","artist","auctionResults","edges","highlights","partners","hasGalleryData","map","category","i","renderGalleryCategory","records","x","true","formattedCategory","formattedCategoryName","replace","hasCollections","text","join","hasAuctionRecord","auctionRecord","node","price_realized","display","genes","formattedGenes","hasMarketData","renderGalleryCategories","renderCollections","renderAuctionRecord","renderArtistGenes","Component","Wrapper","div"],"mappings":"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","file":"/Users/eve/development/reaction/src/Components/Publishing/ToolTip/Components/ArtistMarketData.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import styled from \"styled-components\"\nimport React from \"react\"\nimport { countBy, intersection, flatten, map } from \"lodash\"\nimport { unica } from \"Assets/Fonts\"\nimport { ArtistToolTipProps } from \"../ArtistToolTip\"\nimport { Truncator } from \"../../Sections/Truncator\"\n\nconst ALLOWED_CATEGORIES = [\"blue-chip\", \"top-established\", \"top-emerging\"]\n\nexport class ArtistMarketData extends React.Component<ArtistToolTipProps> {\n  hasGalleryData = () => {\n    return intersection(this.galleryCategories(), ALLOWED_CATEGORIES).length > 0\n  }\n\n  hasCollections = () => {\n    const { collections } = this.props.artist\n    return collections && collections.length > 0\n  }\n\n  hasAuctionRecord = () => {\n    const { auctionResults } = this.props.artist\n    return auctionResults && auctionResults.edges.length > 0\n  }\n\n  galleryCategories = () => {\n    const { highlights } = this.props.artist\n    const partners = highlights.partners ? highlights.partners.edges : []\n\n    return map(flatten(map(partners, \"node.categories\")), \"id\")\n  }\n\n  renderGalleryCategories = () => {\n    if (this.hasGalleryData()) {\n      return ALLOWED_CATEGORIES.map((category, i) => {\n        return this.renderGalleryCategory(category, i)\n      })\n    }\n  }\n\n  renderGalleryCategory = (category, i) => {\n    const records = countBy(this.galleryCategories(), x => x === category).true\n\n    if (records) {\n      let formattedCategory\n      const formattedCategoryName = category.replace(\"-\", \" \")\n\n      if (records > 1) {\n        formattedCategory = `${formattedCategoryName} galleries`\n      } else {\n        formattedCategory = `a ${formattedCategoryName} gallery`\n      }\n      return <div key={i}>Represented by {formattedCategory}</div>\n    } else {\n      return null\n    }\n  }\n\n  renderCollections = () => {\n    if (this.hasCollections()) {\n      const { collections } = this.props.artist\n      let text\n\n      if (collections.length > 1) {\n        text = `In the collections of ${collections.join(\", \")}`\n      } else {\n        text = `In the collection of ${collections[0]}`\n      }\n      return <div>{text}</div>\n    }\n  }\n\n  renderAuctionRecord = () => {\n    if (this.hasAuctionRecord()) {\n      const auctionRecord = this.props.artist.auctionResults.edges[0].node\n        .price_realized.display\n\n      return <div>{auctionRecord} auction record</div>\n    }\n  }\n\n  renderArtistGenes = () => {\n    const { genes } = this.props.artist\n    if (genes.length) {\n      const formattedGenes = map(genes, \"name\").join(\", \")\n      return <div>{formattedGenes}</div>\n    }\n  }\n\n  render() {\n    const hasMarketData =\n      this.hasCollections() || this.hasGalleryData() || this.hasAuctionRecord()\n\n    return (\n      <Wrapper>\n        {hasMarketData ? (\n          <Truncator maxLineCount={3}>\n            {this.renderGalleryCategories()}\n            {this.renderCollections()}\n            {this.renderAuctionRecord()}\n          </Truncator>\n        ) : (\n          this.renderArtistGenes()\n        )}\n      </Wrapper>\n    )\n  }\n}\n\nconst Wrapper = styled.div`\n  ${unica(\"s12\")};\n  padding: 10px 0;\n`\n"]}]}