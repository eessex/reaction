{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Onboarding/Steps/CollectorIntent.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Onboarding/Steps/CollectorIntent.tsx","mtime":1519658991000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1527877289000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.CollectorIntentComponent = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactRelay = require(\"react-relay\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Colors = _interopRequireDefault(require(\"../../../Assets/Colors\"));\n\nvar _Artsy = require(\"../../Artsy\");\n\nvar _MultiStateButton = require(\"../../Buttons/MultiStateButton\");\n\nvar _Helpers = require(\"../../Helpers\");\n\nvar _SelectableToggle = _interopRequireDefault(require(\"../SelectableToggle\"));\n\nvar _Layout = require(\"./Layout\");\n\nvar _graphql;\n\nvar _templateObject = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    width: 100%;\\n    margin-bottom: 20px;\\n  \"], [\"\\n    width: 100%;\\n    margin-bottom: 20px;\\n  \"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nvar OptionsContainer =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"CollectorIntent__OptionsContainer\",\n  componentId: \"s2y2pg2-0\"\n})([\"width:450px;margin:0 auto 100px;&:last-child{border-bottom:1px solid \", \";}\", \";\"], _Colors.default.grayRegular, _Helpers.media.sm(_templateObject));\n\nvar CollectorIntentComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectorIntentComponent, _React$Component);\n\n  function CollectorIntentComponent(props) {\n    var _this;\n\n    _classCallCheck(this, CollectorIntentComponent);\n\n    _this = _possibleConstructorReturn(this, (CollectorIntentComponent.__proto__ || Object.getPrototypeOf(CollectorIntentComponent)).call(this, props));\n    Object.defineProperty(_assertThisInitialized(_this), \"onOptionSelected\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(index) {\n        var selectedOptions = Object.assign({}, _this.state.selectedOptions);\n        selectedOptions[index] = !selectedOptions[index];\n\n        _this.setState({\n          selectedOptions: selectedOptions\n        });\n      }\n    });\n    _this.state = {\n      selectedOptions: {}\n    };\n    return _this;\n  }\n\n  _createClass(CollectorIntentComponent, [{\n    key: \"selectedIntents\",\n    value: function selectedIntents() {\n      var _this2 = this;\n\n      var intents = Object.values(CollectorIntentComponent.intentEnum).filter(function (_, index) {\n        return _this2.state.selectedOptions[index];\n      });\n      return intents;\n    }\n  }, {\n    key: \"submit\",\n    value: function submit() {\n      var _this3 = this;\n\n      var intents = Object.values(CollectorIntentComponent.intentEnum).filter(function (_, index) {\n        return _this3.state.selectedOptions[index];\n      });\n      (0, _reactRelay.commitMutation)(this.props.relayEnvironment, {\n        mutation: _graphql || (_graphql = function _graphql() {\n          var node = require(\"../../../__generated__/CollectorIntentUpdateCollectorProfileMutation.graphql\");\n\n          if (node.hash && node.hash !== \"7587732c7a2cfaaf18f92a3330980598\") {\n            console.error(\"The definition of 'CollectorIntentUpdateCollectorProfileMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n          }\n\n          return require(\"../../../__generated__/CollectorIntentUpdateCollectorProfileMutation.graphql\");\n        }),\n        variables: {\n          input: {\n            intents: intents\n          }\n        }\n      });\n      this.props.onNextButtonPressed();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var options = Object.keys(CollectorIntentComponent.intentEnum).map(function (text, index) {\n        return _react.default.createElement(_SelectableToggle.default, {\n          key: index,\n          text: text,\n          onSelect: _this4.onOptionSelected.bind(_this4, index),\n          selected: _this4.state.selectedOptions[index]\n        });\n      });\n      return _react.default.createElement(_Layout.Layout, {\n        title: \"How would you like to use Artsy?\",\n        subtitle: \"Select all that apply\",\n        onNextButtonPressed: this.submit.bind(this),\n        buttonState: this.selectedIntents().length > 0 ? _MultiStateButton.MultiButtonState.Highlighted : _MultiStateButton.MultiButtonState.Default\n      }, _react.default.createElement(OptionsContainer, null, options));\n    }\n  }]);\n\n  return CollectorIntentComponent;\n}(_react.default.Component);\n\nexports.CollectorIntentComponent = CollectorIntentComponent;\nObject.defineProperty(CollectorIntentComponent, \"slug\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: \"interests\"\n});\nObject.defineProperty(CollectorIntentComponent, \"intentEnum\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: {\n    \"buy art & design\": \"BUY_ART_AND_DESIGN\",\n    \"sell art & design\": \"SELL_ART_AND_DESIGN\",\n    \"research art prices\": \"RESEARCH_ART_PRICES\",\n    \"learn about art\": \"LEARN_ABOUT_ART\",\n    \"find out about new exhibitions\": \"FIND_ART_EXHIBITS\",\n    \"read art market news\": \"READ_ART_MARKET_NEWS\"\n  }\n});\nvar CollectorIntent = (0, _Artsy.ContextConsumer)(CollectorIntentComponent); // tslint:disable:no-string-literal\n\nCollectorIntent[\"slug\"] = CollectorIntentComponent.slug;\nvar _default = CollectorIntent;\nexports.default = _default;",{"version":3,"sources":["src/Components/Onboarding/Steps/CollectorIntent.tsx"],"names":["OptionsContainer","div","grayRegular","sm","CollectorIntentComponent","props","selectedOptions","Object","assign","state","index","setState","intents","values","intentEnum","filter","_","relayEnvironment","mutation","variables","input","onNextButtonPressed","options","keys","map","text","onOptionSelected","bind","submit","selectedIntents","length","Highlighted","Default","Component","CollectorIntent","slug"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA;AAAA;AAAmB,0BAAOC,GAA1B;AAAA;AAAA;AAAA,yFAIyB,gBAAOC,WAJhC,EAMF,eAAMC,EANJ,kBAAN;;IAmBaC,wB;;;;;AAYX,oCAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gJAAMA,KAAN;AADiB;AAAA;AAAA;AAAA;AAAA,aAQA,sBAAS;AAC1B,YAAMC,kBAAkBC,OAAOC,MAAP,CAAc,EAAd,EAAkB,MAAKC,KAAL,CAAWH,eAA7B,CAAxB;AACAA,wBAAgBI,KAAhB,IAAyB,CAACJ,gBAAgBI,KAAhB,CAA1B;;AAEA,cAAKC,QAAL,CAAc;AACZL;AADY,SAAd;AAGD;AAfkB;AAGjB,UAAKG,KAAL,GAAa;AACXH,uBAAiB;AADN,KAAb;AAHiB;AAMlB;;;;sCAWiB;AAAA;;AAChB,UAAMM,UAAUL,OAAOM,MAAP,CAAcT,yBAAyBU,UAAvC,EAAmDC,MAAnD,CACd,UAACC,CAAD,EAAIN,KAAJ;AAAA,eAAc,OAAKD,KAAL,CAAWH,eAAX,CAA2BI,KAA3B,CAAd;AAAA,OADc,CAAhB;AAIA,aAAOE,OAAP;AACD;;;6BAEQ;AAAA;;AACP,UAAMA,UAAUL,OAAOM,MAAP,CAAcT,yBAAyBU,UAAvC,EAAmDC,MAAnD,CACd,UAACC,CAAD,EAAIN,KAAJ;AAAA,eAAc,OAAKD,KAAL,CAAWH,eAAX,CAA2BI,KAA3B,CAAd;AAAA,OADc,CAAhB;AAIA,sCAAe,KAAKL,KAAL,CAAWY,gBAA1B,EAA4C;AAC1CC;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,UAD0C;AAU1CC,mBAAW;AACTC,iBAAO;AACLR;AADK;AADE;AAV+B,OAA5C;AAiBA,WAAKP,KAAL,CAAWgB,mBAAX;AACD;;;6BAEQ;AAAA;;AACP,UAAMC,UAAUf,OAAOgB,IAAP,CACdnB,yBAAyBU,UADX,EAEdU,GAFc,CAEV,UAACC,IAAD,EAAOf,KAAP;AAAA,eACJ;AACE,eAAKA,KADP;AAEE,gBAAMe,IAFR;AAGE,oBAAU,OAAKC,gBAAL,CAAsBC,IAAtB,CAA2B,MAA3B,EAAiCjB,KAAjC,CAHZ;AAIE,oBAAU,OAAKD,KAAL,CAAWH,eAAX,CAA2BI,KAA3B;AAJZ,UADI;AAAA,OAFU,CAAhB;AAWA,aACE;AACE,eAAM,kCADR;AAEE,kBAAS,uBAFX;AAGE,6BAAqB,KAAKkB,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAHvB;AAIE,qBACE,KAAKE,eAAL,GAAuBC,MAAvB,GAAgC,CAAhC,GACI,mCAAiBC,WADrB,GAEI,mCAAiBC;AAPzB,SAUE,6BAAC,gBAAD,QAAmBV,OAAnB,CAVF,CADF;AAcD;;;;EAxF2C,eAAMW,S;;;sBAAvC7B,wB;;;;SACgB;;sBADhBA,wB;;;;SAGS;AAClB,wBAAoB,oBADF;AAElB,yBAAqB,qBAFH;AAGlB,2BAAuB,qBAHL;AAIlB,uBAAmB,iBAJD;AAKlB,sCAAkC,mBALhB;AAMlB,4BAAwB;AANN;;AAwFtB,IAAM8B,kBAAkB,4BAAgB9B,wBAAhB,CAAxB,C,CACA;;AACA8B,gBAAgB,MAAhB,IAA0B9B,yBAAyB+B,IAAnD;eAEeD,e","file":"/Users/eve/development/reaction/src/Components/Onboarding/Steps/CollectorIntent.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import React from \"react\"\nimport { commitMutation, graphql } from \"react-relay\"\nimport styled from \"styled-components\"\n\nimport Colors from \"../../../Assets/Colors\"\nimport { ContextConsumer, ContextProps } from \"../../Artsy\"\nimport { MultiButtonState } from \"../../Buttons/MultiStateButton\"\nimport { media } from \"../../Helpers\"\nimport SelectableToggle from \"../SelectableToggle\"\nimport { StepProps } from \"../Types\"\nimport { Layout } from \"./Layout\"\n\nconst OptionsContainer = styled.div`\n  width: 450px;\n  margin: 0 auto 100px;\n  &:last-child {\n    border-bottom: 1px solid ${Colors.grayRegular};\n  }\n  ${media.sm`\n    width: 100%;\n    margin-bottom: 20px;\n  `};\n`\n\ntype Props = StepProps & ContextProps\n\ninterface State {\n  selectedOptions: { [option: string]: boolean }\n  error?: string\n}\n\nexport class CollectorIntentComponent extends React.Component<Props, State> {\n  static slug: \"interests\" = \"interests\"\n\n  static intentEnum = {\n    \"buy art & design\": \"BUY_ART_AND_DESIGN\",\n    \"sell art & design\": \"SELL_ART_AND_DESIGN\",\n    \"research art prices\": \"RESEARCH_ART_PRICES\",\n    \"learn about art\": \"LEARN_ABOUT_ART\",\n    \"find out about new exhibitions\": \"FIND_ART_EXHIBITS\",\n    \"read art market news\": \"READ_ART_MARKET_NEWS\",\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      selectedOptions: {},\n    }\n  }\n\n  onOptionSelected = index => {\n    const selectedOptions = Object.assign({}, this.state.selectedOptions)\n    selectedOptions[index] = !selectedOptions[index]\n\n    this.setState({\n      selectedOptions,\n    })\n  }\n\n  selectedIntents() {\n    const intents = Object.values(CollectorIntentComponent.intentEnum).filter(\n      (_, index) => this.state.selectedOptions[index]\n    )\n\n    return intents\n  }\n\n  submit() {\n    const intents = Object.values(CollectorIntentComponent.intentEnum).filter(\n      (_, index) => this.state.selectedOptions[index]\n    )\n\n    commitMutation(this.props.relayEnvironment, {\n      mutation: graphql`\n        mutation CollectorIntentUpdateCollectorProfileMutation(\n          $input: UpdateCollectorProfileInput!\n        ) {\n          updateCollectorProfile(input: $input) {\n            intents\n          }\n        }\n      `,\n      variables: {\n        input: {\n          intents,\n        },\n      },\n    })\n\n    this.props.onNextButtonPressed()\n  }\n\n  render() {\n    const options = Object.keys(\n      CollectorIntentComponent.intentEnum\n    ).map((text, index) => (\n      <SelectableToggle\n        key={index}\n        text={text}\n        onSelect={this.onOptionSelected.bind(this, index)}\n        selected={this.state.selectedOptions[index]}\n      />\n    ))\n\n    return (\n      <Layout\n        title=\"How would you like to use Artsy?\"\n        subtitle=\"Select all that apply\"\n        onNextButtonPressed={this.submit.bind(this)}\n        buttonState={\n          this.selectedIntents().length > 0\n            ? MultiButtonState.Highlighted\n            : MultiButtonState.Default\n        }\n      >\n        <OptionsContainer>{options}</OptionsContainer>\n      </Layout>\n    )\n  }\n}\n\nconst CollectorIntent = ContextConsumer(CollectorIntentComponent)\n// tslint:disable:no-string-literal\nCollectorIntent[\"slug\"] = CollectorIntentComponent.slug\n\nexport default CollectorIntent\n"]}]}