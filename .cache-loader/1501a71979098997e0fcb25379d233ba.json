{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/CanvasSlideshow.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/CanvasSlideshow.tsx","mtime":1532964575000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _map from \"lodash/map\";\nimport _compact from \"lodash/compact\";\n\nvar _dec, _dec2, _class, _class2;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\n    max-height: \", \"\\n  \"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\n  height: auto;\\n  max-width: \", \"\\n  object-fit: cover;\\n  object-position: center;\\n  \", \"\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n    margin: 0;\\n    max-width: calc(100% - 40px);\\n  \"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n    padding: 0 20px;\\n    width: 100%;\\n    a {\\n      height: initial;\\n      max-height: initial;\\n    }\\n  \"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n    padding: 0 40px;\\n    width: \", \"\\n    a {\\n      max-height: \", \"\\n    }\\n  \"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 380px;\\n  padding: 0 20px 0 0;\\n  \", \"\\n  \", \"\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n      max-width: \", \"\\n    \"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-right: 20px;\\n  &.title-card {\\n    max-width: 1190px;\\n    margin-left: 40px;\\n    width: \", \"\\n    display: flex;\\n    justify-content: space-between;\\n    \", \"\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n    max-height: \", \"\\n  \"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  overflow: hidden;\\n  .slick-list {\\n    max-height: \", \"\\n    padding: 0 !important;\\n  }\\n\\n  \", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    display: none;\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  position: absolute;\\n  height: 100%;\\n  max-height: \", \"\\n  top: 0;\\n  box-sizing: border-box;\\n  opacity: \", \"\\n  transition: opacity .5s;\\n  \", \"\\n  \", \"\\n  \", \" {\\n    z-index: 10;\\n    cursor: pointer;\\n    padding: 10px;\\n    background: rgba(255, 255, 255, .8);\\n    box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2);\\n    border-radius: 2px;\\n  }\\n  \", \"\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object['ke' + 'ys'](descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object['define' + 'Property'](target, property, desc); desc = null; } return desc; }\n\nimport Colors from \"../../../../Assets/Colors\";\nimport { garamond } from \"../../../../Assets/Fonts\";\nimport React from \"react\";\nimport Slider from \"react-slick\";\nimport track from \"react-tracking\";\nimport styled from \"styled-components\";\nimport { crop } from \"../../../../Utils/resizer\";\nimport { pMedia } from \"../../../Helpers\";\nimport Icon from \"../../../Icon\";\nimport { maxAssetSize } from \"./CanvasContainer\";\nexport var CanvasSlideshow = (_dec = track(), _dec2 = track(function (props) {\n  return {\n    action: \"Click\",\n    label: \"Display ad carousel arrow\",\n    entity_type: \"display_ad\",\n    campaign_name: props.campaign.name,\n    unit_layout: \"canvas_slideshow\"\n  };\n}), _dec(_class = (_class2 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CanvasSlideshow, _React$Component);\n\n  function CanvasSlideshow(props) {\n    var _this;\n\n    _classCallCheck(this, CanvasSlideshow);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CanvasSlideshow).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"slider\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"afterSlideChange\", function (currentSlide) {\n      _this.setState({\n        isOnTitle: currentSlide === 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"renderSlides\", function () {\n      var _this$props = _this.props,\n          unit = _this$props.unit,\n          containerWidth = _this$props.containerWidth;\n      return unit.assets.map(function (image, i) {\n        var renderTitleCard = i === 0 && containerWidth >= 900;\n        var imageSrc = crop(image.url, {\n          width: 780,\n          height: 460,\n          isDisplayAd: true\n        });\n        var caption = image.caption || \"\";\n        return React.createElement(Slide, {\n          key: i,\n          className: i === 0 && \"title-card\",\n          containerWidth: containerWidth\n        }, renderTitleCard && _this.renderTitleCard(), React.createElement(\"div\", null, React.createElement(Image, {\n          src: imageSrc,\n          alt: caption,\n          containerWidth: containerWidth\n        }), caption && React.createElement(Caption, null, image.caption)));\n      });\n    });\n\n    _this.onChangeSlide = _this.onChangeSlide.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      isOnTitle: true\n    };\n    return _this;\n  }\n\n  _createClass(CanvasSlideshow, [{\n    key: \"onChangeSlide\",\n    value: function onChangeSlide(slide) {\n      this.slider.slickGoTo(slide);\n    }\n  }, {\n    key: \"renderTitleCard\",\n    value: function renderTitleCard() {\n      var _this$props2 = this.props,\n          children = _this$props2.children,\n          disclaimer = _this$props2.disclaimer,\n          containerWidth = _this$props2.containerWidth,\n          unit = _this$props2.unit;\n      var renderDisclaimer = _compact(_map(unit.assets, \"caption\")).length > 0;\n      return React.createElement(Title, {\n        containerWidth: containerWidth\n      }, children, renderDisclaimer && React.createElement(Disclaimer, null, disclaimer));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var containerWidth = this.props.containerWidth;\n      var sliderSettings = {\n        dots: false,\n        lazyLoad: false,\n        infinite: false,\n        variableWidth: true,\n        centerMode: true,\n        nextArrow: React.createElement(RightArrow, {\n          containerWidth: containerWidth,\n          onChangeSlide: this.onChangeSlide\n        }),\n        prevArrow: React.createElement(LeftArrow, {\n          containerWidth: containerWidth,\n          onChangeSlide: this.onChangeSlide,\n          isOnTitle: this.state.isOnTitle\n        }),\n        initialSlide: 0,\n        afterChange: function afterChange(currentSlide) {\n          _this2.afterSlideChange(currentSlide);\n        },\n        responsive: [{\n          breakpoint: 900,\n          settings: {\n            infinite: true,\n            controls: false\n          }\n        }]\n      };\n      var renderTitleCard = containerWidth < 900;\n      return React.createElement(\"div\", null, React.createElement(SliderContainer, {\n        containerWidth: containerWidth\n      }, React.createElement(Slider, _extends({}, sliderSettings, {\n        ref: function ref(slider) {\n          return _this2.slider = slider;\n        }\n      }), this.renderSlides())), renderTitleCard && this.renderTitleCard());\n    }\n  }]);\n\n  return CanvasSlideshow;\n}(React.Component), (_applyDecoratedDescriptor(_class2.prototype, \"onChangeSlide\", [_dec2], Object.getOwnPropertyDescriptor(_class2.prototype, \"onChangeSlide\"), _class2.prototype)), _class2)) || _class);\n\nvar LeftArrow = function LeftArrow(props) {\n  var slide = props.currentSlide - 1 >= 0 ? 0 : props.currentSlide - 1;\n  return React.createElement(NavArrow, {\n    containerWidth: props.containerWidth,\n    direction: \"left\",\n    onClick: function onClick() {\n      return props.onChangeSlide(slide);\n    },\n    isVisible: !props.isOnTitle\n  }, React.createElement(Icon, {\n    name: \"chevron-left\",\n    color: \"black\",\n    fontSize: \"24px\"\n  }));\n};\n\nvar RightArrow = function RightArrow(props) {\n  var slide = props.currentSlide + 1 === props.slideCount ? 0 : props.currentSlide + 1;\n  return React.createElement(NavArrow, {\n    containerWidth: props.containerWidth,\n    direction: \"right\",\n    onClick: function onClick() {\n      return props.onChangeSlide(slide);\n    },\n    isVisible: true\n  }, React.createElement(Icon, {\n    name: \"chevron-right\",\n    color: \"black\",\n    fontSize: \"24px\"\n  }));\n};\n\nvar arrowDiv = styled.div;\nvar responsiveDiv = styled.div;\nvar responsiveImage = styled.img;\nvar NavArrow = arrowDiv(_templateObject(), function (props) {\n  return maxAssetSize(props.containerWidth).height + \"px;\";\n}, function (props) {\n  return props.isVisible ? \"1;\" : \"0;\";\n}, function (props) {\n  return props.direction === \"left\" && \"left: 0px;\";\n}, function (props) {\n  return props.direction === \"right\" && \"right: 0px;\";\n}, Icon, pMedia.md(_templateObject2()));\nvar SliderContainer = responsiveDiv(_templateObject3(), function (props) {\n  return \"calc(\" + maxAssetSize(props.containerWidth).height + \"px + 2.5em);\";\n}, function (props) {\n  return pMedia.md(_templateObject4(), maxAssetSize(props.containerWidth).height + \"px;\");\n});\nvar Slide = responsiveDiv(_templateObject5(), function (props) {\n  return props.containerWidth + \"px;\";\n}, function (props) {\n  return pMedia.md(_templateObject6(), maxAssetSize(props.containerWidth).width + \"px;\");\n});\nvar Title = responsiveDiv(_templateObject7(), function (props) {\n  return pMedia.xl(_templateObject8(), props.containerWidth * 0.35 + \"px;\", maxAssetSize(props.containerWidth).height + \"px;\");\n}, pMedia.md(_templateObject9()));\nvar Disclaimer = styled.div.withConfig({\n  displayName: \"CanvasSlideshow__Disclaimer\",\n  componentId: \"s1q5kr05-0\"\n})([\"margin:-5px 0 0;\", \";\"], pMedia.md(_templateObject10()));\nvar Image = responsiveImage(_templateObject11(), function (props) {\n  return maxAssetSize(props.containerWidth).width + \"px;\";\n}, function (props) {\n  return pMedia.lg(_templateObject12(), maxAssetSize(props.containerWidth).height + \"px;\");\n});\nvar Caption = styled.div.withConfig({\n  displayName: \"CanvasSlideshow__Caption\",\n  componentId: \"s1q5kr05-1\"\n})([\"\", \" color:\", \";margin-top:10px;\"], garamond(\"s11\"), Colors.grayMedium);",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Publishing/Display/Canvas/CanvasSlideshow.tsx"],"names":["Colors","garamond","React","Slider","track","styled","crop","pMedia","Icon","maxAssetSize","CanvasSlideshow","props","action","label","entity_type","campaign_name","campaign","name","unit_layout","currentSlide","setState","isOnTitle","unit","containerWidth","assets","map","image","i","renderTitleCard","imageSrc","url","width","height","isDisplayAd","caption","onChangeSlide","bind","state","slide","slider","slickGoTo","children","disclaimer","renderDisclaimer","length","sliderSettings","dots","lazyLoad","infinite","variableWidth","centerMode","nextArrow","prevArrow","initialSlide","afterChange","afterSlideChange","responsive","breakpoint","settings","controls","renderSlides","Component","LeftArrow","RightArrow","slideCount","arrowDiv","div","responsiveDiv","responsiveImage","img","NavArrow","isVisible","direction","md","SliderContainer","Slide","Title","xl","Disclaimer","Image","lg","Caption","grayMedium"],"mappings":"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","sourcesContent":["import Colors from \"Assets/Colors\"\nimport { garamond } from \"Assets/Fonts\"\nimport { compact, map } from \"lodash\"\nimport React from \"react\"\nimport Slider from \"react-slick\"\nimport track from \"react-tracking\"\nimport styled, { StyledFunction } from \"styled-components\"\nimport { crop } from \"../../../../Utils/resizer\"\nimport { pMedia } from \"../../../Helpers\"\nimport Icon from \"../../../Icon\"\nimport { maxAssetSize } from \"./CanvasContainer\"\n\ninterface CanvasSlideshowProps {\n  campaign: any\n  containerWidth: number\n  disclaimer: any\n  unit: any\n}\n\ninterface NavArrowProps extends React.HTMLProps<HTMLDivElement> {\n  direction: string\n  isVisible?: boolean\n  containerWidth: number\n}\n\ninterface ResponsiveProps extends React.HTMLProps<HTMLDivElement> {\n  containerWidth: number\n}\n\n@track()\nexport class CanvasSlideshow extends React.Component<\n  CanvasSlideshowProps,\n  any\n> {\n  private slider: any\n\n  constructor(props) {\n    super(props)\n    this.onChangeSlide = this.onChangeSlide.bind(this)\n\n    this.state = {\n      isOnTitle: true,\n    }\n  }\n\n  afterSlideChange = currentSlide => {\n    this.setState({\n      isOnTitle: currentSlide === 0,\n    })\n  }\n\n  @track(props => {\n    return {\n      action: \"Click\",\n      label: \"Display ad carousel arrow\",\n      entity_type: \"display_ad\",\n      campaign_name: props.campaign.name,\n      unit_layout: \"canvas_slideshow\",\n    }\n  })\n  onChangeSlide(slide) {\n    this.slider.slickGoTo(slide)\n  }\n\n  renderTitleCard() {\n    const { children, disclaimer, containerWidth, unit } = this.props\n    const renderDisclaimer = compact(map(unit.assets, \"caption\")).length > 0\n\n    return (\n      <Title containerWidth={containerWidth}>\n        {children}\n\n        {renderDisclaimer && <Disclaimer>{disclaimer}</Disclaimer>}\n      </Title>\n    )\n  }\n\n  renderSlides = () => {\n    const { unit, containerWidth } = this.props\n\n    return unit.assets.map((image, i) => {\n      const renderTitleCard = i === 0 && containerWidth >= 900\n      const imageSrc = crop(image.url, {\n        width: 780,\n        height: 460,\n        isDisplayAd: true,\n      })\n      const caption = image.caption || \"\"\n\n      return (\n        <Slide\n          key={i}\n          className={i === 0 && \"title-card\"}\n          containerWidth={containerWidth}\n        >\n          {renderTitleCard && this.renderTitleCard()}\n\n          <div>\n            <Image\n              src={imageSrc}\n              alt={caption}\n              containerWidth={containerWidth}\n            />\n\n            {caption && <Caption>{image.caption}</Caption>}\n          </div>\n        </Slide>\n      )\n    })\n  }\n\n  render() {\n    const { containerWidth } = this.props\n\n    const sliderSettings = {\n      dots: false,\n      lazyLoad: false,\n      infinite: false,\n      variableWidth: true,\n      centerMode: true,\n      nextArrow: (\n        <RightArrow\n          containerWidth={containerWidth}\n          onChangeSlide={this.onChangeSlide}\n        />\n      ),\n      prevArrow: (\n        <LeftArrow\n          containerWidth={containerWidth}\n          onChangeSlide={this.onChangeSlide}\n          isOnTitle={this.state.isOnTitle}\n        />\n      ),\n      initialSlide: 0,\n      afterChange: currentSlide => {\n        this.afterSlideChange(currentSlide)\n      },\n      responsive: [\n        {\n          breakpoint: 900,\n          settings: {\n            infinite: true,\n            controls: false,\n          },\n        },\n      ],\n    }\n\n    const renderTitleCard = containerWidth < 900\n\n    return (\n      <div>\n        <SliderContainer containerWidth={containerWidth}>\n          <Slider {...sliderSettings} ref={slider => (this.slider = slider)}>\n            {this.renderSlides()}\n          </Slider>\n        </SliderContainer>\n\n        {renderTitleCard && this.renderTitleCard()}\n      </div>\n    )\n  }\n}\n\nconst LeftArrow = props => {\n  const slide = props.currentSlide - 1 >= 0 ? 0 : props.currentSlide - 1\n\n  return (\n    <NavArrow\n      containerWidth={props.containerWidth}\n      direction=\"left\"\n      onClick={() => props.onChangeSlide(slide)}\n      isVisible={!props.isOnTitle}\n    >\n      <Icon name=\"chevron-left\" color=\"black\" fontSize=\"24px\" />\n    </NavArrow>\n  )\n}\n\nconst RightArrow = props => {\n  const slide =\n    props.currentSlide + 1 === props.slideCount ? 0 : props.currentSlide + 1\n\n  return (\n    <NavArrow\n      containerWidth={props.containerWidth}\n      direction=\"right\"\n      onClick={() => props.onChangeSlide(slide)}\n      isVisible\n    >\n      <Icon name=\"chevron-right\" color=\"black\" fontSize=\"24px\" />\n    </NavArrow>\n  )\n}\n\nconst arrowDiv: StyledFunction<NavArrowProps> = styled.div\nconst responsiveDiv: StyledFunction<ResponsiveProps> = styled.div\nconst responsiveImage: StyledFunction<ResponsiveProps> = styled.img\n\nconst NavArrow = arrowDiv`\n  display: flex;\n  align-items: center;\n  position: absolute;\n  height: 100%;\n  max-height: ${props => maxAssetSize(props.containerWidth).height + \"px;\"}\n  top: 0;\n  box-sizing: border-box;\n  opacity: ${props => (props.isVisible ? \"1;\" : \"0;\")}\n  transition: opacity .5s;\n  ${props => props.direction === \"left\" && \"left: 0px;\"}\n  ${props => props.direction === \"right\" && \"right: 0px;\"}\n  ${Icon} {\n    z-index: 10;\n    cursor: pointer;\n    padding: 10px;\n    background: rgba(255, 255, 255, .8);\n    box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2);\n    border-radius: 2px;\n  }\n  ${pMedia.md`\n    display: none;\n  `}\n`\nconst SliderContainer = responsiveDiv`\n  width: 100%;\n  overflow: hidden;\n  .slick-list {\n    max-height: ${props =>\n      \"calc(\" + maxAssetSize(props.containerWidth).height + \"px + 2.5em);\"}\n    padding: 0 !important;\n  }\n\n  ${props => pMedia.md`\n    max-height: ${maxAssetSize(props.containerWidth).height + \"px;\"}\n  `}\n`\nconst Slide = responsiveDiv`\n  margin-right: 20px;\n  &.title-card {\n    max-width: 1190px;\n    margin-left: 40px;\n    width: ${props => props.containerWidth + \"px;\"}\n    display: flex;\n    justify-content: space-between;\n    ${props => pMedia.md`\n      max-width: ${maxAssetSize(props.containerWidth).width + \"px;\"}\n    `}\n  }\n`\nconst Title = responsiveDiv`\n  width: 380px;\n  padding: 0 20px 0 0;\n  ${props => pMedia.xl`\n    padding: 0 40px;\n    width: ${props.containerWidth * 0.35 + \"px;\"}\n    a {\n      max-height: ${maxAssetSize(props.containerWidth).height + \"px;\"}\n    }\n  `}\n  ${pMedia.md`\n    padding: 0 20px;\n    width: 100%;\n    a {\n      height: initial;\n      max-height: initial;\n    }\n  `}\n`\nconst Disclaimer = styled.div`\n  margin: -5px 0 0;\n  ${pMedia.md`\n    margin: 0;\n    max-width: calc(100% - 40px);\n  `};\n`\nconst Image = responsiveImage`\n  height: auto;\n  max-width: ${props => maxAssetSize(props.containerWidth).width + \"px;\"}\n  object-fit: cover;\n  object-position: center;\n  ${props => pMedia.lg`\n    max-height: ${maxAssetSize(props.containerWidth).height + \"px;\"}\n  `}\n`\nconst Caption = styled.div`\n  ${garamond(\"s11\")} color: ${Colors.grayMedium};\n  margin-top: 10px;\n`\n"]}]}