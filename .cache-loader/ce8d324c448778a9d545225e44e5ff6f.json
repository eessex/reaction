{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Apps/Artist/Routes/Articles/ArtistArticles.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Apps/Artist/Routes/Articles/ArtistArticles.tsx","mtime":1537112679000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Box } from \"@artsy/palette\";\nimport React, { Component } from \"react\";\nimport { createRefetchContainer, graphql } from \"react-relay\";\nimport styled from \"styled-components\";\nimport { PaginationFragmentContainer as Pagination } from \"../../../../Styleguide/Components\";\nimport { Col, Row } from \"../../../../Styleguide/Elements/Grid\";\nimport { ArticleItem } from \"./ArtistArticle\";\nimport { LoadingArea } from \"../../Components/LoadingArea\";\nvar PAGE_SIZE = 10;\nvar Container = styled.div.withConfig({\n  displayName: \"ArtistArticles__Container\",\n  componentId: \"qlf56x-0\"\n})([\"&:last-child{border-bottom:none;}\"]);\nexport var ArtistArticles =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ArtistArticles, _Component);\n\n  function ArtistArticles() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ArtistArticles);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ArtistArticles)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      isLoading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"loadNext\", function () {\n      var _this$props$artist$ar = _this.props.artist.articlesConnection.pageInfo,\n          hasNextPage = _this$props$artist$ar.hasNextPage,\n          endCursor = _this$props$artist$ar.endCursor;\n\n      if (hasNextPage) {\n        _this.loadAfter(endCursor);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"loadAfter\", function (cursor) {\n      _this.toggleLoading(true);\n\n      _this.props.relay.refetch({\n        first: PAGE_SIZE,\n        after: cursor,\n        artistID: _this.props.artist.id,\n        before: null,\n        last: null\n      }, null, function (error) {\n        _this.toggleLoading(false);\n\n        if (error) {\n          console.error(error);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"toggleLoading\", function (isLoading) {\n      _this.setState({\n        isLoading: isLoading\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(ArtistArticles, [{\n    key: \"render\",\n    value: function render() {\n      var articlesLength = this.props.artist.articlesConnection.edges.length;\n      return React.createElement(React.Fragment, null, React.createElement(\"span\", {\n        id: \"jumpto--artistArticles\"\n      }), React.createElement(Row, null, React.createElement(Col, null, React.createElement(LoadingArea, {\n        isLoading: this.state.isLoading\n      }, React.createElement(Container, null, this.props.artist.articlesConnection.edges.map(function (_ref, index) {\n        var node = _ref.node;\n        return React.createElement(ArticleItem, {\n          title: node.thumbnail_title,\n          imageUrl: node.thumbnail_image.resized.url,\n          date: node.published_at,\n          author: node.author.name,\n          href: node.href,\n          key: index,\n          lastChild: index === articlesLength - 1\n        });\n      }))))), React.createElement(Row, null, React.createElement(Col, null, React.createElement(Box, null, React.createElement(Pagination, {\n        pageCursors: this.props.artist.articlesConnection.pageCursors,\n        onClick: this.loadAfter,\n        onNext: this.loadNext,\n        scrollTo: \"#jumpto-ArtistHeader\",\n        hasNextPage: this.props.artist.articlesConnection.pageInfo.hasNextPage\n      })))));\n    }\n  }]);\n\n  return ArtistArticles;\n}(Component);\nexport var ArtistArticlesRefetchContainer = createRefetchContainer(ArtistArticles, {\n  artist: function artist() {\n    var node = require(\"../../../../__generated__/ArtistArticles_artist.graphql\");\n\n    if (node.hash && node.hash !== \"9431572d880bde3b77ca6f9a8b570ef8\") {\n      console.error(\"The definition of 'ArtistArticles_artist' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../../../__generated__/ArtistArticles_artist.graphql\");\n  }\n}, function () {\n  var node = require(\"../../../../__generated__/ArtistArticlesQuery.graphql\");\n\n  if (node.hash && node.hash !== \"b66fa1ae885e53f04b062df9f1e60f0b\") {\n    console.error(\"The definition of 'ArtistArticlesQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n  }\n\n  return require(\"../../../../__generated__/ArtistArticlesQuery.graphql\");\n});",{"version":3,"sources":["/Users/eve/development/reaction/src/Apps/Artist/Routes/Articles/ArtistArticles.tsx"],"names":["Box","React","Component","createRefetchContainer","graphql","styled","PaginationFragmentContainer","Pagination","Col","Row","ArticleItem","LoadingArea","PAGE_SIZE","Container","div","ArtistArticles","isLoading","props","artist","articlesConnection","pageInfo","hasNextPage","endCursor","loadAfter","cursor","toggleLoading","relay","refetch","first","after","artistID","id","before","last","error","console","setState","articlesLength","edges","length","state","map","index","node","thumbnail_title","thumbnail_image","resized","url","published_at","author","name","href","pageCursors","loadNext","ArtistArticlesRefetchContainer"],"mappings":"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","sourcesContent":["import { Box } from \"@artsy/palette\"\nimport { ArtistArticles_artist } from \"__generated__/ArtistArticles_artist.graphql\"\nimport React, { Component } from \"react\"\nimport { createRefetchContainer, graphql, RelayRefetchProp } from \"react-relay\"\nimport styled from \"styled-components\"\nimport { PaginationFragmentContainer as Pagination } from \"Styleguide/Components\"\nimport { Col, Row } from \"Styleguide/Elements/Grid\"\nimport { ArticleItem } from \"./ArtistArticle\"\n\nimport {\n  LoadingArea,\n  LoadingAreaState,\n} from \"Apps/Artist/Components/LoadingArea\"\n\nconst PAGE_SIZE = 10\n\nconst Container = styled.div`\n  &:last-child {\n    border-bottom: none;\n  }\n`\n\ninterface ArtistArticlesProps {\n  relay: RelayRefetchProp\n  artist: ArtistArticles_artist\n}\n\nexport class ArtistArticles extends Component<\n  ArtistArticlesProps,\n  LoadingAreaState\n> {\n  state = {\n    isLoading: false,\n  }\n\n  loadNext = () => {\n    const {\n      artist: {\n        articlesConnection: {\n          pageInfo: { hasNextPage, endCursor },\n        },\n      },\n    } = this.props\n\n    if (hasNextPage) {\n      this.loadAfter(endCursor)\n    }\n  }\n\n  loadAfter = cursor => {\n    this.toggleLoading(true)\n\n    this.props.relay.refetch(\n      {\n        first: PAGE_SIZE,\n        after: cursor,\n        artistID: this.props.artist.id,\n        before: null,\n        last: null,\n      },\n      null,\n      error => {\n        this.toggleLoading(false)\n\n        if (error) {\n          console.error(error)\n        }\n      }\n    )\n  }\n\n  toggleLoading = isLoading => {\n    this.setState({\n      isLoading,\n    })\n  }\n\n  render() {\n    const articlesLength = this.props.artist.articlesConnection.edges.length\n    return (\n      <>\n        <span id=\"jumpto--artistArticles\" />\n\n        <Row>\n          <Col>\n            <LoadingArea isLoading={this.state.isLoading}>\n              <Container>\n                {this.props.artist.articlesConnection.edges.map(\n                  ({ node }, index) => {\n                    return (\n                      <ArticleItem\n                        title={node.thumbnail_title}\n                        imageUrl={node.thumbnail_image.resized.url}\n                        date={node.published_at}\n                        author={node.author.name}\n                        href={node.href}\n                        key={index}\n                        lastChild={index === articlesLength - 1}\n                      />\n                    )\n                  }\n                )}\n              </Container>\n            </LoadingArea>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            <Box>\n              <Pagination\n                pageCursors={this.props.artist.articlesConnection.pageCursors}\n                onClick={this.loadAfter}\n                onNext={this.loadNext}\n                scrollTo=\"#jumpto-ArtistHeader\"\n                hasNextPage={\n                  this.props.artist.articlesConnection.pageInfo.hasNextPage\n                }\n              />\n            </Box>\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}\n\nexport const ArtistArticlesRefetchContainer = createRefetchContainer(\n  ArtistArticles,\n  {\n    artist: graphql`\n      fragment ArtistArticles_artist on Artist\n        @argumentDefinitions(\n          first: { type: \"Int\", defaultValue: 10 }\n          last: { type: \"Int\" }\n          after: { type: \"String\" }\n          before: { type: \"String\" }\n        ) {\n        id\n        articlesConnection(\n          first: $first\n          after: $after\n          before: $before\n          last: $last\n          sort: PUBLISHED_AT_DESC\n          in_editorial_feed: true\n        ) {\n          pageInfo {\n            hasNextPage\n            endCursor\n          }\n          pageCursors {\n            ...Pagination_pageCursors\n          }\n          edges {\n            node {\n              href\n              thumbnail_title\n              author {\n                name\n              }\n              published_at(format: \"MMM Do, YYYY\")\n              thumbnail_image {\n                resized(width: 300) {\n                  url\n                }\n              }\n              href\n            }\n          }\n        }\n      }\n    `,\n  },\n  graphql`\n    query ArtistArticlesQuery(\n      $first: Int\n      $last: Int\n      $after: String\n      $before: String\n      $artistID: String!\n    ) {\n      artist(id: $artistID) {\n        ...ArtistArticles_artist\n          @arguments(first: $first, last: $last, after: $after, before: $before)\n      }\n    }\n  `\n)\n"]}]}