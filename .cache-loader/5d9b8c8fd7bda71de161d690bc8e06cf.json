{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Styleguide/Pages/Artist/Routes/RelatedArtists/RelatedArtistsRefetchContainer.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Styleguide/Pages/Artist/Routes/RelatedArtists/RelatedArtistsRefetchContainer.tsx","mtime":1530290903000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1529423546000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RelatedArtistsRefetchContainer = exports.PAGE_SIZE = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactRelay = require(\"react-relay\");\n\nvar _ArtistCard = require(\"../../../../Components/ArtistCard\");\n\nvar _Pagination = require(\"../../../../Components/Pagination\");\n\nvar _Box = require(\"../../../../Elements/Box\");\n\nvar _Flex = require(\"../../../../Elements/Flex\");\n\nvar _Grid = require(\"../../../../Elements/Grid\");\n\nvar _Separator = require(\"../../../../Elements/Separator\");\n\nvar _Responsive = require(\"../../../../Utils/Responsive\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nvar PAGE_SIZE = 6;\nexports.PAGE_SIZE = PAGE_SIZE;\nvar RelatedArtistsRefetchContainer = (0, _reactRelay.createRefetchContainer)(\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_class2, _React$Component);\n\n  function _class2() {\n    var _ref;\n\n    var _temp, _this;\n\n    _classCallCheck(this, _class2);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _possibleConstructorReturn(_this, (_temp = _this = _possibleConstructorReturn(this, (_ref = _class2.__proto__ || Object.getPrototypeOf(_class2)).call.apply(_ref, [this].concat(args))), Object.defineProperty(_assertThisInitialized(_this), \"loadNext\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var _this$props$artist$re = _this.props.artist.related.artists.pageInfo,\n            hasNextPage = _this$props$artist$re.hasNextPage,\n            endCursor = _this$props$artist$re.endCursor;\n\n        if (hasNextPage) {\n          _this.loadAfter(endCursor);\n        }\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"loadAfter\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(cursor) {\n        _this.props.relay.refetch({\n          first: PAGE_SIZE,\n          after: cursor,\n          artistID: _this.props.artist.id,\n          before: null,\n          last: null,\n          kind: _this.props.kind\n        }, null, function (error) {\n          if (error) {\n            console.error(error);\n          }\n        });\n      }\n    }), _temp));\n  }\n\n  _createClass(_class2, [{\n    key: \"renderPagination\",\n    value: function renderPagination() {\n      return _react.default.createElement(\"div\", null, _react.default.createElement(_Pagination.PaginationFragmentContainer, {\n        pageCursors: this.props.artist.related.artists.pageCursors,\n        onClick: this.loadAfter,\n        onNext: this.loadNext\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement(_Responsive.Responsive, null, function (_ref2) {\n        var xs = _ref2.xs,\n            sm = _ref2.sm,\n            md = _ref2.md;\n        var width;\n\n        if (xs) {\n          width = \"100%\";\n        } else if (sm || md) {\n          width = \"33%\";\n        } else {\n          width = \"25%\";\n        }\n\n        return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_Grid.Row, null, _react.default.createElement(_Grid.Col, null, _react.default.createElement(_Flex.Flex, {\n          flexWrap: true\n        }, _this2.props.artist.related.artists.edges.map(function (_ref3, index) {\n          var node = _ref3.node;\n          return _react.default.createElement(_Box.Box, {\n            pr: 1,\n            pb: 1,\n            width: width,\n            key: index\n          }, _react.default.createElement(_ArtistCard.ArtistCardFragmentContainer, {\n            artist: node\n          }));\n        })))), _react.default.createElement(_Box.Box, {\n          py: 2\n        }, _react.default.createElement(_Separator.Separator, null)), _react.default.createElement(_Grid.Row, null, _react.default.createElement(_Grid.Col, null, _react.default.createElement(_Flex.Flex, {\n          justifyContent: \"flex-end\"\n        }, _react.default.createElement(_Pagination.PaginationFragmentContainer, {\n          pageCursors: _this2.props.artist.related.artists.pageCursors,\n          onClick: _this2.loadAfter,\n          onNext: _this2.loadNext,\n          scrollTo: _this2.props.scrollTo\n        })))));\n      });\n    }\n  }]);\n\n  return _class2;\n}(_react.default.Component), {\n  artist: function artist() {\n    var node = require(\"../../../../../__generated__/RelatedArtistsRefetchContainer_artist.graphql\");\n\n    if (node.hash && node.hash !== \"bdc694fe9b80f6e91bad1576502aabeb\") {\n      console.error(\"The definition of 'RelatedArtistsRefetchContainer_artist' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n    }\n\n    return require(\"../../../../../__generated__/RelatedArtistsRefetchContainer_artist.graphql\");\n  }\n}, function () {\n  var node = require(\"../../../../../__generated__/RelatedArtistsRefetchContainerQuery.graphql\");\n\n  if (node.hash && node.hash !== \"ade51a3cf2f33dbe917e0bf896dceae6\") {\n    console.error(\"The definition of 'RelatedArtistsRefetchContainerQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\");\n  }\n\n  return require(\"../../../../../__generated__/RelatedArtistsRefetchContainerQuery.graphql\");\n});\nexports.RelatedArtistsRefetchContainer = RelatedArtistsRefetchContainer;",{"version":3,"sources":["src/Styleguide/Pages/Artist/Routes/RelatedArtists/RelatedArtistsRefetchContainer.tsx"],"names":["PAGE_SIZE","RelatedArtistsRefetchContainer","props","artist","related","artists","pageInfo","hasNextPage","endCursor","loadAfter","relay","refetch","first","after","cursor","artistID","id","before","last","kind","error","console","pageCursors","loadNext","xs","sm","md","width","edges","map","index","node","scrollTo","Component"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;AASO,IAAMA,YAAY,CAAlB;;AAEA,IAAMC,iCAAiC;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,aAE/B,iBAAM;AAAA,oCAIX,MAAKC,KAAL,CAAWC,MAAX,CAAkBC,OAAlB,CAA0BC,OAA1B,CAAkCC,QAJvB;AAAA,YAEbC,WAFa,yBAEbA,WAFa;AAAA,YAGbC,SAHa,yBAGbA,SAHa;;AAKf,YAAID,WAAJ,EAAiB;AACf,gBAAKE,SAAL,CAAeD,SAAf;AACD;AACF;AAVyC;AAAA;AAAA;AAAA;AAAA,aAY9B,uBAAU;AACpB,cAAKN,KAAL,CAAWQ,KAAX,CAAiBC,OAAjB,CACE;AACEC,iBAAOZ,SADT;AAEEa,iBAAOC,MAFT;AAGEC,oBAAU,MAAKb,KAAL,CAAWC,MAAX,CAAkBa,EAH9B;AAIEC,kBAAQ,IAJV;AAKEC,gBAAM,IALR;AAMEC,gBAAM,MAAKjB,KAAL,CAAWiB;AANnB,SADF,EASE,IATF,EAUE,iBAAS;AACP,cAAIC,KAAJ,EAAW;AACTC,oBAAQD,KAAR,CAAcA,KAAd;AACD;AACF,SAdH;AAgBD;AA7ByC;AAAA;;AAAA;AAAA;AAAA,uCA+BvB;AACjB,aACE,0CACE;AACE,qBAAa,KAAKlB,KAAL,CAAWC,MAAX,CAAkBC,OAAlB,CAA0BC,OAA1B,CAAkCiB,WADjD;AAEE,iBAAS,KAAKb,SAFhB;AAGE,gBAAQ,KAAKc;AAHf,QADF,CADF;AASD;AAzCyC;AAAA;AAAA,6BA2CjC;AAAA;;AACP,aACE,2DACG,iBAAoB;AAAA,YAAjBC,EAAiB,SAAjBA,EAAiB;AAAA,YAAbC,EAAa,SAAbA,EAAa;AAAA,YAATC,EAAS,SAATA,EAAS;AACnB,YAAIC,KAAJ;;AACA,YAAIH,EAAJ,EAAQ;AACNG,kBAAQ,MAAR;AACD,SAFD,MAEO,IAAIF,MAAMC,EAAV,EAAc;AACnBC,kBAAQ,KAAR;AACD,SAFM,MAEA;AACLA,kBAAQ,KAAR;AACD;;AAED,eACE,4CAAO,QAAP,QACE,8CACE,8CACE;AAAM;AAAN,WACG,OAAKzB,KAAL,CAAWC,MAAX,CAAkBC,OAAlB,CAA0BC,OAA1B,CAAkCuB,KAAlC,CAAwCC,GAAxC,CACC,iBAAWC,KAAX,EAAqB;AAAA,cAAlBC,IAAkB,SAAlBA,IAAkB;AACnB,iBACE;AAAK,gBAAI,CAAT;AAAY,gBAAI,CAAhB;AAAmB,mBAAOJ,KAA1B;AAAiC,iBAAKG;AAAtC,aACE;AACE,oBAAQC;AADV,YADF,CADF;AAOD,SATF,CADH,CADF,CADF,CADF,EAmBE;AAAK,cAAI;AAAT,WACE,wDADF,CAnBF,EAuBE,8CACE,8CACE;AAAM,0BAAe;AAArB,WACE;AACE,uBACE,OAAK7B,KAAL,CAAWC,MAAX,CAAkBC,OAAlB,CAA0BC,OAA1B,CAAkCiB,WAFtC;AAIE,mBAAS,OAAKb,SAJhB;AAKE,kBAAQ,OAAKc,QALf;AAME,oBAAU,OAAKrB,KAAL,CAAW8B;AANvB,UADF,CADF,CADF,CAvBF,CADF;AAwCD,OAnDH,CADF;AAuDD;AAnGyC;;AAAA;AAAA,EAC9B,eAAMC,SADwB,GAqG5C;AACE9B;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AADF,CArG4C;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,EAAvC","file":"/Users/eve/development/reaction/src/Styleguide/Pages/Artist/Routes/RelatedArtists/RelatedArtistsRefetchContainer.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import { RelatedArtistsRefetchContainer_artist } from \"__generated__/RelatedArtistsRefetchContainer_artist.graphql\"\nimport React from \"react\"\nimport { createRefetchContainer, graphql, RelayRefetchProp } from \"react-relay\"\nimport { ArtistCardFragmentContainer } from \"Styleguide/Components/ArtistCard\"\nimport { PaginationFragmentContainer } from \"Styleguide/Components/Pagination\"\nimport { Box } from \"Styleguide/Elements/Box\"\nimport { Flex } from \"Styleguide/Elements/Flex\"\nimport { Col, Row } from \"Styleguide/Elements/Grid\"\nimport { Separator } from \"Styleguide/Elements/Separator\"\nimport { Responsive } from \"Styleguide/Utils/Responsive\"\n\ninterface ShowProps {\n  relay: RelayRefetchProp\n  artist: RelatedArtistsRefetchContainer_artist\n  kind: string\n  scrollTo: string\n}\n\nexport const PAGE_SIZE = 6\n\nexport const RelatedArtistsRefetchContainer = createRefetchContainer(\n  class extends React.Component<ShowProps> {\n    loadNext = () => {\n      const {\n        hasNextPage,\n        endCursor,\n      } = this.props.artist.related.artists.pageInfo\n      if (hasNextPage) {\n        this.loadAfter(endCursor)\n      }\n    }\n\n    loadAfter = cursor => {\n      this.props.relay.refetch(\n        {\n          first: PAGE_SIZE,\n          after: cursor,\n          artistID: this.props.artist.id,\n          before: null,\n          last: null,\n          kind: this.props.kind,\n        },\n        null,\n        error => {\n          if (error) {\n            console.error(error)\n          }\n        }\n      )\n    }\n\n    renderPagination() {\n      return (\n        <div>\n          <PaginationFragmentContainer\n            pageCursors={this.props.artist.related.artists.pageCursors as any}\n            onClick={this.loadAfter}\n            onNext={this.loadNext}\n          />\n        </div>\n      )\n    }\n\n    render() {\n      return (\n        <Responsive>\n          {({ xs, sm, md }) => {\n            let width\n            if (xs) {\n              width = \"100%\"\n            } else if (sm || md) {\n              width = \"33%\"\n            } else {\n              width = \"25%\"\n            }\n\n            return (\n              <React.Fragment>\n                <Row>\n                  <Col>\n                    <Flex flexWrap>\n                      {this.props.artist.related.artists.edges.map(\n                        ({ node }, index) => {\n                          return (\n                            <Box pr={1} pb={1} width={width} key={index}>\n                              <ArtistCardFragmentContainer\n                                artist={node as any}\n                              />\n                            </Box>\n                          )\n                        }\n                      )}\n                    </Flex>\n                  </Col>\n                </Row>\n\n                <Box py={2}>\n                  <Separator />\n                </Box>\n\n                <Row>\n                  <Col>\n                    <Flex justifyContent=\"flex-end\">\n                      <PaginationFragmentContainer\n                        pageCursors={\n                          this.props.artist.related.artists.pageCursors as any\n                        }\n                        onClick={this.loadAfter}\n                        onNext={this.loadNext}\n                        scrollTo={this.props.scrollTo}\n                      />\n                    </Flex>\n                  </Col>\n                </Row>\n              </React.Fragment>\n            )\n          }}\n        </Responsive>\n      )\n    }\n  },\n  {\n    artist: graphql`\n      fragment RelatedArtistsRefetchContainer_artist on Artist\n        @argumentDefinitions(\n          first: { type: \"Int\", defaultValue: 6 }\n          last: { type: \"Int\" }\n          after: { type: \"String\" }\n          before: { type: \"String\" }\n          kind: { type: \"RelatedArtistsKind\" }\n        ) {\n        id\n        related {\n          artists(\n            first: $first\n            after: $after\n            before: $before\n            last: $last\n            kind: $kind\n          ) {\n            pageInfo {\n              hasNextPage\n              endCursor\n            }\n            pageCursors {\n              ...Pagination_pageCursors\n            }\n            edges {\n              node {\n                ...ArtistCard_artist\n              }\n            }\n          }\n        }\n      }\n    `,\n  },\n  graphql`\n    query RelatedArtistsRefetchContainerQuery(\n      $first: Int\n      $last: Int\n      $after: String\n      $before: String\n      $artistID: String!\n      $kind: RelatedArtistsKind\n    ) {\n      artist(id: $artistID) {\n        ...RelatedArtistsRefetchContainer_artist\n          @arguments(\n            kind: $kind\n            first: $first\n            last: $last\n            after: $after\n            before: $before\n          )\n      }\n    }\n  `\n)\n"]}]}