{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--6-1!/Users/eve/development/reaction/src/Components/Publishing/Layouts/NewsLayout.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Layouts/NewsLayout.tsx","mtime":1535727435000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1537112679000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _once from \"lodash/once\";\n\nvar _dec, _class;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    margin: 40px 5px;\\n    padding: 10px 15px 20px;\\n    \", \";\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    bottom: 15px;\\n    right: 15px;\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { color } from \"@artsy/palette\";\nimport { unica } from \"../../../Assets/Fonts\";\nimport React, { Component } from \"react\";\nimport track from \"react-tracking\";\nimport styled from \"styled-components\";\nimport { pMedia } from \"../../Helpers\";\nimport { NewsHeadline } from \"../News/NewsHeadline\";\nimport { NewsSections } from \"../News/NewsSections\";\nimport { CanvasFooter, CanvasFooterContainer } from \"./Components/CanvasFooter\";\nexport var NewsLayout = (_dec = track(), _dec(_class =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewsLayout, _Component);\n\n  function NewsLayout(props) {\n    var _this;\n\n    _classCallCheck(this, NewsLayout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewsLayout).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"trackExpand\", function () {\n      var _this$props = _this.props,\n          article = _this$props.article,\n          tracking = _this$props.tracking;\n\n      if (tracking) {\n        tracking.trackEvent({\n          action: \"Clicked read more\",\n          pathname: \"/news/\".concat(article.slug)\n        });\n      }\n    });\n\n    _this.state = {\n      isTruncated: _this.props.isTruncated || false,\n      isHovered: _this.props.isHovered || false\n    };\n    _this.onExpand = _this.onExpand.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.trackExpand = _once(_this.trackExpand);\n    return _this;\n  }\n\n  _createClass(NewsLayout, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.isHovered !== this.props.isHovered) {\n        this.setState({\n          isHovered: nextProps.isHovered\n        });\n      }\n    }\n  }, {\n    key: \"onExpand\",\n    value: function onExpand() {\n      var onExpand = this.props.onExpand;\n      this.trackExpand();\n\n      if (onExpand) {\n        onExpand();\n      }\n\n      this.setState({\n        isTruncated: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          article = _this$props2.article,\n          display = _this$props2.display,\n          isMobile = _this$props2.isMobile,\n          relatedArticlesForCanvas = _this$props2.relatedArticlesForCanvas,\n          renderTime = _this$props2.renderTime;\n      var _this$state = this.state,\n          isTruncated = _this$state.isTruncated,\n          isHovered = _this$state.isHovered;\n      return React.createElement(NewsContainer, null, React.createElement(NewsArticleContainer, {\n        isTruncated: isTruncated,\n        isHovered: isHovered,\n        onClick: function onClick() {\n          if (isTruncated) {\n            _this2.onExpand();\n          }\n        },\n        onMouseEnter: function onMouseEnter() {\n          if (!isMobile) {\n            _this2.setState({\n              isHovered: true\n            });\n          }\n        },\n        onMouseLeave: function onMouseLeave() {\n          if (!isMobile) {\n            _this2.setState({\n              isHovered: false\n            });\n          }\n        }\n      }, React.createElement(NewsHeadline, {\n        article: article\n      }), React.createElement(NewsSections, _extends({}, this.props, {\n        isTruncated: isTruncated\n      })), React.createElement(ExpandButton, {\n        isHovered: isHovered,\n        isTruncated: isTruncated,\n        onClick: this.onExpand\n      }, \"Expand\")), (relatedArticlesForCanvas || display) && React.createElement(CanvasFooter, {\n        article: article,\n        display: display,\n        relatedArticles: relatedArticlesForCanvas,\n        renderTime: renderTime\n      }));\n    }\n  }]);\n\n  return NewsLayout;\n}(Component)) || _class);\nvar NewsContainer = styled.div.withConfig({\n  displayName: \"NewsLayout__NewsContainer\",\n  componentId: \"mcl3rm-0\"\n})([\"\", \"{border-bottom:1px solid \", \";}\"], CanvasFooterContainer, color(\"black10\"));\nexport var ExpandButton = styled.button.withConfig({\n  displayName: \"NewsLayout__ExpandButton\",\n  componentId: \"mcl3rm-1\"\n})([\"width:80px;height:30px;background-color:black;position:absolute;bottom:30px;right:30px;color:white;border-radius:2px;border:none;display:block;opacity:0;cursor:pointer;padding:0;transition:opacity 0.25s ease;\", \";line-height:1em;&:focus{outline:0;}&:hover{color:\", \";}\", \";\", \";\"], unica(\"s14\", \"medium\"), color(\"black10\"), function (props) {\n  return props.isHovered && props.isTruncated && \"\\n      opacity: 1;\\n    \";\n}, pMedia.sm(_templateObject()));\nexport var NewsArticleContainer = styled.div.withConfig({\n  displayName: \"NewsLayout__NewsArticleContainer\",\n  componentId: \"mcl3rm-2\"\n})([\"position:relative;max-width:780px;padding:20px 30px 30px;margin:40px auto;transition:all 0.25s ease;border:1px solid transparent;\", \";\", \";\", \";\"], function (props) {\n  return props.marginTop && \"\\n    margin-top: \".concat(props.marginTop, \";\\n  \");\n}, function (props) {\n  return props.isTruncated && props.isHovered && \"\\n    border-radius: 4px;\\n    border: 1px solid \".concat(color(\"black10\"), \";\\n    cursor: pointer;\\n  \");\n}, pMedia.sm(_templateObject2(), function (props) {\n  return props.marginTop && \"\\n      margin-top: \".concat(props.marginTop, \";\\n    \");\n}));",{"version":3,"sources":["/Users/eve/development/reaction/src/Components/Publishing/Layouts/NewsLayout.tsx"],"names":["color","unica","React","Component","track","styled","pMedia","NewsHeadline","NewsSections","CanvasFooter","CanvasFooterContainer","NewsLayout","props","article","tracking","trackEvent","action","pathname","slug","state","isTruncated","isHovered","onExpand","bind","trackExpand","nextProps","setState","display","isMobile","relatedArticlesForCanvas","renderTime","NewsContainer","div","ExpandButton","button","sm","NewsArticleContainer","marginTop"],"mappings":"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","sourcesContent":["import { color } from \"@artsy/palette\"\nimport { unica } from \"Assets/Fonts\"\nimport { once } from \"lodash\"\nimport React, { Component } from \"react\"\nimport track from \"react-tracking\"\nimport styled from \"styled-components\"\nimport { pMedia } from \"../../Helpers\"\nimport { NewsHeadline } from \"../News/NewsHeadline\"\nimport { NewsSections } from \"../News/NewsSections\"\nimport { ArticleData, DisplayData, RelatedArticleCanvasData } from \"../Typings\"\nimport { CanvasFooter, CanvasFooterContainer } from \"./Components/CanvasFooter\"\n\ninterface Props {\n  article: ArticleData\n  display?: DisplayData\n  isMobile?: boolean\n  isHovered?: boolean\n  isTruncated?: boolean\n  onExpand?: () => void\n  relatedArticlesForCanvas?: RelatedArticleCanvasData[]\n  renderTime?: number\n  tracking?: any\n}\n\ninterface State {\n  isTruncated: boolean\n  isHovered: boolean\n}\n\ninterface NewsContainerProps {\n  isTruncated: boolean\n  marginTop?: string\n  isHovered: boolean\n}\n\n@track()\nexport class NewsLayout extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      isTruncated: this.props.isTruncated || false,\n      isHovered: this.props.isHovered || false,\n    }\n\n    this.onExpand = this.onExpand.bind(this)\n    this.trackExpand = once(this.trackExpand)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.isHovered !== this.props.isHovered) {\n      this.setState({ isHovered: nextProps.isHovered })\n    }\n  }\n\n  onExpand() {\n    const { onExpand } = this.props\n    this.trackExpand()\n    if (onExpand) {\n      onExpand()\n    }\n    this.setState({ isTruncated: false })\n  }\n\n  trackExpand = () => {\n    const { article, tracking } = this.props\n    if (tracking) {\n      tracking.trackEvent({\n        action: \"Clicked read more\",\n        pathname: `/news/${article.slug}`,\n      })\n    }\n  }\n\n  render() {\n    const {\n      article,\n      display,\n      isMobile,\n      relatedArticlesForCanvas,\n      renderTime,\n    } = this.props\n    const { isTruncated, isHovered } = this.state\n\n    return (\n      <NewsContainer>\n        <NewsArticleContainer\n          isTruncated={isTruncated}\n          isHovered={isHovered}\n          onClick={() => {\n            if (isTruncated) {\n              this.onExpand()\n            }\n          }}\n          onMouseEnter={() => {\n            if (!isMobile) {\n              this.setState({ isHovered: true })\n            }\n          }}\n          onMouseLeave={() => {\n            if (!isMobile) {\n              this.setState({ isHovered: false })\n            }\n          }}\n        >\n          <NewsHeadline article={article} />\n          <NewsSections {...this.props} isTruncated={isTruncated} />\n          <ExpandButton\n            isHovered={isHovered}\n            isTruncated={isTruncated}\n            onClick={this.onExpand}\n          >\n            Expand\n          </ExpandButton>\n        </NewsArticleContainer>\n\n        {(relatedArticlesForCanvas || display) && (\n          <CanvasFooter\n            article={article}\n            display={display}\n            relatedArticles={relatedArticlesForCanvas}\n            renderTime={renderTime}\n          />\n        )}\n      </NewsContainer>\n    )\n  }\n}\nconst NewsContainer = styled.div`\n  ${CanvasFooterContainer} {\n    border-bottom: 1px solid ${color(\"black10\")};\n  }\n`\n\nexport const ExpandButton = styled.button`\n  width: 80px;\n  height: 30px;\n  background-color: black;\n  position: absolute;\n  bottom: 30px;\n  right: 30px;\n  color: white;\n  border-radius: 2px;\n  border: none;\n  display: block;\n  opacity: 0;\n  cursor: pointer;\n  padding: 0;\n  transition: opacity 0.25s ease;\n  ${unica(\"s14\", \"medium\")};\n  line-height: 1em;\n\n  &:focus {\n    outline: 0;\n  }\n\n  &:hover {\n    color: ${color(\"black10\")};\n  }\n\n  ${(props: NewsContainerProps) =>\n    props.isHovered &&\n    props.isTruncated &&\n    `\n      opacity: 1;\n    `};\n\n  ${pMedia.sm`\n    bottom: 15px;\n    right: 15px;\n  `};\n`\n\nexport const NewsArticleContainer = styled.div`\n  position: relative;\n  max-width: 780px;\n  padding: 20px 30px 30px;\n  margin: 40px auto;\n  transition: all 0.25s ease;\n  border: 1px solid transparent;\n\n  ${(props: NewsContainerProps) =>\n    props.marginTop &&\n    `\n    margin-top: ${props.marginTop};\n  `};\n\n  ${(props: NewsContainerProps) =>\n    props.isTruncated &&\n    props.isHovered &&\n    `\n    border-radius: 4px;\n    border: 1px solid ${color(\"black10\")};\n    cursor: pointer;\n  `};\n\n  ${pMedia.sm`\n    margin: 40px 5px;\n    padding: 10px 15px 20px;\n    ${(props: NewsContainerProps) =>\n      props.marginTop &&\n      `\n      margin-top: ${props.marginTop};\n    `};\n  `};\n`\n"]}]}