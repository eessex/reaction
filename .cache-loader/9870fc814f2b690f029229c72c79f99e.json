{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Publishing/RelatedArticles/ArticleCards/ArticleCard.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/RelatedArticles/ArticleCards/ArticleCard.tsx","mtime":1524678459000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1527877289000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ArticleCardContainer = exports.ArticleCard = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _resizer = require(\"../../../../Utils/resizer\");\n\nvar _track = require(\"../../../../Utils/track\");\n\nvar _Helpers = require(\"../../../Helpers\");\n\nvar _AuthorDate = require(\"../../Byline/AuthorDate\");\n\nvar _Byline = require(\"../../Byline/Byline\");\n\nvar _Constants = require(\"../../Constants\");\n\nvar _Fonts = require(\"../../../../Assets/Fonts\");\n\nvar _IconVideoPlay = require(\"../../Icon/IconVideoPlay\");\n\nvar _dec, _class;\n\nvar _templateObject = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    width: 100%;\\n    margin-left: 0;\\n    margin-bottom: 10px;\\n  \"], [\"\\n    width: 100%;\\n    margin-left: 0;\\n    margin-bottom: 10px;\\n  \"]),\n    _templateObject2 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    flex-direction: column-reverse;\\n    padding: 20px;\\n  \"], [\"\\n    flex-direction: column-reverse;\\n    padding: 20px;\\n  \"]),\n    _templateObject3 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    width: 100%;\\n    margin-bottom: 0;\\n  \"], [\"\\n    width: 100%;\\n    margin-bottom: 0;\\n  \"]),\n    _templateObject4 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    \", \"\\n  \"], [\"\\n    \", \"\\n  \"]),\n    _templateObject5 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    \", \"\\n    margin-bottom: 20px;\\n  \"], [\"\\n    \", \"\\n    margin-bottom: 20px;\\n  \"]),\n    _templateObject6 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  \", \" svg {\\n    width: 40px;\\n  }\\n  \", \";\\n\"], [\"\\n  \", \" svg {\\n    width: 40px;\\n  }\\n  \", \";\\n\"]),\n    _templateObject7 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n    svg {\\n      width: 30px;\\n    }\\n  \"], [\"\\n    svg {\\n      width: 30px;\\n    }\\n  \"]),\n    _templateObject8 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  \", \";\\n  \", \";\\n\"], [\"\\n  \", \";\\n  \", \";\\n\"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nvar ArticleCard = (_dec = (0, _track.track)(), _dec(_class =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ArticleCard, _Component);\n\n  function ArticleCard() {\n    var _ref;\n\n    var _temp, _this;\n\n    _classCallCheck(this, ArticleCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _possibleConstructorReturn(_this, (_temp = _this = _possibleConstructorReturn(this, (_ref = ArticleCard.__proto__ || Object.getPrototypeOf(ArticleCard)).call.apply(_ref, [this].concat(args))), Object.defineProperty(_assertThisInitialized(_this), \"isEditing\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var _this$props = _this.props,\n            editDate = _this$props.editDate,\n            editDescription = _this$props.editDescription,\n            editImage = _this$props.editImage,\n            editTitle = _this$props.editTitle,\n            editing = _this$props.editing;\n        return editing || editDate || editDescription || editImage || editTitle;\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderDate\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var _this$props2 = _this.props,\n            article = _this$props2.article,\n            color = _this$props2.color,\n            editDate = _this$props2.editDate;\n        var media = article.media;\n\n        if (editDate) {\n          return _react.default.createElement(MediaDate, null, editDate);\n        } else if (media) {\n          return _this.renderMediaDate();\n        } else {\n          return _react.default.createElement(_Byline.Byline, {\n            article: article,\n            color: color,\n            layout: \"condensed\"\n          });\n        }\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderMediaDate\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var article = _this.props.article;\n        var mediaDate = (0, _Constants.getMediaDate)(article);\n        var date = article.layout === \"video\" ? mediaDate : article.published_at;\n\n        if (_this.isUnpublishedMedia()) {\n          return _react.default.createElement(MediaDate, null, _react.default.createElement(\"span\", null, \"Available \"), _react.default.createElement(_AuthorDate.Date, {\n            format: \"monthYear\",\n            date: mediaDate\n          }));\n        } else {\n          return _react.default.createElement(_AuthorDate.Date, {\n            layout: \"condensed\",\n            date: date\n          });\n        }\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"renderMediaCoverInfo\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var _this$props3 = _this.props,\n            article = _this$props3.article,\n            color = _this$props3.color;\n\n        if (_this.isUnpublishedMedia()) {\n          return _react.default.createElement(MediaComingSoon, null, \"Coming Soon\");\n        } else {\n          return _react.default.createElement(MediaPlay, null, _react.default.createElement(_IconVideoPlay.IconVideoPlay, {\n            color: color\n          }), (0, _Constants.formatTime)(article.media.duration));\n        }\n      }\n    }), Object.defineProperty(_assertThisInitialized(_this), \"openLink\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(e) {\n        e.preventDefault();\n\n        if (!_this.isUnpublishedMedia() && !_this.isEditing()) {\n          window.open(e.currentTarget.attributes.href.value);\n        }\n\n        _this.props.tracking.trackEvent({\n          action: \"Click\",\n          label: \"Related article card\"\n        });\n      }\n    }), _temp));\n  }\n\n  _createClass(ArticleCard, [{\n    key: \"isUnpublishedMedia\",\n    value: function isUnpublishedMedia() {\n      var _props$article = this.props.article,\n          media = _props$article.media,\n          layout = _props$article.layout;\n      return layout === \"video\" && media && !media.published;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          article = _props.article,\n          color = _props.color,\n          editDescription = _props.editDescription,\n          editImage = _props.editImage,\n          editTitle = _props.editTitle,\n          series = _props.series;\n      var layout = article.layout,\n          media = article.media;\n      var isUnpublishedMedia = this.isUnpublishedMedia();\n      return _react.default.createElement(ArticleCardContainer, {\n        href: isUnpublishedMedia ? \"\" : article.slug,\n        color: color,\n        className: \"ArticleCard\",\n        published: !isUnpublishedMedia,\n        onClick: this.openLink\n      }, _react.default.createElement(TextContainer, null, _react.default.createElement(\"div\", null, _react.default.createElement(Header, null, _react.default.createElement(\"div\", null, series && series.title)), _react.default.createElement(Title, null, editTitle ? editTitle : article.thumbnail_title || article.title), _react.default.createElement(Description, null, editDescription ? editDescription : article.description)), this.renderDate()), _react.default.createElement(ImageContainer, null, editImage ? editImage : _react.default.createElement(Image, {\n        src: (0, _resizer.crop)(article.thumbnail_image, {\n          width: 680,\n          height: 450\n        })\n      }), media && layout === \"video\" && this.renderMediaCoverInfo()));\n    }\n  }]);\n\n  return ArticleCard;\n}(_react.Component)) || _class);\nexports.ArticleCard = ArticleCard;\nObject.defineProperty(ArticleCard, \"defaultProps\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: void 0\n});\nArticleCard.defaultProps = {\n  color: \"black\"\n};\n\nvar Image =\n/*#__PURE__*/\n_styledComponents.default.img.withConfig({\n  displayName: \"ArticleCard__Image\",\n  componentId: \"nqsvxw-0\"\n})([\"width:100%;height:100%;object-fit:cover;object-position:center;transition:opacity 0.15s;display:block;\"]);\n\nvar ImageContainer =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArticleCard__ImageContainer\",\n  componentId: \"nqsvxw-1\"\n})([\"position:relative;width:50%;height:inherit;margin-left:30px;\", \";\"], _Helpers.pMedia.md(_templateObject));\n\nvar ArticleCardContainer =\n/*#__PURE__*/\n_styledComponents.default.a.withConfig({\n  displayName: \"ArticleCard__ArticleCardContainer\",\n  componentId: \"nqsvxw-2\"\n})([\"display:block;border:1px solid;border-radius:2px;color:\", \";cursor:\", \";text-decoration:none;padding:30px;display:flex;\", \"{opacity:\", \";}&:hover{\", \"{opacity:0.7;}}\", \"{background:\", \";}\", \";\"], function (props) {\n  return props.color;\n}, function (props) {\n  return props.published ? \"pointer\" : \"default\";\n}, Image, function (props) {\n  return props.published ? \"1\" : \"0.7\";\n}, Image, ImageContainer, function (props) {\n  return props.color === \"white\" ? \"black\" : \"white\";\n}, _Helpers.pMedia.md(_templateObject2));\n\nexports.ArticleCardContainer = ArticleCardContainer;\n\nvar TextContainer =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArticleCard__TextContainer\",\n  componentId: \"nqsvxw-3\"\n})([\"display:flex;flex-direction:column;justify-content:space-between;width:50%;margin-bottom:5px;.author,.date{\", \";}\", \";\"], (0, _Fonts.unica)(\"s16\", \"medium\"), _Helpers.pMedia.md(_templateObject3));\n\nvar Title =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArticleCard__Title\",\n  componentId: \"nqsvxw-4\"\n})([\"\", \";margin-bottom:30px;\", \";\"], (0, _Fonts.unica)(\"s45\"), _Helpers.pMedia.md(_templateObject4, (0, _Fonts.unica)(\"s32\")));\n\nvar Header =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArticleCard__Header\",\n  componentId: \"nqsvxw-5\"\n})([\"\", \";margin-bottom:10px;\"], (0, _Fonts.unica)(\"s16\", \"medium\"));\n\nvar Description =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArticleCard__Description\",\n  componentId: \"nqsvxw-6\"\n})([\"\", \";\", \";\"], (0, _Fonts.garamond)(\"s23\"), _Helpers.pMedia.md(_templateObject5, (0, _Fonts.garamond)(\"s19\")));\n\nvar MediaDate =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArticleCard__MediaDate\",\n  componentId: \"nqsvxw-7\"\n})([\"\", \" display:flex;align-items:flex-end;span{margin-right:5px;}\"], (0, _Fonts.unica)(\"s16\", \"medium\"));\n\nvar Media =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"ArticleCard__Media\",\n  componentId: \"nqsvxw-8\"\n})([\"position:absolute;left:20px;bottom:20px;right:20px;display:flex;justify-content:space-between;align-items:flex-end;\"]);\n\nvar MediaPlay = Media.extend(_templateObject6, (0, _Fonts.unica)(\"s16\", \"medium\"), _Helpers.pMedia.md(_templateObject7));\nvar MediaComingSoon = Media.extend(_templateObject8, (0, _Fonts.unica)(\"s45\"), _Helpers.pMedia.md(_templateObject4, (0, _Fonts.unica)(\"s32\")));",{"version":3,"sources":["src/Components/Publishing/RelatedArticles/ArticleCards/ArticleCard.tsx"],"names":["ArticleCard","props","editDate","editDescription","editImage","editTitle","editing","article","color","media","renderMediaDate","mediaDate","date","layout","published_at","isUnpublishedMedia","duration","e","preventDefault","isEditing","window","open","currentTarget","attributes","href","value","tracking","trackEvent","action","label","published","series","slug","openLink","title","thumbnail_title","description","renderDate","thumbnail_image","width","height","renderMediaCoverInfo","defaultProps","Image","img","ImageContainer","div","md","ArticleCardContainer","a","TextContainer","Title","Header","Description","MediaDate","Media","MediaPlay","extend","MediaComingSoon"],"mappings":"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","file":"/Users/eve/development/reaction/src/Components/Publishing/RelatedArticles/ArticleCards/ArticleCard.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import React, { Component } from \"react\"\nimport styled from \"styled-components\"\nimport { crop } from \"../../../../Utils/resizer\"\nimport { track } from \"../../../../Utils/track\"\nimport { pMedia } from \"../../../Helpers\"\nimport { Date } from \"../../Byline/AuthorDate\"\nimport { Byline } from \"../../Byline/Byline\"\nimport { formatTime, getMediaDate } from \"../../Constants\"\nimport { garamond, unica } from \"Assets/Fonts\"\nimport { IconVideoPlay } from \"../../Icon/IconVideoPlay\"\n\ninterface Props {\n  article?: any\n  color?: string\n  editing?: boolean\n  editDate?: any\n  editDescription?: any\n  editTitle?: any\n  editImage?: any\n  series?: any\n  tracking?: any\n}\n\ninterface LinkProps extends Props, React.HTMLProps<HTMLLinkElement> {\n  published: boolean\n}\n\n@track()\nexport class ArticleCard extends Component<Props, null> {\n  public static defaultProps: Partial<Props>\n\n  isUnpublishedMedia() {\n    const { media, layout } = this.props.article\n    return layout === \"video\" && media && !media.published\n  }\n\n  isEditing = () => {\n    const {\n      editDate,\n      editDescription,\n      editImage,\n      editTitle,\n      editing,\n    } = this.props\n\n    return editing || editDate || editDescription || editImage || editTitle\n  }\n\n  renderDate = () => {\n    const { article, color, editDate } = this.props\n    const { media } = article\n\n    if (editDate) {\n      return <MediaDate>{editDate}</MediaDate>\n    } else if (media) {\n      return this.renderMediaDate()\n    } else {\n      return <Byline article={article} color={color} layout=\"condensed\" />\n    }\n  }\n\n  renderMediaDate = () => {\n    const { article } = this.props\n    const mediaDate = getMediaDate(article)\n    const date = article.layout === \"video\" ? mediaDate : article.published_at\n\n    if (this.isUnpublishedMedia()) {\n      return (\n        <MediaDate>\n          <span>Available </span>\n          <Date format=\"monthYear\" date={mediaDate} />\n        </MediaDate>\n      )\n    } else {\n      return <Date layout=\"condensed\" date={date} />\n    }\n  }\n\n  renderMediaCoverInfo = () => {\n    const { article, color } = this.props\n\n    if (this.isUnpublishedMedia()) {\n      return <MediaComingSoon>Coming Soon</MediaComingSoon>\n    } else {\n      return (\n        <MediaPlay>\n          <IconVideoPlay color={color} />\n          {formatTime(article.media.duration)}\n        </MediaPlay>\n      )\n    }\n  }\n\n  openLink = e => {\n    e.preventDefault()\n\n    if (!this.isUnpublishedMedia() && !this.isEditing()) {\n      window.open(e.currentTarget.attributes.href.value)\n    }\n\n    this.props.tracking.trackEvent({\n      action: \"Click\",\n      label: \"Related article card\",\n    })\n  }\n\n  render() {\n    const {\n      article,\n      color,\n      editDescription,\n      editImage,\n      editTitle,\n      series,\n    } = this.props\n    const { layout, media } = article\n    const isUnpublishedMedia = this.isUnpublishedMedia()\n\n    return (\n      <ArticleCardContainer\n        href={isUnpublishedMedia ? \"\" : article.slug}\n        color={color}\n        className=\"ArticleCard\"\n        published={!isUnpublishedMedia}\n        onClick={this.openLink}\n      >\n        <TextContainer>\n          <div>\n            <Header>\n              <div>{series && series.title}</div>\n            </Header>\n            <Title>\n              {editTitle ? editTitle : article.thumbnail_title || article.title}\n            </Title>\n            <Description>\n              {editDescription ? editDescription : article.description}\n            </Description>\n          </div>\n          {this.renderDate()}\n        </TextContainer>\n\n        <ImageContainer>\n          {editImage ? (\n            editImage\n          ) : (\n            <Image\n              src={crop(article.thumbnail_image, { width: 680, height: 450 })}\n            />\n          )}\n          {media && layout === \"video\" && this.renderMediaCoverInfo()}\n        </ImageContainer>\n      </ArticleCardContainer>\n    )\n  }\n}\n\nArticleCard.defaultProps = {\n  color: \"black\",\n}\n\nconst Image = styled.img`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: center;\n  transition: opacity 0.15s;\n  display: block;\n`\n\nconst ImageContainer = styled.div`\n  position: relative;\n  width: 50%;\n  height: inherit;\n  margin-left: 30px;\n  ${pMedia.md`\n    width: 100%;\n    margin-left: 0;\n    margin-bottom: 10px;\n  `};\n`\n\nexport const ArticleCardContainer = styled.a`\n  display: block;\n  border: 1px solid;\n  border-radius: 2px;\n  color: ${(props: LinkProps) => props.color};\n  cursor: ${(props: LinkProps) => (props.published ? \"pointer\" : \"default\")};\n  text-decoration: none;\n  padding: 30px;\n  display: flex;\n  ${Image} {\n    opacity: ${(props: LinkProps) => (props.published ? \"1\" : \"0.7\")};\n  }\n  &:hover {\n    ${Image} {\n      opacity: 0.7;\n    }\n  }\n  ${ImageContainer} {\n    background: ${(props: LinkProps) =>\n      props.color === \"white\" ? \"black\" : \"white\"};\n  }\n  ${pMedia.md`\n    flex-direction: column-reverse;\n    padding: 20px;\n  `};\n`\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 50%;\n  margin-bottom: 5px;\n  .author,\n  .date {\n    ${unica(\"s16\", \"medium\")};\n  }\n  ${pMedia.md`\n    width: 100%;\n    margin-bottom: 0;\n  `};\n`\n\nconst Title = styled.div`\n  ${unica(\"s45\")};\n  margin-bottom: 30px;\n  ${pMedia.md`\n    ${unica(\"s32\")}\n  `};\n`\n\nconst Header = styled.div`\n  ${unica(\"s16\", \"medium\")};\n  margin-bottom: 10px;\n`\n\nconst Description = styled.div`\n  ${garamond(\"s23\")};\n  ${pMedia.md`\n    ${garamond(\"s19\")}\n    margin-bottom: 20px;\n  `};\n`\n\nconst MediaDate = styled.div`\n  ${unica(\"s16\", \"medium\")} display: flex;\n  align-items: flex-end;\n  span {\n    margin-right: 5px;\n  }\n`\n\nconst Media = styled.div`\n  position: absolute;\n  left: 20px;\n  bottom: 20px;\n  right: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n`\n\nconst MediaPlay = Media.extend`\n  ${unica(\"s16\", \"medium\")} svg {\n    width: 40px;\n  }\n  ${pMedia.md`\n    svg {\n      width: 30px;\n    }\n  `};\n`\n\nconst MediaComingSoon = Media.extend`\n  ${unica(\"s45\")};\n  ${pMedia.md`\n    ${unica(\"s32\")}\n  `};\n`\n"]}]}