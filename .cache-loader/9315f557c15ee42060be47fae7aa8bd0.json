{"remainingRequest":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js??ref--5-1!/Users/eve/development/reaction/src/Components/Publishing/Sections/Video.tsx","dependencies":[{"path":"/Users/eve/development/reaction/src/Components/Publishing/Sections/Video.tsx","mtime":1520966970000},{"path":"/Users/eve/development/reaction/.babelrc","mtime":1527877289000},{"path":"/Users/eve/development/reaction/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/reaction/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidVideoUrl = isValidVideoUrl;\nexports.Video = exports.CoverImage = exports.IFrame = exports.VIDEO_RATIO = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactSizeme = _interopRequireDefault(require(\"react-sizeme\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _url = _interopRequireDefault(require(\"url\"));\n\nvar _Events = _interopRequireDefault(require(\"../../../Utils/Events\"));\n\nvar _resizer = require(\"../../../Utils/resizer\");\n\nvar _track = _interopRequireDefault(require(\"../../../Utils/track\"));\n\nvar _Helpers = require(\"../../Helpers\");\n\nvar _Constants = require(\"../Constants\");\n\nvar _Caption = require(\"./Caption\");\n\nvar _VideoControls = require(\"./VideoControls\");\n\nvar _dec, _class;\n\nvar _templateObject = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: \", \";\\n\"], [\"\\n  width: 100%;\\n  height: \", \";\\n\"]),\n    _templateObject2 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  width: 100%;\\n  position: relative;\\n\\n  \", \"\\n\"], [\"\\n  width: 100%;\\n  position: relative;\\n\\n  \", \"\\n\"]),\n    _templateObject3 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n          height: 450px;\\n        \"], [\"\\n          height: 450px;\\n        \"]),\n    _templateObject4 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n          height: 300px;\\n          padding-bottom: 20px;\\n        \"], [\"\\n          height: 300px;\\n          padding-bottom: 20px;\\n        \"]),\n    _templateObject5 = /*#__PURE__*/ _taggedTemplateLiteral([\"\\n  display: \", \";\\n  justify-content: center;\\n  align-items: center;\\n  width: 100%;\\n  height: \", \";\\n  position: absolute;\\n  background: url(\", \") no-repeat center center;\\n  background-size: cover;\\n  cursor: pointer;\\n\"], [\"\\n  display: \", \";\\n  justify-content: center;\\n  align-items: center;\\n  width: 100%;\\n  height: \", \";\\n  position: absolute;\\n  background: url(\", \") no-repeat center center;\\n  background-size: cover;\\n  cursor: pointer;\\n\"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nvar BLACKLIST = [\"gif\", \"jpg\", \"jpeg\", \"png\"];\nvar QUERYSTRING = \"?title=0&portrait=0&badge=0&byline=0&showinfo=0&rel=0&controls=2&modestbranding=1&iv_load_policy=3&color=E5E5E5\";\nvar VIDEO_RATIO = 0.5625;\nexports.VIDEO_RATIO = VIDEO_RATIO;\nvar VideoComponent = (_dec = (0, _track.default)(function (props) {\n  return props.trackingData ? props.trackingData : {};\n}, {\n  dispatch: function dispatch(data) {\n    return _Events.default.postEvent(data);\n  }\n}), _dec(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(VideoComponent, _React$Component);\n\n  function VideoComponent(props) {\n    var _this;\n\n    _classCallCheck(this, VideoComponent);\n\n    _this = _possibleConstructorReturn(this, (VideoComponent.__proto__ || Object.getPrototypeOf(VideoComponent)).call(this, props));\n    var url = _this.props.section.url;\n    var isValid = url && isValidVideoUrl(url);\n\n    if (isValid) {\n      var parsedUrl = _url.default.parse(url, true);\n\n      var playerUrl = getPlayerUrl(parsedUrl);\n      var id = getId(parsedUrl);\n      var playerSrc = playerUrl + id + QUERYSTRING;\n      _this.state = {\n        src: playerSrc,\n        hidden: false\n      };\n    } else {\n      console.error(\"(@artsy/reaction) Video.tsx: A url is required for video.\", _this.props);\n      _this.state = {\n        hidden: true\n      };\n    }\n\n    _this.playVideo = _this.playVideo.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(VideoComponent, [{\n    key: \"trackVideoClick\",\n    value: function trackVideoClick() {\n      this.props.tracking.trackEvent({\n        action: \"Click\",\n        label: \"Play video\"\n      });\n    }\n  }, {\n    key: \"playVideo\",\n    value: function playVideo() {\n      var playerSrc = this.state.src + \"&autoplay=1\";\n      this.setState({\n        src: playerSrc,\n        hidden: true\n      });\n      this.trackVideoClick();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props$section = this.props.section,\n          caption = _props$section.caption,\n          cover_image_url = _props$section.cover_image_url;\n      var width = this.props.size.width;\n      var src = (0, _resizer.resize)(cover_image_url, {\n        width: 1200\n      });\n      var showCaption = this.props.layout !== \"feature\";\n      return _react.default.createElement(VideoContainer, {\n        layout: this.props.layout,\n        className: \"VideoContainer\"\n      }, cover_image_url && _react.default.createElement(CoverImage, {\n        className: \"VideoCover\",\n        src: src,\n        height: width * VIDEO_RATIO,\n        onClick: this.playVideo,\n        hidden: this.state.hidden\n      }, _react.default.createElement(_VideoControls.VideoControls, null)), _react.default.createElement(IFrame, {\n        src: this.state.src,\n        frameBorder: \"0\",\n        allowFullScreen: true,\n        height: width * VIDEO_RATIO\n      }), showCaption && _react.default.createElement(_Caption.Caption, {\n        caption: caption,\n        layout: this.props.layout\n      }, this.props.children));\n    }\n  }]);\n\n  return VideoComponent;\n}(_react.default.Component)) || _class); // Utils\n\nObject.defineProperty(VideoComponent, \"defaultProps\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: {\n    size: {\n      width: 500\n    },\n    tracking: {\n      trackEvent: function trackEvent(x) {\n        return x;\n      }\n    }\n  }\n});\n\nfunction isValidVideoUrl(url) {\n  var urlExtension = url && url.split(\".\").pop();\n  var isValid = BLACKLIST.every(function (bad) {\n    return urlExtension !== bad;\n  });\n  return isValid;\n}\n\nfunction getPlayerUrl(url) {\n  var hostname = url.hostname;\n\n  if (hostname) {\n    if (hostname.indexOf(\"vimeo.com\") > -1) {\n      return \"https://player.vimeo.com/video/\";\n    } else if (hostname.indexOf(\"youtu\") > -1) {\n      return \"https://www.youtube.com/embed/\";\n    }\n  } else {\n    return \"\"; // FIXME: check for errors\n  }\n}\n\nfunction getId(url) {\n  var hostname = url.hostname,\n      pathname = url.pathname;\n\n  if (hostname && pathname) {\n    if (url.hostname.indexOf(\"youtube.com\") > 0) {\n      return url.query.v;\n    } else {\n      return url.pathname.split(\"/\").pop();\n    }\n  } else {\n    return \"\"; // FIXME: error\n  }\n} // Styles\n\n\nvar iframe = _styledComponents.default.iframe;\nvar IFrame = iframe(_templateObject, function (props) {\n  return props.height + \"px\";\n});\nexports.IFrame = IFrame;\nvar Div = _styledComponents.default.div;\nvar VideoContainer = Div(_templateObject2, function (p) {\n  if (p.layout === \"feature\") {\n    return \"\\n        text-align: center;\\n        padding-bottom: 53px;\\n        max-width: 1200px;\\n        margin: 0 auto;\\n        \".concat(_Helpers.pMedia.md(_templateObject3), \"\\n\\n        \").concat(_Helpers.pMedia.xs(_templateObject4), \"\\n      \");\n  }\n});\nvar CoverImage = Div(_templateObject5, function (props) {\n  return props.hidden || !props.src ? \"none\" : \"flex\";\n}, function (props) {\n  return props.height + \"px\";\n}, function (props) {\n  return props.src || \"\";\n});\nexports.CoverImage = CoverImage;\nvar sizeMeOptions = {\n  refreshRate: _Constants.SIZE_ME_REFRESH_RATE,\n  noPlaceholder: true\n};\nvar Video = (0, _reactSizeme.default)(sizeMeOptions)(VideoComponent);\nexports.Video = Video;",{"version":3,"sources":["src/Components/Publishing/Sections/Video.tsx"],"names":["BLACKLIST","QUERYSTRING","VIDEO_RATIO","VideoComponent","props","trackingData","dispatch","postEvent","data","url","section","isValid","isValidVideoUrl","parsedUrl","parse","playerUrl","getPlayerUrl","id","getId","playerSrc","state","src","hidden","console","error","playVideo","bind","tracking","trackEvent","action","label","setState","trackVideoClick","caption","cover_image_url","width","size","showCaption","layout","children","Component","x","urlExtension","split","pop","every","bad","hostname","indexOf","pathname","query","v","iframe","IFrame","height","Div","div","VideoContainer","p","md","xs","CoverImage","sizeMeOptions","refreshRate","noPlaceholder","Video"],"mappings":"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","file":"/Users/eve/development/reaction/src/Components/Publishing/Sections/Video.tsx","sourceRoot":"/Users/eve/development/reaction","sourcesContent":["import React from \"react\"\nimport sizeMe from \"react-sizeme\"\nimport styled, { StyledFunction } from \"styled-components\"\nimport urlParser from \"url\"\nimport Events from \"../../../Utils/Events\"\nimport { resize } from \"../../../Utils/resizer\"\nimport track from \"../../../Utils/track\"\nimport { pMedia as breakpoint } from \"../../Helpers\"\nimport { SIZE_ME_REFRESH_RATE } from \"../Constants\"\nimport { ArticleLayout } from \"../Typings\"\nimport { Caption } from \"./Caption\"\nimport { VideoControls } from \"./VideoControls\"\n\nconst BLACKLIST = [\"gif\", \"jpg\", \"jpeg\", \"png\"]\nconst QUERYSTRING =\n  \"?title=0&portrait=0&badge=0&byline=0&showinfo=0&rel=0&controls=2&modestbranding=1&iv_load_policy=3&color=E5E5E5\"\nexport const VIDEO_RATIO = 0.5625\n\ninterface VideoProps {\n  section: {\n    url: string\n    caption?: string\n    cover_image_url?: string\n  }\n  size?: any\n  tracking?: any\n  trackingData?: any\n  layout?: ArticleLayout\n}\n\ninterface VideoState {\n  src?: string // FIXME: Coming from Positron, this can be empty / invalid\n  hidden: boolean\n}\n\n@track(\n  props => {\n    return props.trackingData ? props.trackingData : {}\n  },\n  {\n    dispatch: data => Events.postEvent(data),\n  }\n)\nclass VideoComponent extends React.Component<VideoProps, VideoState> {\n  static defaultProps = {\n    size: {\n      width: 500,\n    },\n    tracking: {\n      trackEvent: x => x,\n    },\n  }\n\n  constructor(props) {\n    super(props)\n\n    const { url } = this.props.section\n    const isValid = url && isValidVideoUrl(url)\n\n    if (isValid) {\n      const parsedUrl = urlParser.parse(url, true)\n      const playerUrl = getPlayerUrl(parsedUrl)\n      const id = getId(parsedUrl)\n      const playerSrc = playerUrl + id + QUERYSTRING\n\n      this.state = {\n        src: playerSrc,\n        hidden: false,\n      }\n    } else {\n      console.error(\n        \"(@artsy/reaction) Video.tsx: A url is required for video.\",\n        this.props\n      )\n\n      this.state = {\n        hidden: true,\n      }\n    }\n    this.playVideo = this.playVideo.bind(this)\n  }\n\n  trackVideoClick() {\n    this.props.tracking.trackEvent({\n      action: \"Click\",\n      label: \"Play video\",\n    })\n  }\n\n  playVideo() {\n    const playerSrc = this.state.src + \"&autoplay=1\"\n    this.setState({ src: playerSrc, hidden: true })\n    this.trackVideoClick()\n  }\n\n  render() {\n    const { caption, cover_image_url } = this.props.section\n    const { width } = this.props.size\n    const src = resize(cover_image_url, { width: 1200 })\n    const showCaption = this.props.layout !== \"feature\"\n\n    return (\n      <VideoContainer layout={this.props.layout} className=\"VideoContainer\">\n        {cover_image_url && (\n          <CoverImage\n            className=\"VideoCover\"\n            src={src}\n            height={width * VIDEO_RATIO}\n            onClick={this.playVideo}\n            hidden={this.state.hidden}\n          >\n            <VideoControls />\n          </CoverImage>\n        )}\n\n        <IFrame\n          src={this.state.src}\n          frameBorder=\"0\"\n          allowFullScreen\n          height={width * VIDEO_RATIO}\n        />\n\n        {showCaption && (\n          <Caption caption={caption} layout={this.props.layout}>\n            {this.props.children}\n          </Caption>\n        )}\n      </VideoContainer>\n    )\n  }\n}\n\n// Utils\nexport function isValidVideoUrl(url: string) {\n  const urlExtension = url && url.split(\".\").pop()\n  const isValid = BLACKLIST.every(bad => urlExtension !== bad)\n  return isValid\n}\n\nfunction getPlayerUrl(url) {\n  const { hostname } = url\n\n  if (hostname) {\n    if (hostname.indexOf(\"vimeo.com\") > -1) {\n      return \"https://player.vimeo.com/video/\"\n    } else if (hostname.indexOf(\"youtu\") > -1) {\n      return \"https://www.youtube.com/embed/\"\n    }\n  } else {\n    return \"\" // FIXME: check for errors\n  }\n}\n\nfunction getId(url) {\n  const { hostname, pathname } = url\n\n  if (hostname && pathname) {\n    if (url.hostname.indexOf(\"youtube.com\") > 0) {\n      return url.query.v\n    } else {\n      return url.pathname.split(\"/\").pop()\n    }\n  } else {\n    return \"\" // FIXME: error\n  }\n}\n\n// Styles\n\nconst iframe: StyledFunction<React.HTMLProps<HTMLIFrameElement>> = styled.iframe\n\nexport const IFrame = iframe`\n  width: 100%;\n  height: ${props => props.height + \"px\"};\n`\n\ninterface CoverImageProps {\n  src?: string\n  height?: number\n  layout?: ArticleLayout\n}\n\nconst Div: StyledFunction<CoverImageProps & React.HTMLProps<HTMLDivElement>> =\n  styled.div\n\nconst VideoContainer = Div`\n  width: 100%;\n  position: relative;\n\n  ${p => {\n    if (p.layout === \"feature\") {\n      return `\n        text-align: center;\n        padding-bottom: 53px;\n        max-width: 1200px;\n        margin: 0 auto;\n        ${breakpoint.md`\n          height: 450px;\n        `}\n\n        ${breakpoint.xs`\n          height: 300px;\n          padding-bottom: 20px;\n        `}\n      `\n    }\n  }}\n`\n\nexport const CoverImage = Div`\n  display: ${props => (props.hidden || !props.src ? \"none\" : \"flex\")};\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: ${props => props.height + \"px\"};\n  position: absolute;\n  background: url(${props => props.src || \"\"}) no-repeat center center;\n  background-size: cover;\n  cursor: pointer;\n`\n\nconst sizeMeOptions = {\n  refreshRate: SIZE_ME_REFRESH_RATE,\n  noPlaceholder: true,\n}\n\nexport const Video = sizeMe(sizeMeOptions)(VideoComponent)\n"]}]}